(function(c){var f=window.AmazonUIPageJS||window.P,n=f._namespace||f.attributeErrors,a=n?n("ProductAdsDetailPageAssets"):f;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,f,n){c.when("A","a-carousel-framework","a-carousel-ajax-standard").register("AmazonClicks",function(a,c,f){var p=a.extend([],f);p.getItems=function(a,d,b){var e=a.getAttr("pageNumber");a.getAttr("pageSize");var l=a.getAttr("fetchedItems"),m;m=Array.isArray(a.getAttr("initialSeenAsins"))?a.getAttr("initialSeenAsins"):
JSON.parse("["+a.getAttr("initialSeenAsins")+"]");var h="[",g;for(g=0;g<m.length;g++)h+='"'+m[g]+'",';h=h.substring(0,h.length-1);for(g=0;g<l.length;g++)"object"===typeof l[g]&&-1===h.indexOf(l[g].oid)&&(h+=',"'+l[g].oid+'"');h+="]";b.pg=e;b.tot=a.getAttr("set_size");b.start=b.offset;b.num=b.count;b.cc=1===e?0:b.offset;b.oData=h;f.getItems(a,d,b)};c.registerStrategy("ajax","clicksCustomAjax",p);var e=[];return{registerFeedbackEvents:function(e,d,b,k,l){var m=!0,h=function(){a.$("#"+d).text(k);m=!1;
a.$("."+l).each(function(){a.$(this).show()})},g=function(){a.$("#"+d).text(b);m=!0;a.$("."+l).each(function(){a.$(this).hide()})};a.$("#"+d).click(function(){m?h():g()});a.on("a:carousel:"+e+":change:pageNumber",g);g()},truncateTitles:function(e){a.$("."+e).each(function(){var d=a.$(this);if("hidden"===d.css("overflow")){var b=d.html(),k=a.$(this.cloneNode(!0)).hide().css("position","absolute").css("overflow","visible").width(d.width()).height("auto");d.after(k);for(k.html(b);0<b.length&&k.height()>
d.height();)b=b.substr(0,b.length-1),k.html(b+"\x26#133;");d.html(k.html()).height("auto").removeClass(e);k.remove()}})},loadImagePixel:function(c){if(Array.isArray(e)&&!e.includes(c))var d=a.on.ready(function(){(new Image).src=c;e.push(c);a.off("ready",d)})}}});(function(a,f,n){function p(){return a.P&&a.P.AUI_BUILD_DATE}p()?(c.when("jQuery").register("sponsored-products-truncator-jQuery",function(a){return a}),c.when("ready").register("sponsored-products-truncator-ready",function(){})):a.amznJQ&&
(a.amznJQ.available("jQuery",function(){c.register("sponsored-products-truncator-jQuery",function(){return a.amznJQ.jQuery})}),a.amznJQ.onReady("jQuery",function(){c.register("sponsored-products-truncator-ready",function(){})}),a.amznJQ.available("amazonShoveler",function(){c.register("sponsored-products-truncator-amznJQ-shoveler",function(){})}));c.register("sponsored-products-truncator-util",function(){function e(a,b){c({logLevel:a,attribution:"ProductAdsDetailPageAssets",message:"[sponsored-products-truncator] "+
b})}var c=a.ueLogError;"function"!==typeof c&&(c=function(a,b){if(b&&b.message)throw Error(b.message);if(a&&a.message)throw Error(a.message);});return{constants:{FEATURE_NAME:"SponsoredProductsTitleTruncation"},count:a.ue&&a.ue.count||function(){},isAUI:p,log:{warn:function(a){e("WARN",a)},error:function(a){e("ERROR",a)}}}})})(f,document);(function(a,f,n){c.when("A","sponsored-products-truncator-jQuery","sponsored-products-truncator-util").register("sponsored-products-truncator-line-truncator",function(a,
e,c){function d(a){this.$element=a;this.$experimentElement=e("\x3cdiv\x3e").addClass("sponsored-products-truncator-offscreen-truncate");this.maxRows=a.attr("data-rows");this.lineHeight=this.getLineHeight();this.maxRows||c.log.error("Truncation element missing necessary line number data")}var b,k;b=/(?=[ \-\/])/;k=/[^\/\-\[\]():\s]/;d.prototype.truncate=function(){var a=this.$element.html(),b,a=e.trim(a);this.$element.append(this.$experimentElement);this.checkLineFit(a)||((b=this.truncateByToken(a))?
(this.$element.html(b),this.$element.attr({title:a})):c.log.error("Unable to successfully truncate line "+a));this.$experimentElement.remove()};d.prototype.getLineHeight=function(){var a=this.$element.html(),b;this.$element.html("\x26hellip;");b=this.$element.innerHeight();this.$element.html(a);return b};d.prototype.checkLineFit=function(a){this.$experimentElement.html(a);a=this.$experimentElement.get(0).clientHeight/this.lineHeight;return Math.round(a)<=this.maxRows};d.prototype.truncateByToken=
function(a){a=a.split(this.getTokenSeparatorRegex());var b=a.length,d=0,c,e,f;for(f=1;f!==b;)if(c=Math.floor((b+f)/2),e=a.slice(0,c).join("")+"\x26hellip;",this.checkLineFit(e)){if(1>=b-c){for(d=c;0<d&&!k.test(a[d-1]);)d--;break}f=c}else b=c;if(0!==d)return a.slice(0,d).join("")+"\x26hellip;"};d.prototype.getTokenSeparatorRegex=function(){return this.$element.attr("data-truncate-by-character")?"":b};return{truncateLines:function(b){b.find(".sponsored-products-truncator-truncate:visible, .sponsored-products-truncator-truncate-medium:visible").each(function(){var a=
new d(e(this));a&&(a.truncate(),e(this).addClass("sponsored-products-truncator-truncated").removeClass("sponsored-products-truncator-truncate sponsored-products-truncator-truncate-medium"),e(this).removeClass(function(a,b){return(b.match(/sponsored-products-truncator-line-clamp-\d/g)||[]).join(" ")}))});a.trigger("sponsored-products-truncator:linestruncated")}}});c.when("jQuery","A","sponsored-products-truncator-line-truncator").register("sp-dp-carousel-truncation",function(a,c,f){function d(a){"string"===
typeof a?f.truncateLines(c.$(a)):f.truncateLines(a.carousel.dom.$container)}a=["sp_detail_carousel","sp_detail2_carousel"];d("#sp_detail");d("#sp_detail2");for(var b=a.length-1;0<=b;b--)c.on("a:carousel:"+a[b]+":change:animating",d),c.on("a:carousel:"+a[b]+":change:loading",d),c.on("a:carousel:"+a[b]+":change:pageSize",d)})})(f,document)});
/* ******** */
(function(c){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,a=d?d("SponsoredProductsViewabilityAssets"):b;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,b,d){});
/* ******** */
(function(w,x,Q){w.execute(function(){w.when("jQuery","jumpLink").execute(function(r,d){var e=r("#miniATFUDP"),k=0;0<e.length&&(k=e.height()+9);1===x.isACRJumplLinkAnimated?d.bind("#acrCustomerWriteReviewLink, #acrCustomerReviewLink, #reviewLink, #reviewLinkShort, #reviewCreateLink",1E3,k):2===x.isACRJumplLinkAnimated?d.bind("#acrCustomerWriteReviewLink, #acrCustomerReviewLink, #reviewLink, #reviewLinkShort, #reviewCreateLink",1200,k):3===x.isACRJumplLinkAnimated?d.bind("#acrCustomerWriteReviewLink, #acrCustomerReviewLink, #reviewLink, #reviewLinkShort, #reviewCreateLink",
1400,k):4===x.isACRJumplLinkAnimated?d.bind("#acrCustomerWriteReviewLink, #acrCustomerReviewLink, #reviewLink, #reviewLinkShort, #reviewCreateLink",10,k):0<e.length&&(k=e.height()+9,d.bind("#acrCustomerWriteReviewLink, #acrCustomerReviewLink, #reviewLink, #reviewLinkShort, #reviewCreateLink",10,k));0<r("#reviewStarsLinkedCustomerReviews").length&&d.bind("#reviewStarsLinkedCustomerReviews",10,k);0<r("#askATFLink").length&&d.bind("#askATFLink",10,k);w.when("cf").execute(function(b){0<r("#important-information a[href='#legal-disclaimer']").length&&
d.bind("#important-information a[href='#legal-disclaimer']",10,k,!0)});d.bind("#seeMoreDetailsLink",300,k)});w.when("A","jQuery","ImageBlockATF","jumpLink","cf").register("miniATFUtils",function(r,d,e,k){function b(a){l&&!a||v||(a=(new Date).getTime()-h,a=50>a?50-a:10,l=1,l=0,h=(new Date).getTime(),setTimeout(function(){var a=f.scrollTop(),c=d("#miniATFUDP");if(0<c.length){var b=t;if("T1"===b){b=d("#sims_fbt");if(0>=b.length||0>=b.height())b=d("#buyxgety_feature_div");var h=b,b=Number.MAX_VALUE;
if(h&&0<h.length){var l=h.height(),h=h.offset();l&&h&&(b=h.top+l)}b=Math.min(b,1200)}else if("T2"===b){b="#product-details-grid_feature_div #prodDetails #important-information_feature_div #importantInformation #detail-bullets #detail_bullets_id #technical-data #technicalSpecifications_feature_div #productDescription #product-description-iframe #dpx-btf-hlcx-comparison_feature_div #HLCXComparisonWidget_feature_div".split(" ");h=Number.MAX_VALUE;for(l=0;l<b.length;l++){var m=d(b[l]);if(m&&0<m.length&&
0<m.height()){var e;e=Number.MAX_VALUE;m&&0<m.length&&(m=m.offset())&&(e=m.top);e<h&&(h=e)}}b=Math.min(h,1700)-100}else b=void 0;a>b?!g&&c.is(":hidden")&&(c.removeClass("a-hidden"),c.slideDown(200)):(c.slideUp(200),g=0)}},a))}k=d("#miniATFUDP");var a=d("#miniATFPartialSelection")[0],c=d(".twister-dropdown-highlight")[0];if(!(0>=k.length)){var f,g=0,h=0,l=0,m={},v=0,q=0,t="T2";m.setMiniATFShowHeight=function(a){t=a};m.setMiniATFScrollUpHeight=function(a){q=0;"T1"===a&&(a=d("#productTitle"),0<a.length&&
(a=a.offset())&&(q=a.top-20))};d("body").delegate(".go-to-top","click",function(){d("body, html").animate({scrollTop:q},300);g=1;a&&c&&(d(c).removeClass("transparentTwisterDropdownBorder"),d(c).addClass("highlightTwisterDropdownBorder"));return!1});a&&c&&d(c).click(function(){d(this).addClass("transparentTwisterDropdownBorder");d(this).removeClass("highlightTwisterDropdownBorder")});f=d(x);f.scroll(function(){b(0)});f.resize(function(){b(1)});w.when("ImageBlockBTF").execute(function(a){var c=function(c){var b=
c.getState().selected_variations;if(b){var f="",g=c.getState().variation_display_labels;d.each(a.visualDimensions,function(c,d){var h=1===a.gIsNewTwister?d:g[d];b[h]&&(f+=" "+b[h])});return f&&f.substring(1)}},b=a.defaultColor,f=b,g=a.landingAsinColor,h,l=d("#miniATF_image");0<l.length&&(h=l.attr("src"));m.updateMiniATFDiv=function(){v=0;var a=d("#miniATF_image");0<a.length&&h&&a.attr("src",h)};r.on("image-block-twister-swatch-click",function(d,l,m,y){v=1;d=(d=y?y:c(l))&&""!==d?d:b;d===g&&(d=b);d!==
f&&(h=(l=d!==b&&d!==g?a:e)&&l.colorImages&&l.colorImages[d]&&0<l.colorImages[d].length&&l.colorImages[d][0]?l.colorImages[d][0].large:null,f=d)})});return m}});w.when("ueCount","jQuery").execute(function(r,d){d("#miniATF_BackToTopLink").click(function(){r.incrementCounterByOne("sl_back_to_top_button_click_count")})})})})(function(){var w=window.AmazonUIPageJS||window.P,x=w._namespace||w.attributeErrors;return x?x("CommonDetailPageScripts"):w}(),window);
/* ******** */
(function(e){var g=window.AmazonUIPageJS||window.P,k=g._namespace||g.attributeErrors,b=k?k("ProductBundleUIAssets"):g;b.guardFatal?b.guardFatal(e)(b,window):b.execute(function(){e(b,window)})})(function(e,g,k){e.when("A").register("bundle-logger",function(b){b=g.ue||!1;var a=b.count||!1,m=b.log||!1,f=g.ueLogError||!1,d=function(a,c,d,b){"INFO"!==c&&f?(null!==b&&"object"===typeof b?b.message="["+a+"] "+b.message:b={message:"["+a+"]"},f(b,{logLevel:c,attribution:d,message:a})):"INFO"===c&&m&&m(a,d)};
return{logCount:function(b,c){if(a)return a(b,c),a(b)},logInfo:function(a,c){d(a,"INFO",c,null)},logWarning:function(a,c,b){d(a,"WARN",c,b)},logError:function(a,c,b){d(a,"ERROR",c,b)},logFatal:function(a,c,b){d(a,"FATAL",c,b)}}})});
/* ******** */
(function(k){var l=window.AmazonUIPageJS||window.P,C=l._namespace||l.attributeErrors,a=C?C("BurjDesktopAssets"):l;a.guardFatal?a.guardFatal(k)(a,window):a.execute(function(){k(a,window)})})(function(k,l,C){k.when("jQuery","ready").register("action-panel-secondary-panel",function(a){function b(c,b){c&&b&&h[c]&&(a("#"+c+"_secondaryPanelHeadingText").text(b),h[c].heading=b)}function d(c,b){if(c&&b&&h[c]){var g=a("#"+b);a("#"+c+"_secondaryPanelHeadingContent").append(g);h[c].headingContentId=b}}function e(c,
b){if(c&&b&&h[c]){var g=a("#"+b);0<g.length&&(b!==h[c].contentId&&a("#"+h[c].contentId).addClass("aok-hidden"),a("#"+c+"_secondaryPanelContent").append(g),g.removeClass("aok-hidden"),h[c].contentId=b)}}function f(c){c&&h[c]&&a("#actionPanel,#superleafActionPanel").animate({left:"+=420px"},400,"swing",function(){a("#"+c+"_secondaryPanel").addClass("aok-hidden");a("#"+c+"_secondaryPanelBackButton").removeClass("backButtonClickedState");"undefined"!==typeof a("#actionPanelWrapper")[0].style.setProperty&&
"function"===typeof a("#actionPanelWrapper")[0].style.setProperty&&a("#actionPanelWrapper")[0].style.setProperty("overflow","visible","important")})}var h={},g=function(c){a(this).addClass("backButtonClickedState");f(c.data.panelId)};return{init:function(c){if(c.panelId){h[c.panelId]=c;c.heading&&b(c.panelId,c.heading);c.headingContentId&&d(c.panelId,c.headingContentId);c.contentId&&e(c.panelId,c.contentId);var f=a("#"+c.panelId+"_secondaryPanelBackButton");f.unbind("click",g);f.bind("click",{panelId:c.panelId},
g);"0px"!==a("#actionPanel").css("left")&&a("#actionPanel").css("left","0px")}},setHeading:b,setHeadingContent:d,setContent:e,animateIn:function(c){c&&h[c]&&.5!==parseFloat(a("#"+c+"_secondaryPanel").closest(".feature").css("opacity"))&&(a("#actionPanelWrapper")[0]!==C&&"undefined"!==typeof a("#actionPanelWrapper")[0].style.setProperty&&"function"===typeof a("#actionPanelWrapper")[0].style.setProperty&&a("#actionPanelWrapper")[0].style.setProperty("overflow","hidden","important"),a("#"+c+"_secondaryPanel").removeClass("aok-hidden"),
a("#actionPanel").animate({left:"-=420px"},400,"swing"),a("#superleafActionPanel").animate({left:"-=420px"},400,"swing"))},animateOut:f}});k.when("jQuery","ready").register("elevatorFeature",function(a){var b,d,e,f,h,g,c,y=function(){l.pageYOffset>f?(b.addClass("stickyBar"),e.removeClass("aok-hidden"),d.removeClass("aok-hidden")):(b.removeClass("stickyBar"),e.addClass("aok-hidden"),d.addClass("aok-hidden"))},v=function(){var b=l.pageYOffset,g,e;g=0;for(e=c.length;g<e;++g){var f=c[g],d=a(f.element);
if(0<d.length){var n=d.offset().top-h-10,d=n+d.height(),m;b>=n-10&&b<=d+10?(a(f.selector).addClass("elevatorHighlight"),m=f.selector):a(f.selector).hasClass("elevatorHighlight")&&m!==f.selector&&a(f.selector).removeClass("elevatorHighlight")}}},q=function(a){if(0<a.length){var c=a.offset().top-h-10;r(c,a)}},r=function(c,b){var f=a(l).scrollTop(),e=Math.abs(f-c)+0,d=e/2E3*1E3,n=0>f-c,m=!1,w=n?c-.2*e:c+.2*e;g=!0;a(".elevatorButton").removeClass("elevatorHighlight");a("html, body").animate({scrollTop:c},
{duration:500>d?500:d,step:function(a,g){if(b&&!m&&(n?a>w:a<w)){m=!0;var f=b.offset().top-h-10;c!==f&&(g.end=f)}},complete:function(){g=!1;v()}})},t=function(b,g,f){var e=a(b);e.length?(c.push({selector:g,element:b}),a(g).click(function(){e=a(b);q(e)})):a(f).addClass("aok-hidden")},w=function(){var b=[];a("#beautyRecommendations").length&&b.push("#beautyRecommendations");a("#sims_fbt").length&&b.push("#sims_fbt");a("#session-sims-feature, #fallbacksession-sims-feature").length&&b.push("#session-sims-feature, #fallbacksession-sims-feature");
a("#purchase-sims-feature").length&&b.push("#purchase-sims-feature");if(b.length)b.sort(function(b,c){return a(b).offset().top-a(c).offset().top}),b.forEach(function(a){c.push({selector:"#elevatorRelatedProductsSection",element:a})}),a("#elevatorRelatedProductsSection").click(function(){for(var c=l.pageYOffset,g=0,f=b.length,e=null;null===e&&g<f;){var d=a(b[g++]);0<d.length&&Math.floor(d.offset().top-h-10)>c&&(e=d)}null===e&&g===f&&(e=a(b[0]));q(e)});else{a("#elevatorRelatedProductsSection").addClass("aok-hidden");
for(var g=a(".elevatorDividerSection"),f=!0,e=g.length-1;f&&0<=e;){var d=a(g[e]);d.hasClass("aok-hidden")?e--:(d.addClass("aok-hidden"),f=!1)}}},G=function(){a("#elevatorViewBuyingOptionsButton .a-button-inner").click(function(){r(a("#a-page .a-container").offset().top-10,null)})},m;k.when("page-refresh:page").execute(function(a){m=a});var n=function(){if(m&&m.config){var b=!1,c;for(c in m.config)if(m.config[c].affectedFeatures&&(a(m.config[c].affectedFeatures).each(function(c,g){var e=a(g);"none"!==
e.css("display")&&"1"!==e.css("opacity")&&(b=!0)}),b))return!0}return!1},x=function(){if(n())setTimeout(function(){x()},200);else{b=a("#elevatorBar");d=a("#elevatorBarPlaceholder");e=a("#elevatorViewBuyingOptionsSection");f=b.position().top;h=b.height();c=[];var m=!1;g=!1;t("#productDescription, #product-description_feature_div, #product-description-iframe","#elevatorMoreAboutThisItemSection","#elevatorMoreAboutThisItemSection, #elevatorMoreAboutThisItemDivider");t("#detail-bullets, #prodDetails",
"#elevatorProductDetailsSection","#elevatorProductDetailsSection, #elevatorProductDetailsDivider");t("#quickPromoBucketContent","#elevatorSpecialOffersSection","#elevatorSpecialOffersSection, #elevatorSpecialOffersDivider");t("#cm_cr_dpwidget","#elevatorCustomerReviewsSection","#elevatorCustomerReviewsSection, #elevatorCustomerReviewsDivider");w();G();a(l).resize(function(){f=b.position().top});a(l).scroll(function(){m=!0});setInterval(function(){m&&(m=!1,y(),g||v())},100);y();v()}};return{init:x}});
k.when("A","a-popover","actionpanel-modified-popover","cf").register("sns-frequency-dropdown",function(a,b,d){var e=a.$;return{init:function(){e("#sns-frequency-button").length&&(new d("sns-frequency-dropdown-popover",e("#sns-frequency-button")),a.declarative("sns-frequency-update","click",function(a){var d=a.$target.parents("li");a=a.data.frequency;d.siblings().removeClass("sns-selected-frequency");d.addClass("sns-selected-frequency");e("#rcxOrdFreq").val(a);e("#sns-frequency-button-label").text(d.text());
b.get("sns-frequency-dropdown-popover").hide()}),a.declarative("sns-frequency-dropdown-popover-close","click",function(a){b.get("sns-frequency-dropdown-popover").hide()}))}}});k.when("jQuery","action-panel").register("mom-checkbox",function(a,b){return{init:function(){var d=a("#addToCart"),e=d.attr("action");a("#chkMom").change(function(){if(a("#chkMom").length){var f;a("#chkMom").is(":checked")?(d.attr("action","/gp/family/pipeline/view-signup/"),f="mom"):(d.attr("action",e),f="sns");b.setPanelState({mode:f})}});
a("#chkMom").length&&a("#chkMom").is(":checked")&&a("#chkMom").attr("checked",!1)}}});k.when("jQuery","A").register("twister-aui-page-state",function(a,b){var d="beautyRecommendations bRecDynamicStrings csxfsSecondaryPanelSettings ccxsmartShelfSecondaryPanelSettings accessoryInfo smartShelfVASInfo".split(" ");return{updatePageState:function(){var e=b.parseJSON;b.each(a('script[type="a-state"]'),function(f){f=a(f);if(!f.data("a-eval")){var h=f.attr("data-a-state");if(h&&(h=e(h),h.key&&-1!==a.inArray(h.key,
d))){var g=e(f.html());b.state.replace(h.key,g);f.data("a-eval",!0)}}})}}});k.when("A","skinToneSelector","scenesAjaxHandler","colorScenesSlider","colorScenesCarousel","ready").register("colorScenes",function(a,b,d,e,f){function h(){O=!0;E.addClass("aok-hidden");F.removeClass("aok-hidden");k.addClass("aok-hidden");T.initCarousel();l.CounterScenesController&&t(l.CounterScenesController.getCounterSelection());a.trigger("colorScenes:expandCounter");u&&u.count&&u.count("colorScenesShowScene",1)}function g(){F.addClass("aok-hidden");
k.removeClass("aok-hidden");E.removeClass("aok-hidden");O=!1;p(l).resize()}function c(){O?g():h();u&&u.count&&u.count("colorScenesClickCounterIngress",1)}function y(){var a=T.getCarouselWidth(),b=C.getSlideTrackWidth();X=a/b;Y=b/a}function v(a,b,c){y();C.moveSlider(-a*Y,b,c)}function q(a,b){y();U.hideWhenClickOutside();T.moveCarouselByX(-a*X,b,!1,!1)}function r(a,b){T.updateImagePosition(R[a],R[b])}function t(a){O&&T.selectCarouselItemAtIndex(a,!1);G(a-1)}function w(b){Z||(a.trigger("colorScenes:expandCounter"),
a.trigger("colorScenes:select",b),G(b+1))}function G(a){M&&a!==H&&(I.css("background-image",'url("'+V[A[a]]+'")').fadeTo(300,1),H=a)}function m(a,b,c){p.each(a,function(a,g){"missingSkinTones"!==a&&"placeHolderImageId"!==a&&(p("#carouselSceneImage_"+a).css("background-image",'url("'+g+'")').fadeTo(300,1),V[a]=g,b&&("function"===typeof B&&B("cf","colorScenesFetchImages",{wb:1}),I.css("background-image",'url("'+g+'")').fadeTo(300,1),p("#colorScenesIngressLeftImg").delay(300).animate({"margin-right":"25px"},
300,"linear")),c&&"function"===typeof J&&(J("ld","colorScenesFetchImages",{wb:1}),J("ld","colorScenesFeature",{wb:1})))})}function n(){K.click(function(a){h();u&&u.count&&u.count("colorScenesClickIngressButton",1)});W.click(function(a){g();u&&u.count&&u.count("colorScenesClickBackButton",1)});N.length&&N.click(c)}function x(c){if(c[L]){"function"===typeof B&&B("cf","colorScenesIsEnabled",{wb:1});E=p("#imageBlock_feature_div");K=p("#colorScenesIngressButton");I=p("#colorScenesIngressImages").children();
k=p("#colorScenesIngressContainer");F=p("#colorScenesStage");W=p("#colorScenesBackArrowImage");N=p("#counterColorScenesIngress");c=1;l.CounterScenesController&&(c=l.CounterScenesController.getCounterSelection());T=new f(c);a.on("scenesCarousel:select",w);1<A.length?(C=new e,a.on("scenesCarousel:sync",v),a.on("scenesSlider:sync",q)):p("#colorSceneSliderSection").addClass("aok-hidden");U=new b(S);a.on("skinToneSelector:select",r);"function"===typeof B&&B("bb","colorScenesFetchImages",{wb:1});var g=
H;c=g-7;var d=H+1,h=d+7,y=A.length;for(D.getSceneInfo(A[H],m,!0,!1);0<=c||h<y;)0<=c&&(g=A.slice(c,g).toString(),D.getSceneInfo(g,m,!1,!1),g=c,c-=7),h<y&&(d=A.slice(d,h).toString(),D.getSceneInfo(d,m,!1,!1),d=h,h+=7);0<g&&d<y?(g=A.slice(0,g).toString(),D.getSceneInfo(g,m,!1,!1),d=A.slice(d,y).toString(),D.getSceneInfo(d,m,!1,!0)):0<g?(g=A.slice(0,g).toString(),D.getSceneInfo(g,m,!1,!0)):d<y&&(d=A.slice(d,y).toString(),D.getSceneInfo(d,m,!1,!0));n();M=!0;k.removeClass("aok-hidden");K.removeClass("aok-hidden");
N.removeClass("aok-hidden");"function"===typeof J&&J("ld","colorScenesIsEnabled",{wb:1});"function"===typeof B&&B("cf","colorScenesFeature",{wb:1});u&&u.count&&u.count("colorScenesShowIngress",1)}}var p=a.$,u=l.ue,B=l.uet,J=l.uex,E,k,K,I,F,W,N,O,M=!1,D,L,H,A,V={},P,z,U,S,R,Z,Y,X,C,T;return{init:function(a){L=a.parentAsin;A=a.variationAsins;L&&A&&0<A.length&&(H=a.currentAsinIndex,P=a.isEnabledEndPoint,z=a.infoEndPoint,R=a.skinToneToPositionCssClass,S=a.defaultSkinTone,Z=a.isSingletonCase,"function"===
typeof B&&B("bb","colorScenesFeature",{wb:1}),D=new d(P,z),"function"===typeof B&&B("bb","colorScenesIsEnabled",{wb:1}),D.checkIsEnabled(L,x))},selectSceneItem:t}});k.when("A").execute(function(a){l.CounterScenesController=new function(){function b(a,b,e){if("string"===typeof b||"number"===typeof b)"string"===typeof b&&(b=parseInt(b,10)),e?d(a,b+1):d(a,b-1)}function d(a,b){h||"function"!==typeof a||(h=!0,"undefined"!==typeof b?a(b):a(),h=!1)}var e,f,h;this.registerCounter=function(a){"object"===typeof a&&
a?e=a:l.ueLogError&&l.ueLogError({message:"[Failed to register Counter Twister with CounterScenesController]"},{logLevel:"ERROR",attribution:"counter_scenes_controller_register_counter_error"})};this.registerColorScene=function(a){"object"===typeof a&&a?f=a:l.ueLogError&&l.ueLogError({message:"[Failed to register Color Scene with CounterScenesController]"},{logLevel:"ERROR",attribution:"counter_scenes_controller_register_scene_error"})};this.getCounterSelection=function(){return e?e.getCurrentSelectedIndex()+
1:1};f=e=null;h=!1;a.on("colorScenes:expandCounter",function(){e&&d(e.expandCounter)});a.on("colorScenes:select",function(a){e&&b(e.selectCounterVariationAtIndex,a,!1)});a.on("counter:select",function(a){f&&b(f.selectSceneItem,a,!0)})}});k.when("A").register("skinToneSelector",function(a){return function(b){function d(){v.addClass("aok-hidden");y.removeClass("aok-hidden");r=!1}function e(a){y.addClass("aok-hidden");v.removeClass("aok-hidden");g(l).click(h.hideWhenClickOutside);r=!0;c&&c.count&&c.count("colorScenesOpenSkinTone",
1);a.preventDefault();a.stopPropagation();return!1}function f(b){var e=b.target.id,f=q.attr("id");b=g(b.target);e!==f&&q.removeClass("selectedSkinTone");b.addClass("selectedSkinTone");a.trigger("skinToneSelector:select",e,f);q=b;d();c&&c.count&&c.count(t[e],1)}var h=this,g=a.$,c=l.ue,y,v,q,r=!1,t={skinTone_10:"colorScenesSelectSkinTone10",skinTone_20:"colorScenesSelectSkinTone20",skinTone_30:"colorScenesSelectSkinTone30",skinTone_40:"colorScenesSelectSkinTone40",skinTone_50:"colorScenesSelectSkinTone50"};
h.hideWhenClickOutside=function(){r&&(d(),g(l).unbind("click",h.hideWhenClickOutside),r=!1)};(function(b){y=g("#colorSceneSkinToneButton");v=g("#skinTonePanel");q=g("#"+b);q.addClass("selectedSkinTone");a.trigger("skinToneSelector:select",b,null);y.click(e);g(".skinToneColor").click(f)})(b)}});k.when("A").register("scenesAjaxHandler",function(a){return function(b,d){function e(a,b,e){if(!a||0===a.length)throw Error(b+" is null or empty for "+e);}var f,h;this.getSceneInfo=function(b,c,d,f){e(b,"asinList",
"getSceneInfo");var q=h+b;a.ajax(q,{method:"get",success:function(a,b,e){"function"===typeof c&&c(a,d,f)},error:function(){l.ueLogError&&l.ueLogError({message:"[Failed to load sprite images from"+q+" ]"},{logLevel:"ERROR",attribution:"color_scenes_throwing_the_error"})}})};this.checkIsEnabled=function(b,c){e(b,"parentAsin","checkIsEnabled");var d=f+b;a.ajax(d,{method:"get",success:function(a,b,d){"function"===typeof c&&c(a)},error:function(){l.ueLogError&&l.ueLogError({message:"[Failed to determined if colorscene is enabled for "+
b+" with url "+d+" ]"},{logLevel:"ERROR",attribution:"color_scenes_is_enabled_throwing_the_error"})}})};(function(a,b){e(a,"checkEnabledEndpoint","init");e(b,"loadImagesEndpoint","init");f=a;h=b})(b,d)}});k.when("A","a-carousel-framework","scenesMoveEventUtil","scenesFlickVelocity").register("colorScenesCarousel",function(a,b,d,e){return function(f){function h(){return z}function g(){M=K.first().width();D=K.first().outerWidth(!0)-M;N=K.first().position().left;O=K.last().position().left;L=N-u/2+D+
M/2;H=O-u/2+D+M/2;var a=Q.find(".selectedCarouselItem");V=0<a.length?a.width()-M-2*D:0;A=H-L}function c(a){P=!1;d.bind(v,y);U=d.getClientX(a);R.startFlickVelocityTracking();S=z;a.preventDefault();a.stopPropagation();return!1}function y(a){d.unbind(v,y);R.triggerFlickVelocityMove();w();a.preventDefault();a.stopPropagation();return!1}function v(a){var b=d.getClientX(a),c=b-U;U=b;m.moveCarouselByX(c,!0,!1,!1);P=!0;a.preventDefault();a.stopPropagation();return!1}function q(b){if(!P||5>=Math.abs(Math.abs(S-
z))){var c=b.data.index;m.selectCarouselItemAtIndex(b.data.index,!1);a.trigger("scenesCarousel:select",c);x&&x.count&&x.count("colorScenesClickSceneImage",1)}P=!1}function r(a){m.moveCarouselByX(a,!0,!1,!1)}function t(){return z>L&&z<H}function w(){Math.abs(S-z)&&x&&x.count&&x.count("colorScenesCarouselMove",Math.abs(S-z))}function G(){b.onInit("colorScenes",function(b){g();z=L;F=n(I[C-1]);F.addClass("selectedCarouselItem");F.siblings(".sceneImageNamePlate").addClass("selectedCarouselItem");m.selectCarouselItemAtIndex(C,
!1);a.on("a:carousel:colorScenes:repaint",function(a){m.selectCarouselItemAtIndex(C,!0)})})}var m=this,n=a.$,x=l.ue,p,u,k,J,E,Q,K,I,F,C,N,O,M,D,L,H,A,V,P,z,U,S,R;m.getCarouselWidth=function(){return A};m.moveCarouselByX=function(b,c,d,e){z-=b;g();z<L?z=L:z>H&&(z=H);d?E.gotoPixel(z,{animationDuration:0}):500<Math.abs(b)?E.gotoPixel(z,{animationDuration:400}):E.gotoPixel(z);c&&a.trigger("scenesCarousel:sync",b,!c,e)};m.selectCarouselItemAtIndex=function(a,b){g();var c=u/2-N-D-M/2+V,c=E.getItemOffset(a)-
c;m.moveCarouselByX(z-c,!0,b,!0);C=a;c=n(I[a-1]);F.attr("id")!==c.attr("id")&&(F&&(F.removeClass("selectedCarouselItem"),F.siblings(".sceneImageNamePlate").removeClass("selectedCarouselItem")),c.addClass("selectedCarouselItem"),c.siblings(".sceneImageNamePlate").addClass("selectedCarouselItem"),F=c)};m.updateImagePosition=function(a,b){I.removeClass(b).addClass(a)};m.resizeCarouselContainer=function(){k.width(p.parent().width());u=p.width()};m.initCarousel=function(){m.resizeCarouselContainer();b.initializeAll()};
(function(d){P=!1;R=new e(r,w,t,h);C=d;p=n("#leftCol");u=p.width();k=n("#colorScenesCarouselSection");J=n("#colorScenesCarouselContainer");Q=J.find(".a-carousel");K=Q.children();E=b.getCarouselByName("colorScenes");I=n(".carouselSceneImage");G();I.mousedown(c);"undefined"!==typeof l.ontouchstart&&I.bind("touchstart",c);d=I;for(var f=0;f<d.length;f++)n(d[f]).bind("click",{index:f+1},q),"undefined"!==typeof l.ontouchend&&n(d[f]).bind("touchend",{index:f+1},q);a.on.resize(m.resizeCarouselContainer);
a.on.orientationchange(m.resizeCarouselContainer)})(f)}});k.when("A","scenesMoveEventUtil","scenesFlickVelocity").register("colorScenesSlider",function(a,b,d){return function(){function e(a){b.bind(h,f);w=b.getClientX(a);B.startFlickVelocityTracking();m=k;a.preventDefault();a.stopPropagation();return!1}function f(a){b.unbind(h,f);B.triggerFlickVelocityMove();c();a.preventDefault();a.stopPropagation();return!1}function h(a){var c=b.getClientX(a),d=c-w;w=c;y.moveSlider(d,!0,!1);a.preventDefault();a.stopPropagation();
return!1}function g(a){if(r[0]===a.target){w=t.offset().left;var c=b.getClientX(a),d=c-w-p/2;w=c;y.moveSlider(d,!0,!0);v&&v.count&&v.count("colorScenesClickSlider",d);a.preventDefault();a.stopPropagation();return!1}}function c(){var a=Math.abs(m-k);a&&v&&v.count&&v.count("colorScenesSliderMove",a)}var y=this,v=l.ue,q=a.$,r,t,w,k,m,n,x,p,u,B;y.getSlideTrackWidth=function(){return u};y.moveSlider=function(b,c,d){if(0!==Math.abs(b)){var e=k+b;e>x&&(e=x);e<n&&(e=n);k=e;d?t.animate({left:e},200):t.css("left",
e);c&&a.trigger("scenesSlider:sync",b,!1)}};B=new d(function(a){y.moveSlider(-a,!0,!1)},c,function(){return k>n&&k<x},function(){return k});r=q("#colorSceneSliderBar");t=q("#colorSceneSlider");a.capabilities.touch&&(r.css("height","8px"),t.css("height","15px"));p=t.outerWidth();k=-p/2;t.css("left",k);n=-p/2;x=r.outerWidth()-p/2;u=x-n;t.mousedown(e);r.click(g);"undefined"!==typeof l.ontouchstart&&(t.bind("touchstart",e),r.bind("touchstart",g))}});k.when("A").register("scenesFlickVelocity",function(a){return function(b,
d,e,f){function h(a,b){if("function"!==typeof a)throw Error(b);}var g=this,c,l,k,q,r,t,w,G,m;g.startFlickVelocityTracking=function(){l=c=0;k=Date.now();q=r();clearInterval(t);t=setInterval(g.computeFlickVelocity,50)};g.computeFlickVelocity=function(){var a,b;a=Date.now();b=a-k;k=a;a=r()-q;q=r();b=1E3*a/(1+b);c=.8*b+.2*b};g.triggerFlickVelocityMove=function(){clearInterval(t);50<Math.abs(c)&&(l=.05*c,k=Date.now(),a.requestAnimationFrame(g.flickVelocityMove))};g.flickVelocityMove=function(){var b;l&&
(b=Date.now()-k,b=-l*Math.exp(-b/500),1<Math.abs(b)&&m()?(w(b),a.requestAnimationFrame(g.flickVelocityMove)):G())};(function(a,b,c,d){h(a,"moveRefFn is null or undefined for FlickVelocityController.");h(c,"checkLimitRefFn is null or undefined for FlickVelocityController.");h(d,"getFrameRefFn is null or undefined for FlickVelocityController.");w=a;G=b;m=c;r=d})(b,d,e,f)}});k.when("A").register("scenesMoveEventUtil",function(a){function b(a,b){d(l).unbind("mousemove",a).unbind("mouseup",b);"undefined"!==
typeof l.ontouchmove&&d(l).unbind("touchmove",a).unbind("touchend",b)}var d=a.$;return{bind:function(a,f){b(a,f);d(l).bind("mousemove",a).bind("mouseup",f);"undefined"!==typeof l.ontouchmove&&d(l).bind("touchmove",a).bind("touchend",f)},unbind:b,getClientX:function(a){return a.originalEvent&&a.originalEvent.targetTouches&&0<a.originalEvent.targetTouches.length?a.originalEvent.targetTouches[0].clientX:a.clientX}}});k.when("A","atf").register("smart-shelfT1",function(a){function b(b,c,d,e){a.$("#ASIN").val(b);
a.$("#offerListingID").val(c);a.$("#isAddOn").val(d);a.$("#quantity").val(e);p.submit();a.$("#ASIN").val(W);a.$("#offerListingID").val(N);a.$("#isAddOn").val(O);a.$("#quantity").val(u)}function d(a,b){F&&F.count&&F.count(a,b)}function e(){h();a.$("body").delegate("#add-to-cart-button","click",L);k.click(function(){a.$("#addToCart").prop("action","/gp/consumables/add-to-cart-ajax.html/ref=dp_csx_sw_atc_0");b(n.asin,n.offerId,n.addOn,1);k.addClass("aok-hidden");t.removeClass("aok-hidden");d("smartShelfAccessoriesAdded",
1)});v.click(function(){a.$("#addToCart").prop("action","/gp/consumables/add-to-cart-ajax.html/ref=dp_csx_sw_atc_1");b(n.asin1,n.offerId1,n.addOn1,1);v.addClass("aok-hidden");w.removeClass("aok-hidden");d("smartShelfAccessoriesAdded",1)});q.click(function(){a.$("#addToCart").prop("action","/gp/consumables/add-to-cart-ajax.html/ref=dp_csx_sw_atc_2");b(n.asin2,n.offerId2,n.addOn2,1);q.addClass("aok-hidden");G.removeClass("aok-hidden");d("smartShelfAccessoriesAdded",1)});r.click(function(){a.$("#addToCart").prop("action",
"/gp/consumables/add-to-cart-ajax.html/ref=dp_csx_sw_atc_w");b(n.warrantyAsin,n.warrantyOfferId,!1);r.addClass("aok-hidden");m.removeClass("aok-hidden")});a.$("body").undelegate("#add-to-cart-button","click.siatc");a.$("body").undelegate("#add-to-cart-button","click.vaswarrantysiatc")}function f(){E=[];x=a.state("smartShelfVASInfo");k=a.$(".csxsw_item_atc");v=a.$(".csxsw_item1_atc");q=a.$(".csxsw_item2_atc");r=a.$(".csxsw_warranty_atc");t=a.$(".csxsw_item_success");w=a.$(".csxsw_item1_success");G=
a.$(".csxsw_item2_success");m=a.$(".csxsw_warranty_success");p=a.$("#addToCart");Q=c=!1;var b=a.$("#"+J+"_secondaryPanelBackButton");n.showBackButton&&"false"!==n.showBackButton?b.click(function(){c=!1}):b.addClass("aok-hidden");g=a.$("#"+J+"_actionPanelSecondaryPanelDivider");g.addClass("smartShelfDivider");g.removeClass("actionPanelSecondaryPanelDivider");x!==C&&x.hideSmartShelf||(a.$("#add-to-cart-button"),e())}function h(){a.$("body").undelegate("#add-to-cart-button","click",A);a.$("body").undelegate("#add-to-cart-button",
"click",L)}var g,c,k,v,q,r,t,w,G,m,n,x,p,u,B,J,E,Q,K,I,F=l.ue,W=a.$("#ASIN").val(),N=a.$("#offerListingID").val(),O=a.$("#isAddOn").val(),M=function(){if(!c&&.5!==parseFloat(a.$("#"+J+"_secondaryPanel").closest(".feature").css("opacity"))){u=a.$("#quantity").val();Q||(d("smartShelfAccessoriesSeen",n.numberOfAccessories),d("smartShelfShowSecondaryPanel",1),Q=!0);var b=a.$("#addToCart").find(".abbListItem");b.length&&b.each(function(b){b=a.$(this).find("input[id^='mbb-offer']");var c=a.$(this).find("input[name^='asin']");
c.length&&this.removeChild(c[0]);b[0].checked&&c.length&&(a.$("#csxswWarrantyInclude").addClass("aok-hidden"),E.push([c[0].value,b[0].value]))});if(a.$("#addToCart").find(".atcFormServiceAsinData").length){var b=a.$("#addToCart").find(".atcFormServiceAsinData[name^='asin']"),e=a.$("#addToCart").find(".atcFormServiceAsinData[name^='offeringID']");b.length&&e.length&&E.push([b.val(),e.val()])}a.$("#freeSampleOfferListingID").val()&&""!==a.$("#freeSampleOfferListingID").val()&&E.push([a.$("#csxfsSelectedAsin").val(),
a.$("#freeSampleOfferListingID").val()]);B.animateIn(J);c=!0}},D=function(c){a.$("#addToCart").submit(function(c){a.$.ajax({type:a.$("#addToCart").attr("method"),url:a.$("#addToCart").attr("action"),data:a.$("#addToCart").serialize(),success:function(c){var d=a.$.parseJSON(c);d&&!d.error&&(E.length?(c=E.pop(),b(c[0],c[1],!1,1)):d.cartCount&&l.$Nav&&l.$Nav.when("api.setCartCount").run(function(a){a(d.cartCount)}))}});c.preventDefault()})},L=function(){if(a.$("#smartShelfDP_feature_div").children().length||
a.$("#smartShelfContent_feature_div").children().length){if("false"!==n.changeForm||a.$("#actionPanel").hasClass("ap-onetime")||a.$("#regularBuybox").hasClass("a-accordion-active")||a.$("#oneTimeBuyBox").hasClass("a-accordion-active")){var b="";p.length&&null!==p.prop("action")&&(b=p.prop("action"));var c="",d=b.search("ref=");p.length&&-1!==d&&(c=b.substr(d,b.length));b="/gp/consumables/add-to-cart-ajax.html/"+c;a.$("#addToCart").prop("action",b)}M();D()}},H=function(){I++;3>I&&A()},A=function(b){K||
(b.preventDefault(),a.$.ajax({timeout:5E3,url:"/gp/smartshelf/utility/trigger",success:function(b,c,d){var e;if(b&&b!==C&&""!==b.trim())try{var g=JSON.parse(b.trim());K="T1"===g.treatment||"C"===g.treatment;e="T1"===g.treatment}catch(h){H()}K?(e&&f(),a.$("#add-to-cart-button").click()):H()},error:function(a,b,c){H()}}))};return{init:function(b,c){h();K=!1;I=0;B=b;J=c;n=a.state("accessoryInfo");"true"===n.doTrigger?a.$("body").delegate("#add-to-cart-button","click",A):f()},undelegateATC:h}});
k.when("A","jQuery","pantryEnhancementMetrics").execute("dpv2-pantryEnhancement-metrics",function(a,b,d){d.registerCounters()});k.when("A","jQuery").register("pantryEnhancementMetrics",function(a,b){return{registerCounters:function(){var a=b("#pantry-store-message");a.length&&a.bind("click",function(a){if(a=l.ue){var b=a.count("pantryStoreMessageClick")||0;a.count("pantryStoreMessageClick",b+1)}})}}});k.when("A","jQuery","dualDimMetrics","atf").execute("dualdimInfo-metrics",function(a,
b,d){b(".dualDim-Swatch").length&&d.registerCounters()});k.when("A","jQuery","atf").register("dualDimMetrics",function(a,b){function d(a){var b=l.ue;if(b){var d=b.count(a)||0;b.count(a,d+1)}}return{registerCounters:function(){var a=b(".vodd-dim-wrapper").length,f=b(".twisterShelf_container").length,h=b(".twisterCounter_container").length;d("DualDimCount");1===a&&1===f+h?(d("DualDimOneVoddCount"),1===f?d("DualDimVoddShelfCount"):1===h&&d("DualDimVoddCounterCount")):2===a?d("DualDim2VoddCount"):2===
f?d("DualDimShelfCount"):2===h?d("DualDimCounterCount"):2===f+h&&d("DualDimShelfCounterCount")}}});k.when("A","action-panel","ready").register("aposWithBB",function(a,b){var d={mode:"onetime"},e={mode:"sns"},f={mode:"sampling"};return{init:function(){a.on("a:accordion:buybox-accordion:onetime-accordion:select",function(a){b.setPanelState(d)});a.on("a:accordion:buybox-accordion:sns-accordion:select",function(a){b.setPanelState(e)});a.on("a:accordion:buybox-accordion:sampling-accordion:select",function(a){b.setPanelState(f)})}}});
k.when("A","jQuery","ready","atf").execute(function(a,b){k.register("stickybuybox",function(){function d(){a.off("scroll",g);f();m=!1}function e(){var e=b("#csxfsSelectSampleButton"),f=b("input:radio[name=toggleBuyBox]");w.click(d);a.declarative("single-sample-widget-open-secondary-panel","click",d);e.click(d);f.change(function(){setTimeout(h,200)});b(l).resize(c);a.on("TwisterShelfExpanded",h);a.on("TwisterShelfCollapsed",h);a.on("TwisterCounterExpanded",h);a.on("TwisterCounterCollapsed",h);a.on.scroll(g)}
function f(){x.removeClass("stickybuybox");p.removeClass("stickybuybox");u.removeClass("stickybuybox")}function h(){f();v=t.offset();k=w.offset();q=G.offset();g()}function g(){var a=b(l).scrollTop(),c=b(l).scrollLeft(),d=r+a-38,e=n.offset().left,a=k?d-k.top:0,f=v?d-v.top:0,d=q?d-q.top:0;m&&(c=e-c,v&&0>f?(x.addClass("stickybuybox"),x.css({left:c+"px"})):(x.removeClass("stickybuybox"),k&&!v&&0>a?(p.addClass("stickybuybox"),p.css({left:c+"px"})):(p.removeClass("stickybuybox"),q&&0>d?(u.addClass("stickybuybox"),
u.css({left:c+"px"})):u.removeClass("stickybuybox"))))}function c(){r=b(l).height();g()}var k,v,q,r,t,w,G,m=!0,n=b("#actionPanel"),x,p,u;return{init:function(){t=b(".a-button-oneclick");w=b("#submit\\.add-to-cart").not(".a-button-preorder");G=b("#rcx-subscribe-submit-button");x=t.parent();p=w.parent();u=G.parent();r=b(l).height();h();e()}}})});k.when("A","jQuery","stickybuybox").register("stickybuybox-trigger",function(a,b,d){return{init:function(){if(b(".dualDim-Swatch").length)d.init();else{var e,
f=0,h=b(l).height(),g=b(".a-button-oneclick"),c=b("#submit\\.add-to-cart").not(".a-button-preorder"),k=b("#rcx-subscribe-submit-button"),v=b("input:radio[name=toggleBuyBox]"),q=function(){f++;3>f&&r()},r=function(){e||a.$.ajax({timeout:5E3,url:"/gp/stickyBuyBox/utility/trigger",success:function(a,b,c){var f;if(a&&a!==C&&""!==a.trim())try{var g=JSON.parse(a.trim());e="T1"===g.treatment||"C"===g.treatment;f="T1"===g.treatment}catch(h){q()}e?f&&d.init():q()},error:function(a,b,c){q()}})},t=function(){var a=
g.offset(),b=c.offset(),d=k.offset(),e=h-38,f=b?e-b.top:0,l=a?e-a.top:0,e=d?e-d.top:0;return a&&0>l||b&&0>f||d&&0>e?!0:!1};(t()||b("#twisterContainer .expanderButton")&&b("#twisterContainer .expanderButton").length)&&r();(function(){v.change(function(){setTimeout(function(){t()&&!e&&r()},200)})})()}}}})});
/* ******** */
(function(c){var f=window.AmazonUIPageJS||window.P,t=f._namespace||f.attributeErrors,a=t?t("FreshDetailPageCommonAssets"):f;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,f,t){c.when("A","jQuery","a-modal","afx-dp-uatc-proxy","afx-update-cart-count","a-dropdown","fresh-dp-double-click","afx-dp-csm-metrics-utils","fresh-show-atc-changeover","fresh-dp-quantity","afx-utils","ready").register("fresh-atc-handler",function(a,b,f,e,q,d,k,g,u,r,l){var m;c.when("EWC").execute(function(a){m=
a});c.when("nav.getFlyout").execute(function(a){a("ewc")});var x={"itemPrice:priceUnavailable:1":"PRICE_UNAVAILABLE","itemDeleted:itemCountOverflow:6":"QUANTITY_OVERFLOW"};return{addToFreshCart:function(d){function h(a,g,b,c){A(a);d.error(a,g,b,c)}function A(d,k){var e=k||{},h=d.data.sessionID;e.title=w(d.data.title);e.asin=d.data.asin;e.offerListingID=d.data.offerListingID;e.sessionID=h;switch(e.reasonCode?e.reasonCode:t){case v.itemNotAvailable:g.increment(n.freshUATCItemNotAvailableErrorCountMetric);
break;case v.itemPartiallyAvailable:g.increment(n.freshUATCItemPartiallyAvailableErrorCountMetric);break;case v.itemPartiallyAvailableForReservation:g.increment(n.freshUATCItemPartiallyAvailableForReservationErrorCountMetric);break;case v.itemNotAvailableForReservation:g.increment(n.freshUATCItemNotAvailableForReservationErrorCountMetric);break;case v.itemPriceUnavailable:g.increment(n.freshUATCItemPriceUnavailableErrorCountMetric);break;case v.itemCountOverflow:g.increment(n.freshUATCItemCountOverflowErrorCountMetric);
break;default:g.increment(n.freshUATCEmptyItemStatusCodeErrorCountMetric),c.log("fresh-atc-handler: No error status code.","ERROR")}e=b.param(e);f.create(d.$currentTarget,{name:"fresh-add-to-cart-modal",sessionID:h,url:"/afx/cart/reservation_conflict?"+e}).show();a.on("a:popover:afterHide:fresh-add-to-cart-modal",function(a){D(h);f.remove(a.popover)})}function w(a){var g={"&amp;":"&"},b;for(b in g)g.hasOwnProperty(b)&&(a=a.replace(b,g[b]));return a}function F(a){return a.filter(function(a){return a.statusKey in
x})}function B(a,g,b){b+=" returned by UATC is not an array";c.log(b,"Error",g);h(a,"","",b)}function y(d,k,f){f||(f=function(){});try{var q=d.data.asin;if(q)if(d.data.title){var C=d.data.offerListingID;if(C){var l=d.data.sessionID;if(l){var u=r.val();u||(c.log('fresh-atc-handler: "quantity" action parameter is missing.',"ERROR"),u=1);g.setWidgetClickTimestamp(n.freshUATCTCallScope);e({asin:q,offerListingID:C,sessionID:l,quantity:u,reftag:"afx-dp-addtocart",success:function(e){try{g.sendWidgetMetrics(n.freshUATCTCallScope);
var q;if(e&&e.isOK){var C=e.extraErrorInfos;if(C&&C.constructor===Array&&0<C.length)q=!0;else{var r=e.statusList,w;if(r&&r.constructor===Array&&0<r.length){var p=F(r);w=p&&0<p.length}else w=!1;q=w?!0:!1}}else q=!0;if(q)if(g.increment(n.freshUATCInvalidErrorResponseCountMetric),e)if(e.isOK){var z=e.extraErrorInfos,m=e.statusList;if(z&&z.constructor!==Array)B(d,z,"extraErrorInfos");else if(0<z.length){if(z&&!(0>=z.length)){var v=z[0];if("ADDRESS_NOT_SELECTED"===v.statusCode){g.increment(n.freshUATCAddressNotSelectedErrorCountMetric);
c.log("fresh-atc-handler: Address is not selected.","INFO");var t=b.param({asin:d.data.asin,offerListingID:d.data.offerListingID,quantity:1,redirectURL:document.location.href,ref:"afx_atfc_noaddress"});document.location.href="/afx/nc/chooseaddress?"+t}else A(d,{reasonCode:v.itemStatusCode,quantityAdded:v.availableQuantity,quantityRequested:v.requestedQuantity})}}else if(m&&m.constructor!==Array)B(d,m,"statusList");else if(0<m.length&&m&&!(0>=m.length)){var y=F(m);y&&0<y.length&&A(d,{reasonCode:x[y[0].statusKey]})}}else g.increment(n.freshUATCFailureCountMetric),
h(d,"","","isOK returned by UATC is false");else g.increment(n.freshUATCFailureCountMetric),h(d,"","","No response from UATC");else g.increment(n.freshUATCSuccessCountMetric),k(e,l,u)}catch(D){g.increment(n.freshAddToCartExceptionCountMetric),c.log("fresh-atc-handler exception: "+D,"ERROR")}finally{a.delay(f,E.reEnableDelay)}},error:function(b,e,k){try{g.sendWidgetMetrics(n.freshUATCTCallScope),g.increment(n.freshUATCFailureCountMetric),h(d,b,e,k)}catch(q){g.increment(n.freshAddToCartExceptionCountMetric),
c.log("fresh-atc-handler exception: "+q,"ERROR")}finally{a.delay(f,E.reEnableDelay)}}})}else c.log('fresh-atc-handler: Required "sessionID" action parameter is missing.',"ERROR"),g.increment(n.freshAddToCartMissingParameterCountMetric),h(d)}else c.log('fresh-atc-handler: Required "offerListingID" action parameter is missing.',"ERROR"),g.increment(n.freshAddToCartMissingParameterCountMetric),h(d)}else c.log('fresh-atc-handler: Required "title" action parameter is missing.',"ERROR"),g.increment(n.freshAddToCartMissingParameterCountMetric),
h(d);else c.log('fresh-atc-handler: Required "asin" action parameter is missing.',"ERROR"),g.increment(n.freshAddToCartMissingParameterCountMetric),h(d)}catch(w){g.increment(n.freshAddToCartExceptionCountMetric),c.log("fresh-atc-handler exception: "+w,"ERROR"),a.delay(f,E.reEnableDelay)}}function D(a){m&&"function"===typeof m.refresh?m.refresh():q(a)}var E={reEnableDelay:1E3},n={freshAddToCartClickCountMetric:"freshAddToCartClickCount",freshAddToCartMissingParameterCountMetric:"freshAddToCartMissingParameterCount",
freshAddToCartExceptionCountMetric:"freshAddToCartExceptionCount",freshUATCTCallScope:"freshUATCCall",freshUATCSuccessCountMetric:"freshUATCSuccessCount",freshUATCFailureCountMetric:"freshUATCFailureCount",freshUATCInvalidErrorResponseCountMetric:"freshUATCInvalidErrorResponseCount",freshUATCAddressNotSelectedErrorCountMetric:"freshUATCAddressNotSelectedErrorCount",freshUATCItemPartiallyAvailableErrorCountMetric:"freshUATCItemPartiallyAvailableErrorCount",freshUATCItemPartiallyAvailableForReservationErrorCountMetric:"freshUATCItemPartiallyAvailableForReservationErrorCount",
freshUATCItemNotAvailableErrorCountMetric:"freshUATCItemNotAvailableErrorCount",freshUATCItemNotAvailableForReservationErrorCountMetric:"freshUATCItemNotAvailableForReservationErrorCount",freshUATCEmptyItemStatusCodeErrorCountMetric:"freshUATCEmptyItemStatusCodeErrorCount",freshUATCItemPriceUnavailableErrorCountMetric:"freshUATCItemPriceUnavailableErrorCount",freshUATCItemCountOverflowErrorCountMetric:"freshUATCItemCountOverflowErrorCount"},v={itemNotAvailable:"ITEM_NOT_AVAILABLE",itemPartiallyAvailable:"ITEM_PARTIALLY_AVAILABLE",
itemPartiallyAvailableForReservation:"ITEM_PARTIALLY_AVAILABLE_FOR_RESERVATION",itemNotAvailableForReservation:"ITEM_NOT_AVAILABLE_FOR_RESERVATION",itemPriceUnavailable:"PRICE_UNAVAILABLE",itemCountOverflow:"QUANTITY_OVERFLOW"},z=function(a,g,b){u(b);D(g);d.success(a)};a.declarative("fresh-atc-handler","click",k(function(a,d){r.valid()?(l.vibrate(),g.increment(n.freshAddToCartClickCountMetric),y(a,z,d)):d()}))}}});c.when("A","jQuery","a-button","fresh-show-atl-changeover","ready").register("FreshAddToShoppingList",
function(a,b,f,e){function q(a){b("#"+a.asin+"-afx-atl-dropdown").change(function(d){a.$alreadyInMessage.addClass("aok-hidden");a.$errorMessage.addClass("aok-hidden")})}function d(d){var b=(a.state("baseWidgetState")||{}).csrfToken;a.post("/afx/lists/json/shoppinglists/additem",{cache:!1,timeout:5E3,params:{asin:d.asin,listID:d.shoppingListID,token:b},success:function(a){d.addButtonInstance.enable();a.successful?(d.$modalParent.find("#"+d.cancelButtonID).click(),e()):1===a.errorCodes[0]?d.$alreadyInMessage.removeClass("aok-hidden"):
k(d)},error:function(){d.addButtonInstance.enable();k(d)}})}function k(a){a.$errorMessage.removeClass("aok-hidden");c.log("Failed to add asin "+a.asin+" to shopping list "+a.shoppingListID,"ERROR")}a.declarative("add-to-list","click",function(a){var b=a.$currentTarget.closest(".a-popover-wrapper");if(1>b.length)c.log("Could not find the element that parents this modal (it should contain class a-popover wrapper)","FATAL");else{var e=b.find("#"+a.data.addButtonID),k;1>e.length?(c.log("Could not find the button that will add the item. This is required for preventing double clicks",
"ERROR"),k=!1):a.data.asin?k=!0:(c.log("ASIN was blank. Please supply the ASIN you wish to add to the list.","ERROR"),k=!1);k&&(e=f(e),e.isEnabled()&&(e.disable(),a={asin:a.data.asin,addButtonInstance:e,$modalParent:b,cancelButtonID:a.data.cancelButtonID,shoppingListID:b.find("#"+a.data.asin+"-afx-atl-dropdown").val(),$alreadyInMessage:b.find("#afx-atl-already-in"),$errorMessage:b.find("#afx-atl-service-error")},a.$alreadyInMessage.addClass("aok-hidden"),a.$errorMessage.addClass("aok-hidden"),q(a),
d(a)))}})});c.when("A","jQuery","a-dropdown","fresh-dp-constants","fresh-add-to-cart","a-button").register("fresh-dp-quantity",function(a,b,c,e,f,d){return function(){var k,g,u,r,l,m,x,p,h,A,w,t,B,y=function(){if(!k){g=b(e.addToCartButtonSelector);l=c.getSelect(e.dropdownID);if(u=!!l){r=b(e.dropdownDivSelector);var a=l.getOptions().size();a&&(x=a-1)}p=b(e.freeTextDivSelector);if(m=0!==p.length)h=b(e.freeTextInputSelector),A=b(e.freeTextErrorDivsSelector),w=b(e.freeTextErrorMsgMin),t=b(e.freeTextErrorMsgMax)}},
D=function(){a.on(e.dropdownSelectedID,function(a){b(a.nativeItemNode).index()===x?(h.attr("validValue",B),h.val(B),p.show(),A.hide(),r.hide(),h.focus().select(),l.val("1")):B=l.val()});var d=function(){var a=h.attr("validValue");a&&(l.val(a),l.val()===a?(B=a,r.show(),p.hide()):(f.updateQuantity("freshAddToCartButton",a),g.focus()))},c=function(){var a=E(h.val());h.attr("validValue",a?a:"")};h.change(c);h.keyup(c);h.keypress(function(a){if(0===a.which||8===a.which||a.ctrlKey||a.altKey||e.rxNumbersOnly.test(String.fromCharCode(a.which)))return!0;
13===a.which&&(d(),g.click());return!1});h.blur(d)},E=function(){var a;a:{a=h.val();if(e.rxNumbersOnly.test(a)&&(a=parseInt(a,10),!isNaN(a)))break a;a=!1}A.hide();var b=d(e.addToCartButtonSelector);if(!1===a||0>=a)w.show(),b.isEnabled()&&b.disable();else if(1E3<=a)t.show();else return b.isEnabled()||b.enable(),String(a);return!1};return{init:function(){k=!1;y();k=!0;if(m){p.hide().removeClass(e.auiHiddenClass);A.hide().removeClass(e.auiHiddenClass);var a=l.getOption(x),d=a.info()[0].text;a.update({value:"0",
text:b.trim(d)+"+"});B=l.val();D()}},valid:function(){y();return m&&p.is(":visible")?!1!==E():!0},val:function(){y();return m&&p.is(":visible")?h.attr("validValue"):u?l.val():1}}}()});c.register("fresh-dp-constants",function(){return{actionPanelStateData:"apstate",actionPanelFreshState:"fresh",mobileNavSearchFormSelector:'#nav-search-form, form[role="search"], #searchForm',rxNumbersOnly:/^\d+$/,auiHiddenClass:"aok-hidden",addToCartButtonSelector:"#freshAddToCartButton",dropdownID:"freshQuantity",
dropdownSelectedID:"a:dropdown:selected:freshQuantity",dropdownDivSelector:"#quantitySelect",freeTextDivSelector:"#quantityText",freeTextInputSelector:"#quantityTextInput",freeTextErrorDivsSelector:"#quantityTextErrors > div",freeTextErrorMsgMin:"#quantityFreeTextErrorMsgMin",freeTextErrorMsgMax:"#quantityFreeTextErrorMsgMax"}});c.when("A","ready").register("fresh-dp-prevent-atc-default",function(a){return{init:function(){a.$("#addToFreshCart").submit(function(a){a.preventDefault()})}}});
c.when("A").register("afx-dp-uatc-proxy",function(a){return function(b){var c="/gp/add-to-cart/json";b.reftag!==t&&(c+="/ref="+b.reftag);a.post(c,{timeout:5E3,params:{"session-id":b.sessionID,clientName:"SharedFreshHandler",nextPage:"cartitems",ASIN:b.asin,offerListingID:b.offerListingID,useUber:"1",source:"Fresh",ruleSet:"FreshGet",quantity:b.quantity},success:b.success,error:b.error})}});c.when("A").register("afx-dp-get-cart-count",function(a){return function(b){a.get("/gp/api/cart/1.0/get-cart-count.json",
{timeout:5E3,params:{sessionID:b.sessionID,clientName:"sharedFreshHandler"},success:b.success,error:b.error})}});c.when("A").register("afx-dp-get-cart-item-count",function(a){return function(a,c){if(c&&c.items){var e;for(e=0;e<c.items.length;++e){var f=c.items[e];if(f&&f.ASIN===a)return f.quantity}}}});c.register("afx-dp-csm-metrics-utils",function(){return{setWidgetClickTimestamp:function(a){f.ue&&f.uet&&a&&f.uet("bb",a,{wb:1})},setWidgetTimestamp:function(a,b){f.ue&&f.uet&&
a&&b&&f.uet(a,b,{wb:1})},increment:function(a){f.ue&&f.ue.count&&a&&f.ue.count(a,(f.ue.count(a)||0)+1)},setCount:function(a,b){f.ue&&f.ue.count&&a&&b&&f.ue.count(a,b)},sendWidgetMetrics:function(a){f.ue&&f.uex&&a&&f.uex("ld",a,{wb:1})}}});c.when("A","jQuery","a-button","ready").register("fresh-dp-double-click",function(a,b,c){return function(b){var c={disabled:"true"},d={};return function(k){var g=a.state("fresh-atc-status");g&&g.disabled||(g&&a.state("fresh-atc-status",c),b(k,function(){(g=
a.state("fresh-atc-status"))&&a.state.replace("fresh-atc-status",d)}))}}});c.register("afx-utils",function(){return{isFunction:function(a){return"function"===typeof a},isDefined:function(a){return"undefined"!==typeof a},vibrate:function(){return f.amazon&&f.amazon.cordova&&f.amazon.cordova.notification&&f.amazon.cordova.notification.vibrate&&f.amazon.cordova.notification.vibrate(50)}}})});
/* ******** */
(function(f){var e=window.AmazonUIPageJS||window.P,h=e._namespace||e.attributeErrors,c=h?h("FreshExperienceAddToCartAssets"):e;c.guardFatal?c.guardFatal(f)(c,window):c.execute(function(){f(c,window)})})(function(f,e,h){f.when("A","jQuery").register("afx-add-all-helper",function(c,d){return{updateQuantityForAsin:function(a,b,c){a&&b&&!isNaN(c)&&d("#"+a).closest("form").find("#afx-add-all-"+b+"-quantity").attr("value",c)}}});f.when("A","jQuery","a-button").register("fx-atfc-button-utils",
function(c,d,a){var b=!1;return{hideButtonAndRenderSpinner:function(a){var c=a.$currentTarget.find(".a-button");c&&c.length&&(b=!0,a="atfc-spinner-"+a.data.asin,c.wrap('<div id="'+a+'" class="atfc-spinner"></div>'),d("#"+a).css({width:c.outerWidth()+"px"}),d("#"+a).css({height:c.outerHeight()+"px"}),c.css("visibility","hidden"))},showButtonAndRemoveSpinner:function(a){var c=a.$currentTarget.find(".a-button");a=d("#atfc-spinner-"+a.data.asin);c&&c.length&&a&&a.length&&(b=!1,c.css("visibility","visible"),
c.unwrap())},shouldDisableButtonClicks:function(){return b}}});f.when("fresh-shared-add-to-cart-v2","ready").register("fresh-add-to-cart",function(c){function d(a){c.attachCallbacks(a)}c.initialize("desktop");return{addToFreshCart:function(a){d(a)},attachCallbacks:d,updateAddAllQuantityForAsin:c.updateAddAllQuantityForAsin,updateQuantity:c.updateQuantity}});f.when("A","jQuery").register("afx-atfc-v2-proxy",function(c,d){return{addToFreshCart:function(a){var b="/fpx/addtofreshcart";
a.reftag!==h&&(b+="/ref="+a.reftag+"/");d.ajax(b,{type:"POST",contentType:"application/json",data:JSON.stringify(a.data)}).done(a.success).fail(a.error)},showGenericErrorModal:function(a){c.post("/fpx/atfcGenericErrorModal/",{timeout:5E3,success:a.success,error:a.error})}}});f.when("A","jQuery").register("fx-atfo-proxy",function(c,d){return{addToFreshOrder:function(a){var b="/fom/add-to-fresh-order";a.reftag!==h&&(b+="/ref="+a.reftag+"/");c.post(b,{success:a.success,error:a.error,params:JSON.stringify(a.data),
paramsFormat:"json",contentType:"application/json"})}}});f.when("A","jQuery").register("afx-atfc-cart-conflicts-proxy",function(c,d){return{getConflictSummary:function(a){c.post("/afx/cartconflicts/getconflictsummary",{timeout:5E3,success:a.success,error:a.error,params:{oldRegionId:a.data.oldRegionId,oldAddressId:a.data.oldAddressId,newRegionId:a.data.newRegionId,newAddressId:a.data.newAddressId,client:"atfc",ref:a.data.reftag}})},resolve:function(a){c.post("/afx/cartconflicts/resolve",
{timeout:5E3,success:a.success,error:a.error,params:{oldRegionId:a.data.oldRegionId,oldAddressId:a.data.oldAddressId,newRegionId:a.data.newRegionId,newAddressId:a.data.newAddressId,client:"atfc",ref:a.data.reftag}})},substitute:function(a){a="/afx/cartconflicts/resolve/substitute?"+d.param({oldRegionId:a.data.oldRegionId,oldAddressId:a.data.oldAddressId,newRegionId:a.data.newRegionId,newAddressId:a.data.newAddressId,ref:a.data.reftag,client:"atfc",sourceUrl:e.location.pathname+e.location.search});
e.location.href=a}}});f.when("A").register("afx-get-cart-count",function(c){return function(d){c.post("/gp/api/cart/1.0/get-cart-count.json",{timeout:5E3,params:{sessionID:d.sessionID,clientName:"SharedFreshHandler"},success:d.success,error:d.error})}});f.register("afx-callbacks-helper",function(c){function d(b){var c=b in a;!c&&f.log("Unable to retrieve callback for "+b,"Error");return c}var a={};return{addCallbacks:function(b){a[b.clientID||"default"]=b},success:function(b,
c,e){b=b in a?b:"default";d(b)&&a[b].success&&a[b].success(c,e)},error:function(b,c,e,f){b=b in a?b:"default";d(b)&&a[b].error&&a[b].error(c,e,f)}}});f.register("afx-csm-metrics-utils",function(){var c={},d=function(a,b){e.ue&&e.ue.count&&a&&b&&e.ue.count(a,b)};return{startWidgetTimer:function(a){c[a]=Date.now()},endWidgetTimer:function(a,b){var e=Date.now()-c[a];d(b,e)},setWidgetClickTimestamp:function(a){e.ue&&e.uet&&a&&e.uet("tc",a,{wb:1})},setWidgetTimestamp:function(a,b){e.ue&&e.uet&&
a&&b&&e.uet(a,b,{wb:1})},increment:function(a){e.ue&&e.ue.count&&a&&e.ue.count(a,(e.ue.count(a)||0)+1)},setCount:d,sendWidgetMetrics:function(a){e.ue&&e.uex&&a&&e.uex("ld",a,{wb:1})}}});f.when("A","jQuery","a-modal","afx-atfc-v2-proxy","afx-csm-metrics-utils","afx-metrics-helper","afx-quantity-helper","fresh-atfc-ewc-helper","ready").register("fresh-atfc-error-modal-utils",function(c,d,a,b,e,k,g,p){function t(b,d,e){d||h(b);b.data.quantity&&(g.updateQuantity("fresh-clear-slot-button",
b.data.quantity),g.updateQuantity("alcohol-warning-fresh-add-to-cart-button",b.data.quantity));d={name:"fresh-add-to-cart-modal",header:d.header,inlineContent:d.errorMessage,footer:d.footer};"desktop"===e&&(d.width=325);a.create(b.$currentTarget,d).show();c.on("a:popover:afterHide:".concat("fresh-add-to-cart-modal"),function(c){p.refreshCart(b.data.sessionID);a.remove(c.popover)})}function h(a,c){b.showGenericErrorModal({success:function(b,e,f){b&&(b=d.parseJSON(f.http.response),y(a,b,c))},error:function(){f.log("Failed to get the generic error modal",
"Error");t(a,{header:"Item was not added to the cart",errorMessage:"We're sorry, there was an error and <b>this item was not added to your cart.</b> Please try again.",footer:'<span class="a-declarative" data-action="a-popover-close"data-a-popover-close="{}">\n<span class="a-button primary-fresh-btn"><span class="a-button-inner"><input class="a-button-input"type="submit"><span class="a-button-text" aria-hidden="true">OK\n    </span></span></span>\n</span>'},c)}})}function y(a,b,c){var d=b.errorModalHtml,
f=k.getMetricsForDevice(c);b.clientResponseModel&&b.clientResponseModel.uberCartStatus&&b.clientResponseModel.uberCartStatus.errorStatusCode in f&&e.increment(f[b.clientResponseModel.uberCartStatus.errorStatusCode]);t(a,d,c)}return{removeModal:function(){var b=a.get("fresh-add-to-cart-modal");b&&a.remove(b)},showGenericErrorModal:h,parseResponseAndShowErrorModal:y}});f.when("A","jQuery","afx-atfc-v2-proxy","afx-get-cart-count","ready").register("fresh-atfc-ewc-helper",function(c,d,a,
b){function e(a){b({sessionID:a,success:function(a){a&&a.isOK&&a.total&&k(a.total.numActiveItem)},error:function(){f.log("Failed to get cart count","Error",a)}})}function k(a){f.when("nav.setCartCount").execute(function(b){b(a)});f.when("mash").execute(function(b){b.cart&&"function"===typeof b.cart.didUpdate&&b.cart.didUpdate({newCartQuantity:a})})}var g;f.when("EWC").execute("add-to-cart-refresh",function(a){g=a});f.when("nav.getFlyout").execute(function(a){a("ewc")});return{refreshCart:function(a){g!==
h&&"function"===typeof g.refresh?g.refresh():e(a)}}});f.register("afx-metrics-helper",function(){var c={ATFC_COUNT:"afxAddToFreshCartCount",ATFC_SUCCESSFUL_ADD_COUNT:"afxAddToFreshCartSuccessfulAddCount",ATFC_ERROR_MODAL_COUNT:"afxAddToFreshCartErrorModalCount",ATFC_UNEXPECTED_ERROR_COUNT:"afxAddToFreshCartUnexpectedErrorCount",ATFC_LATENCY_SCOPE:"afxAddToFreshCartLatencyScope",ATFC_ERROR_MODAL_LATENCY_SCOPE:"afxAddToFreshCartErrorModalLatencyScope",ATFC_CTCF:"afxAddToFreshCartCTCF",
CLEAR_SLOT_ATFC_CTCF:"afxClearSlotAndAddToFreshCartCTFC",CART_SERVICE_RESPONSE_FALSE:"afxCartServiceResponseIsNotOKErrorCount",ITEM_NOT_AVAILABLE:"afxItemNotAvailableErrorModalCount",ITEM_PARTIALLY_AVAILABLE:"afxItemPartiallyAvailableErrorModalCount",ITEM_PARTIALLY_AVAILABLE_FOR_RESERVATION:"afxItemPartiallyAvailableErrorModalCount",ADDRESS_NOT_SELECTED:"afxAddressNotSelectedErrorCount",INPUT_INVALID:"afxGeneralErrorModalCount",ITEM_NOT_AVAILABLE_FOR_RESERVATION:"afxItemNotAvailableForReservationErrorModalCount",
INTERNAL_SERVER_ERROR:"afxGeneralErrorModalCount",PRICE_UNAVAILABLE:"afxItemNotAvailableErrorModalCount",QUANTITY_OVERFLOW:"afxUniqueItemQuantityOverflowErrorModalCount"};return{getMetricsForDevice:function(d){var a={};Object.keys(c).forEach(function(b){a[b]=c[b]+":"+d});return a}}});f.when("A").register("afx-quantity-helper",function(c){var d={};return{updateQuantity:function(a,b){"undefined"!==typeof a&&null!==a&&!isNaN(b)&&0<b&&(d[a]=b||1)},getQuantity:function(a){a=a.closest(".a-button");
return 0<a.length?d[a.attr("id")]||1:1}}});f.when("afx-atfc-cart-conflicts-proxy").register("afx-atfc-cart-conflicts-executor",function(c){return{execute:function(d){c.getConflictSummary({data:d.data,success:function(a,b,e){!0===a.isSuccess?!0===a.hasConflicts?c.substitute({data:d.data}):c.resolve({data:d.data,success:function(){location.reload()},error:d.error}):d.error(e,b,"Failed to call getconflictsummary")},error:d.error})}}});f.when("A","jQuery","afx-atfc-v2-proxy",
"fx-atfo-proxy","afx-get-cart-count","fx-atfc-button-utils","afx-csm-metrics-utils","afx-metrics-helper","afx-quantity-helper","afx-callbacks-helper","afx-atfc-cart-conflicts-executor","fresh-atfc-error-modal-utils","fresh-atfc-ewc-helper","afx-add-all-helper","ready").register("fresh-shared-add-to-cart-v2",function(c,d,a,b,h,k,g,p,t,n,y,u,v,m){return{updateQuantity:t.updateQuantity,attachCallbacks:n.addCallbacks,updateAddAllQuantityForAsin:m.updateQuantityForAsin,initialize:function(h){function m(b,
e,f,q){b.data.quantity=t.getQuantity(b.$target);a.addToFreshCart({data:b.data,reftag:b.data.reftag,success:function(a,d,h){200===h.status&&(g.increment(l.ATFC_SUCCESSFUL_ADD_COUNT),d=l.ATFC_CTCF+":lineItemBucket:"+w(a),g.endWidgetTimer(e,d),v.refreshCart(b.data.sessionID),n.success(b.data.clientID,b,a.clientResponseModel),c.trigger("fresh-atfc:success"));u.removeModal();k.showButtonAndRemoveSpinner(b);f&&f()},error:function(a,c,f){var m=l.ATFC_CTCF,r=a.responseText,p;u.removeModal();r&&(p=JSON.parse(r),
m=l.ATFC_CTCF+":lineItemBucket:"+w(p.clientResponseModel));300===a.status?(g.increment(l.ATFC_ERROR_MODAL_COUNT),a={asin:b.data.asin,offerListingID:b.data.offerListingID,quantity:t.getQuantity(b.$target),redirectURL:document.location.href,ref:"afx_atfc_noaddress"},g.increment(l.ADDRESS_NOT_SELECTED),a=d.param(a),document.location.href="/afx/nc/chooseaddress?"+a):400===a.status?(g.increment(l.ATFC_ERROR_MODAL_COUNT),u.parseResponseAndShowErrorModal(b,p,h)):(g.increment(l.ATFC_UNEXPECTED_ERROR_COUNT),
u.showGenericErrorModal(b,h),n.error(b.data.clientID,b,a,c,f));g.endWidgetTimer(e,m);k.showButtonAndRemoveSpinner(b);q&&q()}})}function r(a,b){g.startWidgetTimer(b);c.post("/afx/slotselection/cancel",{timeout:5E3,params:{token:a.data.additionalParams.csrfToken},success:function(){m(a,b,function(){location.reload()})},error:function(){f.log("Failed to clear reservation");u.showGenericErrorModal(a,h)}})}function x(){return e.amazon&&e.amazon.cordova&&e.amazon.cordova.notification&&e.amazon.cordova.notification.vibrate&&
e.amazon.cordova.notification.vibrate(50)}function w(a){return a.items&&Math.ceil(a.items.length/5)}var l=p.getMetricsForDevice(h),q=l.ATFC_LATENCY_SCOPE+Date.now();c.declarative("fresh-clear-slot","click",function(a){a.$currentTarget.context.disabled=!0;r(a,q)});c.declarative("fresh-add-to-cart","click",function(a){g.startWidgetTimer(q);g.increment(l.ATFC_COUNT);k.shouldDisableButtonClicks()||a.$currentTarget.find("input").is(":disabled")||(k.hideButtonAndRenderSpinner(a),x(),m(a,q))});c.declarative("fresh-add-to-cart-alcohol",
"click",function(a){a.$currentTarget.context.disabled=!0;g.startWidgetTimer(q);m(a,q)});c.declarative("fresh-add-to-cart-regions-resolve","click",function(a){a.$currentTarget.context.disabled=!0;y.execute({data:a.data,error:function(b,c,d){u.showGenericErrorModal(a,h);n.error(a.data.clientID,a,b,c,d)}})});c.declarative("fresh-add-to-order","click",function(a){k.shouldDisableButtonClicks()||(k.hideButtonAndRenderSpinner(a),x(),b.addToFreshOrder({data:a.data,reftag:a.data.reftag,success:function(b,
c,d){200===d.status&&n.success(a.data.clientID,a,b.clientResponseModel);k.showButtonAndRemoveSpinner(a)},error:function(b,c,d){console.log("Failed to Add to Fresh Order");n.error(a.data.clientID,a,b,c,d);k.showButtonAndRemoveSpinner(a)}}))})}}})});
/* ******** */
(function(k){var g=window.AmazonUIPageJS||window.P,p=g._namespace||g.attributeErrors,b=p?p("DetailPageAlohaAssets"):g;b.guardFatal?b.guardFatal(k)(b,window):b.execute(function(){k(b,window)})})(function(k,g,p){g.alohaBuyBoxUSLoadDone||(g.alohaBuyBoxUSLoadDone=!0,k.when("A","a-dropdown","alohaBuyBoxJS","aloha-base","ready").execute(function(b,k,e){var c=b.$,d=this;d.buyboxJs=new e;d.buyboxRefreshDone=!1;d.pricingRefreshDone=!1;d.availabilityRefreshDone=!1;d.buyboxJs.getLinkOffDisplayed()&&(e=d.buyboxJs.getSessionId(),
d.buyboxJs.logLinkOffMetrics("IMPRESSION",e));b.on("aloha:buyboxRefreshComplete",function(){d.buyboxRefreshDone=!0;d.updateWidgets()});b.on("aloha:pricingRefreshComplete",function(){d.pricingRefreshDone=!0;d.updateWidgets()});b.on("aloha:availabilityRefreshComplete",function(){d.availabilityRefreshDone=!0;d.updateWidgets()});d.updateWidgets=function(){if(d.pricingRefreshDone&&d.buyboxRefreshDone&&d.availabilityRefreshDone){var a=d.selectedTransaction,b=d.selectedContractType!==p?d.selectedContractType:
d.selectedConditionType;/^financing.+/.test(b)&&(b="financing");var f;f="linkOff"===a?c("#linkOffSection"):c("#alohaBuyBoxWidget #contract-container-"+a);var e;switch(b){case "m2m":e=c("#alohaBuyBoxWidget #"+a+"-m2m-info");break;case "twoYear":e=c("#alohaBuyBoxWidget #"+a+"-info");break;case "financing":e=c("#alohaBuyBoxWidget #financing-contract-"+a+" ."+d.selectedContractType);break;case "new":e=c("#alohaBuyBoxWidget #DEVICE_ONLY-new-info");break;case "used":e=c("#alohaBuyBoxWidget #DEVICE_ONLY-used-info");
break;case "refurbished":e=c("#alohaBuyBoxWidget #DEVICE_ONLY-refurbished-info")}d.selectedTransaction=d.selectedContractType=d.selectedConditionType=p;f!==p&&f.length&&k.getSelect("transaction-selector").setValue(a);e!==p&&e.length&&e.trigger("click");d.pricingRefreshDone=d.buyboxRefreshDone=d.availabilityRefreshDone=!1}};c(document).delegate("li[id^='transaction-selector'] a.a-active","click",function(){var a=c("#alohaBuyBoxWidget div .contract-container:visible .selected");a!==p&&a.length&&a.trigger("click")});
b.declarative("select-transaction","change click",function(a){var b=k.getSelect("transaction-selector").val(),f=a.data.sessionId;""!==b&&b!==p&&(d.buyboxJs.hideTransactionAlertMessage(),"linkOff"===b?(d.buyboxJs.showLinkOffButton(),d.buyboxJs.hideFastTrackMessage(),d.buyboxJs.hideTransactionContainer(),d.buyboxJs.hideAddToCartWithoutContractButton(),d.buyboxJs.hideAddToCartWithContractButton(),d.buyboxJs.hideAvailabilityMessage(),d.buyboxJs.showLinkOffPrice(),d.buyboxJs.showLinkOffAvailability(),
d.buyboxJs.updatePricingContainer(),d.buyboxJs.logLinkOffMetrics("IMPRESSION",f),d.selectedTransaction=b,d.selectedContractType=d.selectedConditionType=p):(d.buyboxJs.showFastTrackMessage(),d.buyboxJs.hideLinkOffButton(),d.buyboxJs.hideLinkOffAvailability(),d.buyboxJs.hideLinkOffPrice(),d.buyboxJs.displayTransactionContainer(b),d.buyboxJs.updatePricingContainer(b),d.buyboxJs.updateTaxInfoForTransaction(b),"change"===a.type?(d.buyboxJs.disableAddToCartButton(b),d.selectedTransaction=b,d.selectedContractType=
d.selectedConditionType=p,c("#alohaBuyBoxWidget #contract-container-"+b+" .selected").trigger("click")):"click"===a.type&&d.buyboxJs.showMorePricingOption()))});b.declarative("link-off-click","click",{allowLinkDefault:!0},function(a){d.buyboxJs.logLinkOffMetrics("CLICK",a.data.sessionId)});b.declarative("select-contract","click",function(a){var b=a.data.transaction,f=a.data.discriminator;c("#contract-container-"+b+" .selected").removeClass("selected");a.$currentTarget.addClass("selected");var e=a.data.offerListingType;
d.buyboxJs.hideAvailabilityMessage();if("PURCHASABLE"===e){d.buyboxJs.showFastTrackMessage();d.buyboxJs.hideLinkOffButton();var g="true"===a.data.financingContract?!0:!1,k="true"===a.data.twoYearContract?!0:!1,q="true"===a.data.m2mContract?!0:!1;d.selectedContractType=a.data.contractType;d.buyboxJs.updateM2MSelectedField("false");d.buyboxJs.updateFinancingOptionField("");g?(a=a.data.asin,d.buyboxJs.updateFinancingOptionField(a),d.buyboxJs.updateTaxInfoForFinancingTerm(a),d.buyboxJs.enableAddToCartButton(b,
a)):k?(d.buyboxJs.updateTaxInfoForTransaction(b),d.buyboxJs.enableAddToCartButton(b)):q&&(d.buyboxJs.updateM2MSelectedField("true"),d.buyboxJs.enableAddToCartButton(b,"",q));d.buyboxJs.hideMorePricingOption()}else"ADVERTISEMENT"===e&&(d.buyboxJs.hideFastTrackMessage(),d.buyboxJs.hideAddToCartButton(),d.buyboxJs.showLinkOffButton(),d.buyboxJs.hideMorePricingOption());d.buyboxJs.updatePricingContainer(b,e,f);d.buyboxJs.updateAvailabilityMessage(b,e,f)});b.declarative("select-device-only","click",function(a){var b=
a.data.transaction,f=a.data.condition,e=a.data.discriminator,g=a.data.offerListingType;d.selectedConditionType=f;d.buyboxJs.hideAddToCartButton();d.buyboxJs.toggleAddToCartWithoutContractButton(f);c("#device-only-container .selected, #contract-container-DEVICE_ONLY .selected").removeClass("selected");"new"===f&&(d.buyboxJs.hideAvailabilityMessage(),d.buyboxJs.updatePricingContainer(b,g,e),d.buyboxJs.updateAvailabilityMessage(b,g,e));a.$currentTarget.addClass("selected")});b.declarative("checkout-with-popover",
"click",function(a){var e=[];c("#aloha-cart-details .deviceContainer").each(function(a){a=c(this);e.push(a.find(".lineId").val())});var f={"operations[]":["REMOVE_DEVICE","ADD_DEVICE"]};f["lineid[]"]=e;a=c("#aloha-atc-fields");c.extend(f,d.buyboxJs.serializeInputs(a));a=d.buyboxJs.buildExternalAlohaPath("/rbi/aloha/alohaCartPopoverHandler");b.ajax(a,{method:"post",params:f,success:function(a){d.buyboxJs.handleAddToCartAjaxSuccess(a,f.transaction)},error:function(a){d.buyboxJs.handleAjaxFailure()}})});
b.declarative("tax-info-popup","click",function(a){var b=a.data.id;a="/gp/help/customer/display.html/ref="+a.data.refTag+"?ie=UTF8&pop-up=1&nodeId=";var d=800,e=540,k=(g.screenX?g.screenX:g.screenLeft)+(c(g).width()-d)/2,q=(g.screenY?g.screenY:g.screenTop)+(c(g).height()-e)/2;g.outerWidth&&g.innerWidth&&(k+=(g.outerWidth-g.innerWidth)/2);g.outerHeight&&g.innerHeight&&(q+=g.outerHeight-g.innerHeight);g.open(a+b,"newwindow","height="+(e-172)+",width="+(d-16)+",left="+k+",top="+q+",location=no,scrollbars=yes,toolbar=no,menubar=no,directories=no,status=yes,resizable=yes")});
b.declarative("add-to-cart-with-no-contract","click",function(a){d.buyboxJs.resetTransactionDropdown()})}),k.when("A","a-modal","aloha-base").register("alohaBuyBoxJS",function(b,k){return function(){var e=b.$,c=this;c.settings={DEFAULT_ERROR_HEADER_MESSAGE:e("#alohaBuyBoxWidget input[name=aloha-default-error-message-header]").val(),DEFAULT_ERROR_MESSAGE:e("#alohaBuyBoxWidget input[name=aloha-error-message").val(),TRANSACTION_ALERT_SELECTOR:".select-transaction-alert",ADD_TO_CART_BUTTON_WITH_CONTRACT:"#add-to-cart-with-contract-btn",
ADD_TO_CART_NEW_WITHOUT_CONTRACT_FORM_CONTAINER:"#new-add-to-cart",ADD_TO_CART_USED_WITHOUT_CONTRACT_FORM_CONTAINER:"#used-add-to-cart",ADD_TO_CART_REFURBISHED_WITHOUT_CONTRACT_FORM_CONTAINER:"#refurbished-add-to-cart",CONTRACT_SALES_TAX_INFO_DIV:"#aloha-bb-contract-links",FINANCING_SALES_TAX_INFO_DIV:"#aloha-bb-financing-links",LINKOFF_URL_SECTION:"#alohaBuyBoxWidget #linkOffSection",ADD_TO_CART_BUTTON:"#alohaBuyBoxWidget .add-to-cart",SESSION_ID_CONTAINER:"#page-session-id",EXISTING_ADD_TO_CART_POPOVER_LABEL:"#existingCartPopoverLabel",
DP_ADD_TO_CART_ERROR_LABEL:"#dpAddToCartErrorLabel",FASTRACK_MESSAGE_DIV:"#dpFastTrack_feature_div",LINK_OFF_PRICE:"#link-off-price",LINK_OFF_AVAILABILITY:".link-off-availability",LINK_OFF_LINKS:".link-off-url",CARRIER_CODE:"#aloha-carriercode"};c.getSessionId=function(){return e(c.settings.SESSION_ID_CONTAINER).val()};c.getLinkOffDisplayed=function(){return e(c.settings.LINKOFF_URL_SECTION).is(":visible")};c.showLinkOffPrice=function(){e(c.settings.LINK_OFF_PRICE).removeClass("aok-hidden")};c.hideLinkOffPrice=
function(){e(c.settings.LINK_OFF_PRICE).addClass("aok-hidden")};c.showLinkOffAvailability=function(){e(c.settings.LINK_OFF_AVAILABILITY).removeClass("aok-hidden");e(c.settings.LINK_OFF_AVAILABILITY).removeClass("a-hidden")};c.hideLinkOffAvailability=function(){e(c.settings.LINK_OFF_AVAILABILITY).addClass("aok-hidden")};c.hideFastTrackMessage=function(){e(c.settings.FASTRACK_MESSAGE_DIV).addClass("aok-hidden")};c.UNKNOWN_CARRIER_CODE="UNKNOWN";c.getCurrentCarrierCode=function(){return b.$(c.settings.CARRIER_CODE).val()||
c.UNKNOWN_CARRIER_CODE};c.logLinkOffMetrics=function(b,a){g.ue&&"function"===typeof g.ue.count&&g.ue.count("Aloha.LINKOFF."+c.getCurrentCarrierCode()+"."+b+".JS",1)};c.showFastTrackMessage=function(){e(c.settings.FASTRACK_MESSAGE_DIV).removeClass("aok-hidden")};c.getExistingAddToCartLabel=function(){return e(c.settings.EXISTING_ADD_TO_CART_POPOVER_LABEL).val()};c.getDPAddToCartErrorLabel=function(){return e(c.settings.DP_ADD_TO_CART_ERROR_LABEL).val()};c.hideAddToCartButton=function(){e(c.settings.ADD_TO_CART_BUTTON).addClass("a-hidden")};
c.hideAddToCartWithoutContractButton=function(){e(c.settings.ADD_TO_CART_NEW_WITHOUT_CONTRACT_FORM_CONTAINER).addClass("a-hidden");e(c.settings.ADD_TO_CART_USED_WITHOUT_CONTRACT_FORM_CONTAINER).addClass("a-hidden");e(c.settings.ADD_TO_CART_REFURBISHED_WITHOUT_CONTRACT_FORM_CONTAINER).addClass("a-hidden")};c.hideAddToCartWithContractButton=function(){e(c.settings.ADD_TO_CART_BUTTON_WITH_CONTRACT).addClass("a-hidden")};c.showAddToCartButton=function(){e(c.settings.ADD_TO_CART_BUTTON).removeClass("a-hidden")};
c.hideLinkOffButton=function(){e(c.settings.LINKOFF_URL_SECTION).addClass("a-hidden")};c.showLinkOffButton=function(){e(c.settings.LINKOFF_URL_SECTION).removeClass("a-hidden")};c.displayTransactionContainer=function(b){e(".contract-container").addClass("a-hidden");e("#contract-container-"+b).removeClass("a-hidden");e("#contract-container-"+b).removeClass("aok-hidden")};c.hideTransactionContainer=function(b){e(".contract-container").addClass("aok-hidden")};c.hideTransactionAlertMessage=function(){e(c.settings.TRANSACTION_ALERT_SELECTOR).addClass("a-hidden")};
c.enableAddToCartButton=function(b,a,g){e(c.settings.ADD_TO_CART_BUTTON_WITH_CONTRACT).hasClass("a-hidden")&&e(c.settings.ADD_TO_CART_BUTTON_WITH_CONTRACT).removeClass("a-hidden");e(c.settings.ADD_TO_CART_BUTTON_WITH_CONTRACT).hasClass("a-button-disabled")&&e(c.settings.ADD_TO_CART_BUTTON_WITH_CONTRACT).removeClass("a-button-disabled");c.setTransactionType(b);c.updateM2MSelectedField(g);a!==p&&""!==a?(c.setFinancingOptionAsin(a),c.setM2MContractSelected("")):g!==p&&""!==g&&(c.setM2MContractSelected(g),
c.setFinancingOptionAsin(""))};c.setTransactionType=function(b){e(c.settings.ADD_TO_CART_BUTTON_WITH_CONTRACT).find("input").data("add-to-cart").transaction=b;e("#aloha-atc-fields input#transactionTypeSelected").val(b)};c.setFinancingOptionAsin=function(b){e(c.settings.ADD_TO_CART_BUTTON_WITH_CONTRACT).find("input").data("add-to-cart").financingOptionAsin=b};c.setM2MContractSelected=function(b){e(c.settings.ADD_TO_CART_BUTTON_WITH_CONTRACT).find("input").data("add-to-cart").m2mSelected=b};c.updatePricingContainer=
function(b,a,c){e(".pricing-info").addClass("a-hidden");a!==p&&c!==p?e("#"+c+"-"+a).removeClass("a-hidden"):e(".pricing-detail-"+b).removeClass("a-hidden")};c.hideMorePricingOption=function(){e(".more-pricing-option").addClass("a-hidden")};c.showMorePricingOption=function(){e(".more-pricing-option").removeClass("a-hidden")};c.updateFinancingOptionField=function(b){e("input[name=financingOptionAsin]").val(b)};c.updateM2MSelectedField=function(b){e("input[name=m2mSelected]").val(b)};c.disableAddToCartButton=
function(b){e(c.settings.ADD_TO_CART_BUTTON_WITH_CONTRACT).hasClass("a-button-disabled")||e(c.settings.ADD_TO_CART_BUTTON_WITH_CONTRACT).addClass("a-button-disabled");"ALL"===b||"DEVICE_ONLY"===b?e(c.settings.ADD_TO_CART_BUTTON_WITH_CONTRACT).addClass("a-hidden"):(e(c.settings.ADD_TO_CART_NEW_WITHOUT_CONTRACT_FORM_CONTAINER).addClass("a-hidden"),e(c.settings.ADD_TO_CART_USED_WITHOUT_CONTRACT_FORM_CONTAINER).addClass("a-hidden"),e(c.settings.ADD_TO_CART_REFURBISHED_WITHOUT_CONTRACT_FORM_CONTAINER).addClass("a-hidden"))};
c.hideDeviceOnlyAddToCartButton=function(b){e("#alohaBuyBoxWidget .aloha-no-contract-cart-button").addClass("a-hidden")};c.updateAvailabilityMessage=function(b,a,c){e("#availabilityInfo").removeClass("a-hidden");e("#availabilityInfo-"+c+"-"+a).removeClass("a-hidden")};c.hideAvailabilityMessage=function(b){e(".availability").addClass("a-hidden")};c.handleAddToCartAjaxSuccess=function(b,a,g){var f="http://"+location.host+"/wl/rbi/puc",l="https://"+location.host+"/wl/co/uew",p="INDIVIDUAL_NEW"===a?!1:
!0;"SUCCESS"===b.status?(b=!0===p?l:f,c.resetTransactionDropdown(),location.href=b):b.cartAdditionConflictOccurred?(f=e("#alohaShortDeviceTitle").val(),l={},l.conflictType=b.cartAdditionConflictType,l.deviceTitle=f,l.transaction=a,l.requiresAui="true",l.vid=g,b=c.buildExternalAlohaPath("/rbi/aloha/existingOrderInAlohaCartPopover")+"?"+e.param(l),a=c.getExistingAddToCartLabel(),g=e("#aloha-cart-popover-trigger"),k.create(g,{url:b,position:"triggerTop",width:900,hiddenOnClick:"true",popoverLabel:a}).show()):
c.handleAjaxFailure(b.errorType,b.errorDetailMessage)};c.handleAjaxFailure=function(b,a){var g=e("#aloha-cart-error-failure-message-trigger"),f=c.getDPAddToCartErrorLabel();k.create(g,{header:b!==p?b:c.settings.DEFAULT_ERROR_HEADER_MESSAGE,inlineContent:a!==p?a:c.settings.DEFAULT_ERROR_MESSAGE,position:"triggerVertical",width:400,popoverLabel:f}).show()};c.updateTaxInfoForTransaction=function(b){"ALL"===b||"DEVICE_ONLY"===b?(e(c.settings.CONTRACT_SALES_TAX_INFO_DIV).addClass("a-hidden"),e(c.settings.FINANCING_SALES_TAX_INFO_DIV).addClass("a-hidden")):
(e(c.settings.CONTRACT_SALES_TAX_INFO_DIV).removeClass("a-hidden"),e(c.settings.FINANCING_SALES_TAX_INFO_DIV).removeClass("a-hidden"))};c.updateTaxInfoForFinancingTerm=function(b){b!==p&&""!==b?(e(c.settings.CONTRACT_SALES_TAX_INFO_DIV).addClass("a-hidden"),e(c.settings.FINANCING_SALES_TAX_INFO_DIV).removeClass("a-hidden")):(e(c.settings.CONTRACT_SALES_TAX_INFO_DIV).removeClass("a-hidden"),e(c.settings.FINANCING_SALES_TAX_INFO_DIV).addClass("a-hidden"))};c.serializeInputs=function(b){var a={};b.find("input").each(function(b,
c){a[c.name]=c.value});return a};c.buildExternalAlohaPath=function(b){return"/wl"+b};c.toggleAddToCartWithoutContractButton=function(b){e("#alohaBuyBoxWidget .aloha-no-contract-cart-button").addClass("a-hidden");e("#alohaBuyBoxWidget #"+b+"-add-to-cart").removeClass("a-hidden")};c.resetTransactionDropdown=function(){e("#transaction-selector-dropdown").prop("selectedIndex",-1);e("#transaction-selector").prop("selectedIndex",-1)}}}));k.when("aloha.carriercompatibility.model","aloha.dp.carriercompatibility.view",
"A").execute(function(b,g,e){b=new b;g=new g(b);e.declarative("swatchthumb-action","mouseenter",g.onTwisterMouseEnter);e.declarative("swatchthumb-action","mouseleave",g.onTwisterMouseLeave);e.declarative("swatchthumb-action","click",g.onTwisterClick);e.on("a:pageUpdate",g.onTwisterRefresh);e.declarative("a-modal","click",g.onModalClick);e.declarative("sortByCarrier","click",g.onCarrierHeaderClick);e.declarative("sortByCompatibility","click",g.onCompatibilityHeaderClick);e.on("a:dropdown:aloha-carrier-compatibility-country-dropdown-overview:select",
g.onDropdownSelect);e.on("a:dropdown:aloha-carrier-compatibility-country-dropdown-modal:select",g.onDropdownSelect)});k.when("A","ready").execute("aloha.carrierCompatibility.onStart",function(b){b.objectIsEmpty(b.state("current-asin"))||b.objectIsEmpty(b.state("default-country"))||b.objectIsEmpty(b.state("all-carriers-by-country-and-asin"))||b.objectIsEmpty(b.state("top-carriers-by-country-and-asin"))||k.declare("aloha.carrierCompatibility.ready")});k.declare("aloha.carrierCompatibility.SortByEnum",
{compatibility:0,carrierName:1});k.when("A","aloha.carrierCompatibility.SortByEnum","aloha.carrierCompatibility.ready").register("aloha.carriercompatibility.model",function(b,g){var e={"Fully Compatible":0,"4G/LTE Compatible":1,"Limited Data Speed":2,"Text and Voice Only":3,"Data Only":4,"No Service":5},c=function(){this.getCountries=function(a){return(a=this.allCarriersByCountryAndAsin[a])?b.map(a,function(a,b){return b}):[]};this.getModalDescription=function(){var a=b.$("#productTitle").text();
return this.modalDescriptionFormat.replace("${product_title}",a)};this.isAsinValid=function(a){return this.allCarriersByCountryAndAsin[a]&&this.topCarriersByCountryAndAsin[a]};this.setAsin=function(a){this.previousAsin=this.asin;this.asin=a;a=this.getCountries(a);0<=a.indexOf(this.country)||(this.country=0<=a.indexOf(this.defaultCountry)?this.defaultCountry:a[0])};this.sortBy=function(a){c(!1,a)};this.sortByDescending=function(a){c(!0,a)};var c=function(b,c){this.sortByType={type:c,isDescending:b};
a(this.allCarriersByCountryAndAsin,c,this.sortByType.isDescending);a(this.topCarriersByCountryAndAsin,c,this.sortByType.isDescending)}.bind(this),a=function(a,b,c){for(var d in a)if(a.hasOwnProperty(d))for(var e in a[d])if(a[d].hasOwnProperty(e)){var g=a[d][e];c?this.sorter.sortCarriersByDescending(g,b):this.sorter.sortCarriersBy(g,b)}}.bind(this);this.previousAsin=null;this.asin=b.state("current-asin").asin;this.country=this.defaultCountry=b.state("default-country").country;this.allCarriersByCountryAndAsin=
b.state("all-carriers-by-country-and-asin");this.topCarriersByCountryAndAsin=b.state("top-carriers-by-country-and-asin");this.modalDescriptionFormat=b.state("modalDescription").format};c.prototype.sorter=new function(){this.sortCarriersBy=function(a,c){b(a,c,!1)};this.sortCarriersByDescending=function(a,c){b(a,c,!0)};var b=function(b,c,d){switch(c){case g.carrierName:b.sort(function(b,c){return d?a(c.carrierName,b.carrierName):a(b.carrierName,c.carrierName)});break;default:b.sort(function(b,c){return d?
a(e[c.compatibilityRatingSummary],e[b.compatibilityRatingSummary])||a(c.carrierName,b.carrierName):a(e[b.compatibilityRatingSummary],e[c.compatibilityRatingSummary])||a(b.carrierName,c.carrierName)})}},a=function(a,b){return a>b?1:a<b?-1:0}};return c});k.when("jQuery","A","a-dropdown","aloha.carrierCompatibility.SortByEnum").register("aloha.dp.carriercompatibility.view",function(b,k,e,c){return function(d){this.model=d;this.csmKeys={modalDisplayed:"alohaCarrierCompatibilityModalDisplayed"};
this.selectors={overviewDropdownId:"aloha-carrier-compatibility-country-dropdown-overview",modalDropdownId:"aloha-carrier-compatibility-country-dropdown-modal",carrierNameClass:".carrier-name",carrierRatingSummaryClass:".carrier-rating-summary",carrierRatingSummary:"carrier-rating-summary",colorClass:"a-color-",textBoldClass:"a-text-bold",downArrowClass:"a-icon a-icon-section-expand selector-arrow",upArrowClass:"a-icon selector-arrow a-icon-section-collapse",compatibleVoiceText:".compatible-voice-text",
compatible2G:".compatible-2G",compatible3G:".compatible-3G",compatible4GLTE:".compatible-4GLTE",check:"aloha-carrier-compatibility-check-icon"};this.$webElements={compatibilityWidget:b("#aloha-carrier-compatibility-widget"),overviewTableRows:b(".aloha-carrier-compatibility-overview-table-row"),modalTableRows:b(".aloha-carrier-compatibility-modal-table-row"),carrierSortIcon:b(".aloha-carrier-compatibility-carrier-sort-icon"),compatibilitySortIcon:b(".aloha-carrier-compatibility-compatibility-sort-icon"),
modalDescription:b("#aloha-carrier-compatibility-modal-table-description").find("> span")};this.onTwisterMouseEnter=function(){var b=n();a(b)}.bind(this);this.onTwisterMouseLeave=function(){a(this.model.previousAsin)}.bind(this);this.onTwisterClick=function(){var b=g.DetailPage.StateController.getState().current_asin;a(b)}.bind(this);this.onTwisterRefresh=function(){this.$webElements.modalDescription.text(this.model.getModalDescription())}.bind(this);this.onModalClick=function(){var a=g.ue;if(a&&
a.count){var b=this.csmKeys.modalDisplayed,c=a.count(b)||0;a.count(b,c+1)}}.bind(this);this.onCarrierHeaderClick=function(){f(c.carrierName);h();k()}.bind(this);this.onCompatibilityHeaderClick=function(){f(c.compatibility);h();k()}.bind(this);this.onDropdownSelect=function(a){a=a.value;this.model.country=a;h(a);e.getSelect(this.selectors.overviewDropdownId).setValue(a);e.getSelect(this.selectors.modalDropdownId).setValue(a)}.bind(this);var a=function(a){this.model.setAsin(a);this.model.isAsinValid(a)?
(t(a),h(),l()):p()}.bind(this),k=function(){this.$webElements.carrierSortIcon.removeClass(this.selectors.upArrowClass+" "+this.selectors.downArrowClass);this.$webElements.compatibilitySortIcon.removeClass(this.selectors.upArrowClass+" "+this.selectors.downArrowClass);(this.model.sortByType.type===c.carrierName?this.$webElements.carrierSortIcon:this.$webElements.compatibilitySortIcon).addClass(this.model.sortByType.isDescending?this.selectors.upArrowClass:this.selectors.downArrowClass)}.bind(this),
f=function(a){this.model.sortByType.type===a&&this.model.sortByType.isDescending||this.model.sortByType.type!==a?this.model.sortBy(a):this.model.sortByDescending(a)}.bind(this),l=function(){this.$webElements.compatibilityWidget.show()}.bind(this),p=function(){this.$webElements.compatibilityWidget.hide()}.bind(this),q=function(a,c,d){a=b(a.find(this.selectors.carrierRatingSummaryClass));d=d?c.modalCompatibilityRatingSummary:c.compatibilityRatingSummary;a.removeClass();a.addClass(this.selectors.carrierRatingSummary);
a.addClass(this.selectors.colorClass+c.compatibilityRatingSummaryColor);a.text(d);c.compatibilityRatingIsBold&&a.addClass(this.selectors.textBoldClass)}.bind(this),A={compatibleVoiceText:this.selectors.compatibleVoiceText,compatible2G:this.selectors.compatible2G,compatible3G:this.selectors.compatible3G,compatible4GLTE:this.selectors.compatible4GLTE},y=function(a,c){var d=this.selectors.check;b.each(A,function(b){var e=c[b];b=a.find(A[b]);"Check"===e?(b.addClass(d),b.empty()):(b.removeClass(d),b.html(e))})}.bind(this),
x=function(a,b){a.show();a.find(this.selectors.carrierNameClass).text(b.carrierName);q(a,b)}.bind(this),v=function(a,b){a.show();a.find(this.selectors.carrierNameClass).text(b.carrierName);q(a,b,!0);y(a,b)}.bind(this),n=function(){var a=g.DetailPage.StateController.getState(),c=a.asin_variation_values,d=a.variation_label_order,e=a.hovered_variations,f;for(f in c)if(c.hasOwnProperty(f)){var h=c[f];if(b.grep(d,function(c){var d=h[c];c=b.inArray(e[c],a.variation_values[c]);return d==c}).length===d.length)return h.ASIN}return null},
h=function(a,c){a||(a=this.model.country);c||(c=this.model.asin);var d=this.model.allCarriersByCountryAndAsin[c][a],e=this.model.topCarriersByCountryAndAsin[c][a];this.$webElements.overviewTableRows.each(function(a,c){var d=e[a],f=b(c);d?x(f,d):f.hide()});this.$webElements.modalTableRows.each(function(a,c){var e=d[a],f=b(c);e?v(f,e):f.hide()})}.bind(this),t=function(a){}.bind(this)}});k.when("A","a-modal").register("aloha.utils",function(b,g){return{showAjaxErrorModal:function(b,c,d){var a=
g.get(b);null===a?a=g.create(b,{content:d,header:c}):a.update({content:d,header:c});a.show().refresh()}}});k.when("A","a-modal","a-checkbox","aloha-simplebundle-common","ready").execute(function(b,g,e,c){function d(){b.declarative("show-review-tab","click",function(c){b.$(c.$target).closest(a.AUI_PAGE_ROOT).find(".popoverReviewsTab").click()});b.declarative("add-to-cart","click",function(c){b.$(a.SB_ROOT+" "+a.SB_BUYBOX_ITEM_CHECKBOX+" "+a.INPUT_TYPE_CHECKBOX).filter(function(){return b.$(this).data("asin")===
c.data.asin}).prop("checked",!0).change();b.$("[id^=popover-simpleBundle-]").each(function(){var a=g.get(b.$(this));a.isActive()&&a.hide()})});b.declarative("focus-image","mouseenter",function(b){var c=b.$target,d=c.parents(a.AUI_PAGE_ROOT);b=b.data;d.find("#productImageMain-"+b.asin).attr("src",b.imageUrl);d.find(".thumbnail-group").removeClass("a-button-selected");d.find("#"+c.prop("name")).addClass("a-button-selected")})}var a={ADD_TO_CART_FORM:"#addToCart",SESSION_ID:"#session-id",OFFER_LISTING_ID:"#offerListingID",
AUI_MODAL_SCROLLER:".a-modal-scroller",AUI_PAGE_ROOT:"#a-page",INPUT_TYPE_CHECKBOX:"input[type='checkbox']",SB_ROOT:".showBundleAsins.simpleBundleFeatureContainer",SB_EXPANDED_MODAL_EXPANDER_HEADER_PREFIX:".simple-bundle-item-expand-header-",SB_EXPANDED_MODAL_EXPANDER_CONTENT_PREFIX:".simple-bundle-item-expander-content-",SB_EXPANDED_MODAL_LINK:".simple-bundle-buybox-expanded-modal-link",SB_EXPANDED_MODAL_ITEM_LINK_PREFIX:".simple-bundle-item-link-",SB_ACCESSORY_ITEM_LINK_PREFIX:".popover-simpleBundle-link-",
SB_BUYBOX_ITEM_CHECKBOX:".simple-bundle-buybox-item-checkbox",SB_BUYBOX_CHECKBOX_PREFIX:".simple-bundle-item-",SB_EXPANDED_CHECKBOX_PREFIX:".simple-bundle-modal-item-",SB_EXPANDER_TITLE:".aloha-simple-bundle-expand-header-title"};e=b.debounce(function(){var e=b.$(a.SB_ROOT);if(e.length){var f=b.$(a.ADD_TO_CART_FORM);if(f.find(":submit").length&&f.find(a.OFFER_LISTING_ID).val()){d();var g=c.getSimpleBundlePageState()||{},k=g.expandedBuyboxEnabled,p=g.selectionMode||"SINGLE",q=g.items||[],y=[],x=b.$(a.SESSION_ID).val(),
v=c.createCSMLogger(),n=e.find(a.SB_EXPANDED_MODAL_LINK),h;n.click(function(a){a.originalEvent&&v.logExpandedLink()});q.forEach(function(d,f){function q(){var c=!1;r.click(function(){c=!c});e.find(a.SB_EXPANDED_MODAL_ITEM_LINK_PREFIX+f).click(function(){c||r.click();n.click();h=h||b.$(a.AUI_MODAL_SCROLLER);h.scrollTop(r.offset().top-h.offset().top+h.scrollTop())})}function w(){var c=e.find(a.SB_EXPANDED_MODAL_EXPANDER_CONTENT_PREFIX+f),h="/gp/product/features/aloha-ppd/udp-ajax-handler/minidp.html?asin="+
d.asin+"&marketplaceId="+g.marketPlaceId+"&offerId="+d.offerListingId+"&activeTab=0",k="a:expander:simple-bundle-item-expander-"+f+":toggle",n=b.once(function(){c.load(h,null,function(a,d,e){b.$.trim(c.html())?(c.find(".a-span-last > .a-spacing-top-base").remove(),c.find(".popover-add-to-cart-button").remove(),a=c.find("#a-page > div > div.a-row"),d=c.find(".popover-in-stock"),d.remove(),d.addClass("aloha-simple-bundle-modal-detailed-info-header-row-text"),a.append(d),d=c.find(".popover-ship-sold-by"),
d.remove(),d.addClass("aloha-simple-bundle-modal-detailed-info-header-row-text"),a.append(d),d=c.find(".popover-retail-domain"),d.remove(),a.append(d),a=c.find("#a-page > div > div.a-column.a-span9"),a.removeClass("a-span9"),a.addClass("a-span12")):c.text(g.ajaxFailMsg)})}),p=k+":expand";b.off(p);b.on(p,function(d){v.logItemLink(f);r.find(a.SB_EXPANDER_TITLE).removeClass("aloha-simple-bundle-expand-header-title-truncate");b.$.trim(c.html())||n()});k+=":collapse";b.off(k);b.on(k,function(b){r.find(a.SB_EXPANDER_TITLE).addClass("aloha-simple-bundle-expand-header-title-truncate")})}
var r=e.find(a.SB_EXPANDED_MODAL_EXPANDER_HEADER_PREFIX+f);k?(q(),w()):e.find(a.SB_ACCESSORY_ITEM_LINK_PREFIX+f).click(function(){v.logItemLink(f)});c.setupCheckboxes(y,f,k,d.asin,g.maxBuyboxItemsDesktop,a.SB_BUYBOX_CHECKBOX_PREFIX+f+" "+a.INPUT_TYPE_CHECKBOX,a.SB_EXPANDED_CHECKBOX_PREFIX+f+" "+a.INPUT_TYPE_CHECKBOX,a.SB_BUYBOX_CHECKBOX_PREFIX+f,a.SB_EXPANDED_CHECKBOX_PREFIX+f,p)});c.setupAddToCart(f,y,q,v,x,k)}else e.hide()}},200);e();b.on("a:pageUpdate",e)});k.when("A","a-checkbox",
"aloha-uatc").register("aloha-simplebundle-common",function(b,k,e){function c(c,d){var e=b.$(c);e.change(function(){e.prop("checked",this.checked)});var g=b.$(d);g.length||(g=e);return{$element:e,$container:g,api:k(c),show:function(){g.hasClass(a.AUI_HIDDEN)&&g.removeClass(a.AUI_HIDDEN);g.show()},hide:function(){g.hasClass(a.AUI_HIDDEN)||g.addClass(a.AUI_HIDDEN)}}}function d(a,b,c,d,e,g){b.forEach(function(b,k){if(b.api.isChecked()){var l=c[k],h=e?1:g.find(m.QUANTITY).val();d.logCheckboxSelected(k,
h);a.addItem(l.asin,l.offerListingId,h)}})}var a={AUI_HIDDEN:"aok-hidden"},m={SB_JAVASCRIPT_PARAMS:".simpleBundleJavascriptParameters",QUANTITY:"*[name='quantity']",ACCORDION_ROW_CONTAINER:".a-accordion-row-container"};return{createCSMLogger:function(){function a(b,c){g.ue&&g.ue.count&&g.ue.count("aloha-simplebundle-"+b,c)}a("view",1);return{logAddToCart:function(b){a("addtocart",b)},logExpandedLink:function(){a("buybox-expanded-link",1)},logCheckboxSelected:function(b,c){a("checkbox-"+(b+1),c)},
logItemLink:function(b){a("link-"+(b+1),1)}}},getSimpleBundlePageState:function(){var a=b.$(m.SB_JAVASCRIPT_PARAMS).find("script").html();return b.parseJSON(a)},getCheckboxCollectionObject:c,setupAddToCart:function(a,c,k,p,q,y){function x(a,b){function f(){b()}function m(){g.ueLogError&&g.ueLogError({message:"[There was an error while adding items to the cart using the universal add to cart api.]"},{logLevel:"ERROR",attribution:"SimpleBundle"});b()}if(!v){var w=e.createAddToCartRequest(q,f,m);d(w,
c,k,p,y,n);var r=w.count();r&&(v=!0,a.preventDefault(),p.logAddToCart(r),w.call())}}var v=!1,n=a;a.submit(function(a){var c=b.$(this);x(a,function(){c.submit()})});a.find(":submit").click(function(a){var c=b.$(this),d=c.closest(m.ACCORDION_ROW_CONTAINER);d.length&&(n=d);x(a,function(){c.click()})})},setupAddToCartForDeclarative:function(a,b,c,k,m,p,q){a.click(function(a){a=e.createAddToCartRequest(m,null,function(){g.ueLogError&&g.ueLogError({message:"[There was an error while adding items to the cart using the universal add to cart api.]"},
{logLevel:"ERROR",attribution:"SimpleBundle"})});d(a,b,c,k,p,q);var f=a.count();f&&(k.logAddToCart(f),a.call())})},setupCheckboxes:function(a,b,d,e,g,k,m,p,n,h){var q=c(k,p);a.push(q);q.api.enable();q.$element.data("asin",e);if(d){var u=c(m,n);u.api.enable();u.api.check(q.api.isChecked());u.$element.change(function(){var a=u.api.isChecked();q.api.check(a)});q.$element.change(function(){var b=q.api.isChecked();u.api.check(b);var c=0;a.forEach(function(a){c<g&&a.api.isChecked()?(c++,a.show()):a.hide()});
c<g&&a.forEach(function(a){c<g&&a.api.isUnchecked()&&(c++,a.show())})})}else"SINGLE"===h&&q.$element.change(function(){q.api.isChecked()&&a.forEach(function(a,c){b!==c&&a.api.uncheck()})});0<a.length&&a[0].$element.change()}}});k.when("A").register("aloha-uatc",function(b){function g(e,c,d,a,k){var f=0;k=k||5E3;a=a||d;var l={clientName:"AmazonWireless"};l.verificationSessionID=e;return{count:function(){return f},call:function(){f&&b.post("/gp/add-to-cart/json",{timeout:k,params:l,success:c,
error:d,abort:a})},addItem:function(a,b,c){l["ASIN."+f]=a;l["offerListingID."+f]=b;l["quantity."+f]=c||1;f++}}}return{createAddToCartRequest:g,createSingleFinalCallbackAddToCartRequest:function(b,c){return g(b,c,c,c)}}})});
/* ******** */
(function(d){var h=window.AmazonUIPageJS||window.P,q=h._namespace||h.attributeErrors,e=q?q("SamplingDesktopAssets"):h;e.guardFatal?e.guardFatal(d)(e,window):e.execute(function(){d(e,window)})})(function(d,h,q){d.when("A","action-panel-secondary-panel","twister-aui-page-state","ready").register("single-sample-widget-desktop-utils",function(e,k,g){function f(){var a=e.state("singleSampleWidgetSecondaryPanelSettings");a||(a={panelId:"singleSampleWidgetSecondaryPanel",headingContentId:"singleSampleWidgetHeadingContent",
contentId:"singleSampleWidgetContentBlock"});return a}function w(a,b,x){d.when("a-alert").execute(function(m){d.when("a-button").execute(function(a){a("#add-single-sample-variations-to-cart-button").hide()});m=m("#single-sample-widget-samples-added-to-cart-msg");m.text(a);m.type(b);m.show();e.fadeToggle(c("#single-sample-widget-samples-added-to-cart-msg"),2500,"ease-out",function(){x&&x();d.when("a-button").execute(function(a){a("#add-single-sample-variations-to-cart-button").show()})})})}function r(){var a=
e.state("selectedSingleSampleVariations");a||(a=n());return a}function n(){var a={};a.asinList=JSON.stringify([]);a.asinIndexMap=JSON.stringify({});a.offerListingIdMap=JSON.stringify({});a.count=0;a.totalPrice=0;a.totalCredit=0;return a}function z(a,b){d.when("a-button").execute(function(b){b=b("#add-single-sample-variations-to-cart-button");b.enable();b.text(a)});y().html(b)}function q(a,b){d.when("a-button").execute(function(b){b=b("#add-single-sample-variations-to-cart-button");b.disable();b.text(a)});
y().html(b);var c=r();c.asinList="[]";c.asinIndexMap="{}";c.count=0;c.totalPrice=0;c.totalCredit=0;e.state("selectedSingleSampleVariations",c)}function y(){return c("#add-single-sample-variations-to-cart-info")}var c=e.$;e.on("renderPrimeSampleWidget",function(){var a=c(".single-sample-widget-container"),b=c(".single-sample-widget-container-btf");if(b){var x=b.html();x&&(a.html(x),b.html(""))}a.removeClass("aok-hidden");g.updatePageState();a=f();e.state("singleSampleWidgetSecondaryPanelSettings",
a);k.init(a)});e.on("a:pageUpdate",function(){e.state("singleSampleWidgetSecondaryPanelSettings",f());e.state("selectedSingleSampleVariations",n())});e.on("a:popover:afterShow:single-sample-widget-learn-more",function(a){d.when("samplingLog").execute(function(a){a.postCountMetric("smp_fswidget_details")})});d.when("action-panel-secondary-panel").execute(function(a){e.declarative("single-sample-widget-open-secondary-panel","click",function(b){a.animateIn(b.data.secondaryPanelId);c(h).scrollTop(0);
d.when("samplingLog").execute(function(a){a.postCountMetric("smp_fswidget_choose")})})});e.declarative("expand-sample-variation-list","click",function(a){a=c(".single-sample-variation-list-container .show-by-default-false");c(".single-sample-variation-list-container").addClass("single-sample-variation-list-container-enable-scroll");c(".single-sample-widget-collapse-button").removeClass("aok-hidden");c(".single-sample-widget-expand-button").addClass("aok-hidden");c.each(a,function(){c(this).addClass("single-sample-variation-row-visible");
c(this).removeClass("aok-hidden")});c("#single-sample-variation-list-container").animate({scrollTop:0})});e.declarative("collapse-sample-variation-list","click",function(a){a=c(".single-sample-variation-list-container .show-by-default-false");c(".single-sample-variation-list-container").removeClass("single-sample-variation-list-container-enable-scroll");c(".single-sample-widget-collapse-button").addClass("aok-hidden");c(".single-sample-widget-expand-button").removeClass("aok-hidden");c.each(a,function(){c(this).addClass("aok-hidden");
c(this).removeClass("single-sample-variation-row-visible")})});e.declarative("single-sample-variation-add","click",function(a){a=a.data;var b=a.asin,k=a.offerListingId,m=a.currencyCode,d=a.locale,g=Number(a.variationPrice),f=Number(a.variationCredit),h=c("#single-sample-variation-button-"+b),l=r(),p=JSON.parse(l.asinList),t=JSON.parse(l.asinIndexMap),n=JSON.parse(l.offerListingIdMap),w=Number(l.count),u=Number(l.totalPrice),v=Number(l.totalCredit);t.hasOwnProperty(b)&&0<=t[b]?(h.removeClass("single-sample-variation-button-selected"),
h.addClass("single-sample-variation-button"),k=t[b],p[k]=p[p.length-1],p.pop(),t[p[k]]=k,delete t[b],delete n[b],u-=g,v-=f,w--):(h.removeClass("single-sample-variation-button"),h.addClass("single-sample-variation-button-selected"),t[b]=p.length,n[b]=k,p.push(b),u+=g,v+=f,w++);l.asinList=JSON.stringify(p);l.asinIndexMap=JSON.stringify(t);l.offerListingIdMap=JSON.stringify(n);l.count=w;l.totalPrice=u;l.totalCredit=v;e.state("selectedSingleSampleVariations",l);b=a.totalCreditInfoText;b=b.replace("#PRICE#",
Number(u).toLocaleString(d,{style:"currency",currency:m}));b=b.replace("#CREDIT#",Number(v).toLocaleString(d,{style:"currency",currency:m}));m=p.length;0<m?(a=1===m?a.addSingleSampleToCartButtonText.replace("#COUNT#",m):a.addSamplesToCartButtonText.replace("#COUNT#",m),z(a,b)):(a=a.noSampleSelectedButtonText,q(a,b),c.each(c(".single-sample-variation-button-selected"),function(a,b){c(this).removeClass("single-sample-variation-button-selected");c(this).addClass("single-sample-variation-button")}))});
e.declarative("single-sample-variation-add-to-cart","click",function(a){var b=a.data,c=r();a=JSON.parse(c.asinList);if(0!==a.length){for(var c=JSON.parse(c.offerListingIdMap),k={"session-id":b.sessionId,clientName:"Sampling"},d=0;d<a.length;d++){var g=a[d],f=c[g],n="offerListingID."+d,l="quantity."+d;k["ASIN."+d]=g;k[n]=f;k[l]=1}e.post("/gp/add-to-cart/json/?ref_=smp_fswidget_atc",{timeout:5E3,params:k,success:function(a){h.location.href="/gp/huc/view.html/ref=smp_fswidget_atc"},error:function(a){w(b.samplesNotAddedToCartMessage,
"error")}})}});e.on("a:sheet:afterShow:single-sample-widget-bottom-sheet",function(a){c("#single-sample-variation-carousel").addClass("a-carousel-static");d.when("a-carousel-framework").execute(function(a){a.createAll();a.initializeAll()})})});d.when("A","action-panel","ready").register("sampling-buybox-utils",function(e,k){function g(c){c=c.selectedRow.rowName;r("#LDBuybox").length&&("sampling-accordion"===c?(k.setPanelState(A),h(q),f(n)):(k.setPanelState(y),h(n),f(q)))}function f(c){for(var a=
0;a<c.length;a++){var b=r(c[a]);b.length&&b.hasClass("aok-hidden")&&b.removeClass("aok-hidden")}}function h(c){for(var a=0;a<c.length;a++){var b=r(c[a]);b.length&&!b.hasClass("aok-hidden")&&b.addClass("aok-hidden")}}var r=e.$,n=["#samplingPrice"],q=["#price table"],A={mode:"sampling"},y={mode:"deal"};e.on("a:accordion:buybox-accordion:select",g);e.on("a:accordion:buybox_accordion:select",g);e.on("a:popover:afterShow:samplingPopoverContent",function(c){d.when("samplingLog").execute(function(a){a.postCountMetric("smp_dp_details")})})});
d.now().register("samplingLog",function(){var e=[];return{postCountMetric:function(e){if("undefined"!==typeof e){var d=h.ue;if(d){var f=d.count(e)||0;d.count(e,f+1)}}},widgetLoadStarted:function(d,g){e[d]||(e[d]={});e[d].startTime=g},widgetLoadFinished:function(d,g){e[d]&&(e[d].endTime=g)},postWidgetLatency:function(d){if("undefined"!==typeof d&&e[d]){var g=h.ue;if(g){var f=e[d],f=f.endTime-f.startTime;0<f&&g.count(d,f)}}}}})});
/* ******** */
(function(f){var k=window.AmazonUIPageJS||window.P,t=k._namespace||k.attributeErrors,b=t?t("PrivateLabelDesktopAssets"):k;b.guardFatal?b.guardFatal(f)(b,window):b.execute(function(){f(b,window)})})(function(f,k,t){f.when("A","jQuery","twister-aui-page-state","ready").register("cross-sell-recommendations",function(b,l,E){function f(c){return l("#crossSellCheckbox"+c)}function k(){for(var c=0,b=0;b<q;b++)f(b).prop("checked")&&c++;l("#crossSellAddToCart").find("span.a-button-text").text(m["addToCartText"+
(c+1)]);l("#crossSellAddToList").find("span.a-button-text").text(m["addToWishlistText"+(c+1)]);l("#crossSellPriceLabel").text(m["priceText"+(c+1)]);c+=1;l("#crossSellForm").attr("action",p+c);c="";for(b=0;b<q;b++)c+=f(b).prop("checked")?"1":"0";c=parseInt(c,2);c=u[c];l("#crossSellPrice").html(c)}var v,m,q,u,p;return{init:function(){E.updatePageState();v=b.state("crossSellData");m=b.state("crossSellStrings");if(v&&m){q=v.numRecommendations;u=v.possibleSums;p=l("#crossSellForm").attr("action");for(var c=
0;c<q;c++)f(c).change(k);l("#crossSellPricePara").removeClass("a-hidden");k()}}}});f.when("A","atf","ready").execute(function(b){var l=b.$("#heroVideo");b=b.state("hero-video-state");l.length&&"undefined"!==b&&b.url&&l.attr("src",b.url)});f.when("A","jQuery","imageBlockUtils","ImageBlockHeroUtils","postMetric").register("ImageBlockHeroVideoView",function(b,l,f,k,t){function v(a,c,b){if(!f.isjQueryObjDefined(a.find(".a-button-selected"))){var e=n.getCurrentItem(),z=0,g=c+z,h=k.getHeroImageHash(d,
e.color,z);-1!==h&&(g>=b&&(z=0,g=c),m(e.color)&&(x.dispatch("updateModel",{data:{index:z,thumbnailIndex:g,variant:h.variant,type:"hero-video"}}),c=a.find(".item").get(g),f.selectGivenThumbnail(l(c),a)))}}function m(a){null===d.heroVideo[a]&&a===d.landingAsinColor?a=d.heroVideo[d.defaultColor]:(a=d.heroVideo[a],a instanceof Array&&(a=a.length?a[0]:null));return a}function q(){if(d.repositionHeroImage){var a=k.getHeroDimParams(d,n.getCurrentItem());e.length&&f.isDefined(a)&&(a.xPos&&"undefined"!==typeof a.xPos&&
e.css({left:a.xPos+"px "}),e.css({top:a.yPos+"px","max-width":a.width+"px","min-height":a.height+"px",width:a.width+"px",height:a.height+"px"}))}}function u(){e.length&&e.hasClass("aok-hidden")&&0===n.getCurrentItem().thumbnailIndex&&e.removeClass("aok-hidden")}function p(){e.length&&!e.hasClass("aok-hidden")&&e.addClass("aok-hidden")}function c(a){e.length&&a&&(e.attr("poster",a.large),e.attr("src",a.url),e.get(0)&&(e.get(0).oncanplay=function(){u()}))}function C(a){if(a){var d;if(a.thumbUrl){d=
{thumb:a.thumbUrl,large:a.slateUrl,variant:a.variant,url:a.url};var c={};c[a.slateUrl]=[a.videoWidth,a.videoHeight];d.main=c}return d}}var A,d,n,x,B,w,e;return function(a,k,t,D){A=this;d=a;n=k;x=D;B=d.heroVideoVariant;d.heroImage[d.landingAsinColor]=d.heroImage[d.defaultColor];d.heroVideo[d.defaultColor]&&!Array.isArray(d.heroVideo[d.defaultColor])&&(a=C(d.heroVideo[d.defaultColor]),d.heroVideo[d.landingAsinColor]=a);A.render=function(a,g,h,y,k,q,p){w=y;l("#heroImage");e=l("#heroVideo");if(!m(a)){h=
void 0;y=n.getCurrentItem();h=y.color;k=[];if(d.colorToVideo[h])for(q=d.colorToVideo[h],p=q.length-1;0<=p;p--){var u=q[p];B&&u.variant===B&&(k.push(u),q.splice(p,1))}var r;k.length&&(r=C(k[0]));y="hero-video"===y.type||"hero-image"===y.type;r&&y&&(d.heroVideo[h]=r,c(m(h)),h=w.find(".heroImageThumbnail"),b.declarative.remove(h,"thumb-action"),r.type="hero-video",b.declarative.create(h,"thumb-action",r),r=n.getCurrentItem(),h={data:{index:r.index,thumbnailIndex:r.thumbnailIndex,variant:r.variant,type:"hero-video"}},
x.dispatch("updateModel",h),v(w,0,0,!1,!0),w.find(".a-button-selected").closest(".a-declarative").click())}r=g;if(h=m(a))y=h.thumb,d.heroImage&&d.heroImage[a].length&&(y=d.heroImage[a][0].thumb),a={type:"hero-video",index:0,thumbnailIndex:g,variant:h.variant},c(h),f.createThumbnail(a,y,w),g++,v(w,r,g);return g};A.update=function(a){if("mouseenter"===a.type)"ingress"===a.data.type?e.hasClass("aok-hidden")||(a.captured=!0):"hero-video"!==a.data.type&&p();else{var g;if(g="swatchHover"===a.type)a.data.color!==
n.getCurrentItem().color?g=!0:(g=m(n.getCurrentItem().color),g=e.length&&g&&e.attr("src")===g.url?!0:!1);g||p()}"swatchHover"===a.type?a.captured||("hero-video"!==n.getCurrentItem().type&&"hero-image"!==n.getCurrentItem().type?g=-1:m(a.data.color)?((a.data.color!==n.getCurrentItem().color||e.hasClass("aok-hidden"))&&c(m(a.data.color)),g=void 0):(p(),g=n.getCurrentItem(),x.dispatch("updateModel",{data:{index:g.index,thumbnailIndex:g.thumbnailIndex,variant:g.variant,type:"hero-image"}}),g=-1),-1!==
g&&(a.captured=!0)):"hero-video"===a.data.type&&(u(),"click"!==a.type&&d.usePeekHover||f.selectGivenThumbnail(a.$declarativeParent,w))};x.register("resize",q)}})});
/* ******** */
(function(a,b,r){a.execute(function(){a.when("A","jQuery","a-popover","cf").register("burj-twister-utils",function(a,c,k){var e;return{getActivePopover:function(){e||(e=c("#twister").find("[id^=vodd-button-]"));var f=null;e.length&&e.each(function(c,a){var b=a.id.split("vodd-button-");if((b=k.get("vodd-popover-"+b[b.length-1]))&&b.isActive())return f=b,!1});return f},getPageOffset:function(){var a,c;b.pageYOffset?(a=b.pageYOffset,c=b.pageXOffset):"CSS1Compat"===(document.compatMode||"")?(a=document.documentElement.scrollTop,
c=document.documentElement.scrollLeft):(a=document.body.scrollTop,c=document.body.scrollLeft);return{top:a,left:c}}}});a.when("A","jQuery","a-popover","burj-twister-utils","cf").execute(function(a,c,k,e){function f(){a.on.scroll(function(){var a=e.getActivePopover();if(a){var c=g.get(0).getBoundingClientRect(),b=a.$container.get(0).getBoundingClientRect();0>c.bottom&&0>b.bottom&&(a.attrs("originalFocus",null),a.hide())}})}function l(){var a=m.offset().top+m.height()-d.offset().top,b=d.height()-a;
c("#twisterOverlay").css({height:b+"px",top:a+"px"})}function n(){var a=document.createElement("div");a.id="twisterOverlay";c(a).addClass("twister-overlay").css({width:d.outerWidth()}).bind("touchend click",function(a){return!1});d.append(a)}function p(a,b){l();d.addClass("twister-popover-visible");c("#twisterOverlay").show()}function q(a,b){d.removeClass("twister-popover-visible");c("#twisterOverlay").hide()}var d=c("#actionPanel"),m=d.find("#twister_feature_div"),g=c(".burj #twister"),h;(function(){if(g.length&&
(h=g.find("[id^=vodd-button-]"),h.length)){n();var d=function(){e.getActivePopover()&&l()};a.on("a:pageUpdate",d);c(b).resize(d);h.bind("TwisterVODD.showPopup",p).bind("TwisterVODD.hidePopup",q);f()}})()})})})(function(){var a=window.AmazonUIPageJS||window.P,b=a._namespace||a.attributeErrors;return b?b("DetailPageTwisterDPv2Assets"):a}(),window);
/* ******** */
(function(q){var h=window.AmazonUIPageJS||window.P,y=h._namespace||h.attributeErrors,g=y?y("VasUpsellWidgetAsset",""):h;g.guardFatal?g.guardFatal(q)(g,window):g.execute(function(){q(g,window)})})(function(q,h,y){q.when("A","ready").register("vas-metrics-publisher",function(g){var d=g.$,a=function(b,a){if(b&&32>=b.length){var c="?",f="";a&&(a.additionalRequestData&&(f+=c+"additionalRequestData\x3d"+JSON.stringify(a.additionalRequestData),c="\x26"),a.productAsin&&(f+=c+"pageAsin\x3d"+a.productAsin,
c="\x26"),a.upsellAsin&&(f+=c+"pageTypeId\x3d"+a.upsellAsin,c="\x26"),a.pageType&&(f+=c+"pageType\x3d"+a.pageType,c="\x26"),a.subPageType&&(f+=c+"subPageType\x3d"+a.subPageType,c="\x26"),f=a.hitType?f+(c+"hitType\x3d"+a.hitType):f+(c+"hitType\x3dpopUp"),c="\x26",a.merchantId&&(f+=c+"merchantId\x3d"+a.merchantId,c="\x26"),a.upsellAsinPrice&&(f+=c+"sdpMinimumPriceNew\x3d"+a.upsellAsinPrice,c="\x26"),a.productAsinPrice&&(f+=c+"merchantAsinPrice\x3d"+a.productAsinPrice));d.get("/gp/ls/impress.html/ref\x3d"+
b+f)}},f=function(a,c,d){var f="";a&&c&&d&&(f=a+"_"+c+"_"+d);return f},c=function(a,c,d,f){var k="";a&&c&&d&&f&&(k=a+"_"+c+"_"+d+"_"+f);return k},l=function(a,c){"undefined"!==typeof h.ue&&"undefined"!==typeof h.ue.count&&("undefined"===typeof c?h.ue.count(a,1):h.ue.count(a,c))};return{metric:function(a){"undefined"!==typeof h.ue&&"undefined"!==h.ue.count&&h.ue.count("vas_ppd_"+a,1)},increaseMetricBy:function(a,c){"undefined"!==typeof h.ue&&"undefined"!==h.ue.count&&h.ue.count("vas_ppd_"+a,c)},log:function(a){h.ueLogError&&
h.ueLogError(a,{logLevel:"ERROR",attribution:"ppd-bundles"})},logRefTag:function(a,c,f,g,k,n,r,x,w){if(a){var t="?",u="";c&&(u+=t+"pageType\x3d"+c,t="\x26");f&&(u+=t+"subPageType\x3d"+f,t="\x26");g&&(u+=t+"pageTypeId\x3d"+g,t="\x26");u=k?u+(t+"hitType\x3d"+k):u+(t+"hitType\x3dpopUp");t="\x26";n&&(u+=t+"merchantId\x3d"+n,t="\x26");r&&(u+=t+"pageAsin\x3d"+r,t="\x26");x&&(u+=t+"sdpMinimumPriceNew\x3d"+x,t="\x26");w&&(u+=t+"merchantAsinPrice\x3d"+w);d.get("/gp/ls/impress.html/ref\x3d"+a+u);"undefined"!==
typeof h.ue&&"undefined"!==h.ue.count&&h.ue.count(a,1)}},logUeMetricIncreaseCount:l,getCSMName:f,getRefMarker:c,increaseCSMCounterBy:function(a,c){a&&"undefined"!==typeof h.ue&&"undefined"!==typeof h.ue.count&&h.ue.count(a,(h.ue.count(a)||0)+c)},logCSMCounter:function(a){a&&"undefined"!==typeof h.ue&&"undefined"!==typeof h.ue.count&&h.ue.count(a,(h.ue.count(a)||0)+1)},createCSMNameAndLog:function(a,c,d){a=this.getCSMName(a,c,d);this.logCSMCounter(a);return a},logHit:a,createRefMarkerAndLog:function(a,
c,d,f,k){a=this.getRefMarker(a,c,d,f);this.logHit(a,k);return a},logReftagAndCSMMetricForWidgetAction:function(b,d,g,p,k){var n=f(p,d,b);l(n);b=c(p,g,d,b);a(b,k)},hitParameterKeys:{upsellAsin:"upsellAsin",productAsin:"productAsin",pageType:"pageType",subPageType:"subPageType",upsellAsinPrice:"upsellAsinPrice",productAsinPrice:"productAsinPrice",hitType:"hitType",additionalRequestData:"additionalRequestData",merchantId:"merchantId"},CSMActionTypes:{glanceView:"gv",addToCart:"att",serviceIncluded:"incl",
serviceNotIncluded:"cncl",expandBulletPoints:"expbp",collapseBulletPoints:"colbp",redirect:"redir",skip:"skip",escape:"escape"},RefmarkerActionTypes:{glanceView:"gv",addToCart:"att",serviceIncluded:"incl",serviceNotIncluded:"cncl",expandBulletPoints:"expbp",collapseBulletPoints:"colbp",redirect:"redir"}}});q.register("vas-utilities",function(g){return{generateUUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(d){var a=16*Math.random()|0;return("x"===d?a:a&3|8).toString(16)})},
getPriceValue:function(d){var a=/[+-]?\d+(\.\d+)?/g;if(null!==d.match(a))return d.match(a).map(function(a){return parseFloat(a)})[0]},validateZipCode:function(d,a){return(new RegExp(a.val())).test(d)?!0:!1}}});q.when("A","vas-common-settings","vas-metrics-publisher","vas-mobile-config").register("vas-metric-utils",function(g,d,a,f){var c=f.mobileMetricConstants;return{createHitParameters:function(c){var b=d.getSetting("widgetCommonVM"),e=d.getSetting("winningWidgetVM"),f={},g={};g[c.additionalRequestDataKeys.zipCode]=
b.zipCode;f[a.hitParameterKeys.upsellAsin]=b.serviceAsin;f[a.hitParameterKeys.productAsin]=b.productAsin;f[a.hitParameterKeys.merchantId]=b.merchantId;f[a.hitParameterKeys.productAsinPrice]=b.buyboxPrice;f[a.hitParameterKeys.upsellAsinPrice]=e.winningServiceMinPrice;f[a.hitParameterKeys.pageType]=c.hitRecordConstants.pageType;f[a.hitParameterKeys.subPageType]=c.hitRecordConstants.subPageType;f[a.hitParameterKeys.additionalRequestData]=g;return f},getMobileMetricConstants:function(){d.getSetting("widgetCommonVM").isApp?
(c.metricPrefixes.widget="mobiletwister"===d.getSetting("winningWidgetVM").winningWidgetName?"aft":"aftxl",c.refmarkerPrefixes.widget="mobiletwister"===d.getSetting("winningWidgetVM").winningWidgetName?"aft":"aftxl"):(c.metricPrefixes.widget="mobiletwister"===d.getSetting("winningWidgetVM").winningWidgetName?"mft":"mftxl",c.refmarkerPrefixes.widget="mobiletwister"===d.getSetting("winningWidgetVM").winningWidgetName?"mft":"mftxl");return c}}});q.when("A","vas-metrics-publisher","ready").register("vas-atc-tracker",
function(g,d){var a=g.$,f=!1,c=null,l=null,b=0,e=null,m=null,p=!1,k,n=function(){return 0===b?!1:!0},r=function(a,b){"undefined"!==typeof b?d.logUeMetricIncreaseCount(a+(k.showSTSServiceInterstitial||k.isParentServiceAsin?"_sts":""),b):d.logUeMetricIncreaseCount(a+(k.showSTSServiceInterstitial||k.isParentServiceAsin?"_sts":""))},x=function(){if(f){var a=c;null!==a&&(a=((new Date).getTime()-a)/1E3,r("vas_si_hijack_interval_time",a),300<a&&d.logRefTag("vas_si_hijack_interval_time_5M_"+k.productAsin+
"_"+k.serviceAsin))}},w=function(){if(n()){var a=l;null!==a&&(a=((new Date).getTime()-a)/1E3,r("vas_si_dismissal_interval_time",a),30<a&&d.logRefTag("vas_si_hijack_dismissal_time_30S_"+k.productAsin+"_"+k.serviceAsin))}},t=function(){if(!p&&(p=!0,f)){r("vas_si_hijack_unload");d.logRefTag("vas_si_hijack_unload"+k.productAsin+"_"+k.serviceAsin);var a=c;null!==a&&(a=(new Date).getTime()-a,r("vas_si_hijack_unload_total_time",a))}return!0};a(h).unbind("beforeunload");a(h).bind("beforeunload",t);a(h).unbind("unload");
a(h).bind("unload",t);return{isHijacked:function(){return f},setHijacked:function(){f||(f=!0,r("vas_si_atcHijack"),d.logRefTag("vas_si_atcHijack"),c=(new Date).getTime(),e=h.setInterval(x,6E4),m=h.setInterval(w,2E4))},unsetHijacked:function(){if(f){if(null!==c){var a=((new Date).getTime()-c)/1E3;r("vas_si_hijack_total_time",a)}f=!1;r("vas_si_atcUnHijack");d.logRefTag("vas_si_atcUnHijack");c=null;b=0;l=null;null!==e&&(h.clearInterval(e),e=null);null!==m&&(h.clearInterval(m),m=null)}},getHijackTime:function(){return c},
logHijackMetricOnPageUnload:t,setHijackDismissalAttempt:function(){0===b&&(l=(new Date).getTime());b++;1<b?r("vas_si_dismissal_count",1):r("vas_si_dismissal_count",0)},getDismissalTime:function(){return l},isDismissalAttempted:n,setWidgetMetaData:function(a){k=a},logMetric:r}});q.when("A","vas-metrics-publisher","vas-atc-tracker","ready").register("vas-atc-helper",function(g,d,a){var f=g.$,c,l=function(){a.logMetric("vas_si_atcClick_returnFalse");return!1},b=function(){a.logMetric("vas_si_safeATC_click");
c.atcEventInProgress||e()},e=function(){a.logMetric("vas_si_forceSafeATC_click");c.isMBCClick&&c.atcButton.bind("click",function(){var a=f(this).find("a")[0];a&&a.href&&(h.location.href=a.href)});c.atcButton.unbind("click.lsatc").click().bind("click.lsatc",l)},m=function(){return{"session-id":f("#session-id").attr("value"),ASIN:c.productAsin,offerListingID:f("#offerListingID").attr("value"),isMerchantExclusive:f("#isMerchantExclusive").attr("value"),merchantID:f("#merchantID").attr("value"),isAddon:f("#isAddon").attr("value"),
nodeID:f("#nodeID").attr("value"),sellingCustomerID:f("#sellingCustomerID").attr("value"),qid:f("#qid").attr("value"),sr:f("#sr").attr("value"),storeID:f("#storeID").attr("value"),tagActionCode:f("#tagActionCode").attr("value"),viewID:f("#viewID").attr("value"),rsid:f("#rsid").attr("value"),sourceCustomerOrgListID:f("#sourceCustomerOrgListID").attr("value"),sourceCustomerOrgListItemID:f("#sourceCustomerOrgListItemID").attr("value"),wlPopCommand:"",quantity:f("#quantity").attr("value"),"submit.add-to-cart":"Submit+Query"}},
p=function(b,d,e){document.body.style.cursor="default";a.logMetric(e,0);if(c.productAsin&&c.serviceAsin){e={dsc:1,productASIN:c.productAsin};var k=c.zipCode,g="";b=f(b);if(b=(b=(b=(b=(b=f(".giftableItem, .nonGiftableItem",b))&&b[0])&&b.outerHTML)&&f(b))&&b.attr("itemid"))e.itemID=b,e.newItems=b+",1",e.isHUC="true";k&&(e.area=k);e=JSON.stringify(e).replace(/"/g,"'");g="?vas\x3d"+encodeURIComponent(e)+"\x26psc\x3d1";a.unsetHijacked();h.location.href="/gp/product/"+c.serviceAsin+"/ref\x3d"+d+g;a.logMetric("vas_siatc_sdp_redirect")}else a.logMetric("vas_siatc_huc_redirect"),
a.unsetHijacked(),h.location.href="/gp/cart/view.html";return!1},k=function(b){a.logMetric(b);document.body.style.cursor="default";e();return!1},n=function(){var a,b,d,e;c.isMBCClick&&"undefined"!==typeof c.offerListingID&&(d=c.atcButton.find("a")[0])&&d.href&&(a=d.href,c.showSIATC&&(b=2,(e=a.match(/itemCount=([0-9]+)/i))&&e[1]&&(e=parseInt(e[1],10))&&(b=e+1),a=a.replace(/itemCount=([0-9]+)/i,"itemCount\x3d"+b)+"\x26offeringID."+b+"\x3d"+c.offerListingID,d.href=a));return a},r=function(){var a={};
a.upsellAsin=c.serviceAsin;a.offerlistingId=c.offerListingID;a.merchantId=c.merchantId;a.storeId=c.storeId;a.merchantCustomerId=c.merchantCustomerId;a.isMerchantExclusive=c.exclusiveMerchant;g.trigger("vas:add-service-asin-buybox-event",a)};return{addServiceToCart:function(d){var e=n();if(c.showSIATC)r(),a.logMetric("vas_siatc_service_added"),b();else{if(c.atcEventInProgress)return!1;c.atcEventInProgress=!0;a.logMetric("vas_si_addProduct");var g=function(a){p(a,d,"vas_siatc_sdp_redirect_ajaxFail")},
l=function(a){k("vas_siatc_sdp_redirect_ajaxFail")};c.isMBCClick?f.get(e).done(g).fail(l):(e=m(),f.post("/gp/product/handle-buy-box/ref\x3dvas_dphbb_"+c.productAsin+"_"+c.serviceAsin,e).done(g).fail(l));document.body.style.cursor="progress"}return!1},addProductToCartAndGoToSDP:function(a){var b,d=function(b){p(b,a,"vas_siatc_handle_buybox_ajax_fail")},e=function(a){k("vas_siatc_handle_buybox_ajax_fail")};if(c.isMBCClick){var g=c.atcButton.find("a")[0];g&&g.href&&(b=g.href);f.get(b).done(d).fail(e)}else b=
m(),f.post("/gp/product/handle-buy-box/ref\x3dvas_dphbb_"+c.productAsin+"_"+c.serviceAsin,b).done(d).fail(e);document.body.style.cursor="progress";return!1},lsATCHandlerSuppressATC:l,safeATCClick:b,forceSafeATCClick:e,setWidgetMetaData:function(a){c=a}}});q.when("A","vas-metrics-publisher","vas-utilities","vas-common-settings").register("vas-core-buybox",function(g,d,a,f){var c=g.$,l=function(a,b){c("#mbc .a-button").each(function(){var d=c(this),e=d.text(),d=d.find("a")[0],f,g;if(e&&e.match(/cart/i)&&
d&&d.href){var w=d.href;(e=w.match(/itemCount=([0-9]+)/i))&&e[1]&&((g=parseInt(e[1],10))&&"add"===a?f=g+1:g&&"remove"===a&&(f=g-1));f&&(w=w.replace(/itemCount=([0-9]+)/i,"itemCount\x3d"+f),"add"===a&&b?w+="\x26offeringID."+f+"\x3d"+b:"remove"===a&&(w=w.replace(new RegExp("\x26offeringID."+g+"\x3d[^\x26]*"),"")),d.href=w)}})},b=function(a){var b=f.getSetting("widgetCommonVM");return(b.populateMBCATC||b.showFakeTwisterBundles||b.showEnhancedUpsellBundle)&&!a},e={addServiceAsinBuybox:function(e){try{var g=
c("#addToCart"),k=g.find("input[name^\x3d'offeringID']").length+1,n=f.getSetting("widgetCommonVM").showUnifiedGuruExperience,r=a.generateUUID(),x=k+1,w=f.getSetting("widgetCommonVM").shouldAddItemAssociation,t=f.getSetting("widgetCommonVM").isShipToStore,u=g.find('input[name\x3d"itemCount"]');"undefined"!==typeof e.offerlistingId&&(g.append('\x3cinput type\x3d"hidden" class\x3d"atcFormServiceAsinData" id\x3d"quantity.'+k+'" name\x3d"quantity.'+k+'" value\x3d"1" /\x3e\x3cinput type\x3d"hidden" class\x3d"atcFormServiceAsinData" id\x3d"asin.'+
k+'" name\x3d"asin.'+k+'" value\x3d"'+e.upsellAsin+'" /\x3e\x3cinput type\x3d"hidden" class\x3d"atcFormServiceAsinData" id\x3d"offeringID.'+k+'" name\x3d"offeringID.'+k+'" value\x3d"'+e.offerlistingId+'" /\x3e\x3cinput type\x3d"hidden" class\x3d"atcFormServiceAsinData" id\x3d"merchantID.'+k+'" name\x3d"merchantID.'+k+'" value\x3d"'+e.merchantId+'" /\x3e\x3cinput type\x3d"hidden" class\x3d"atcFormServiceAsinData" id\x3d"sellingCustomerID.'+k+'" name\x3d"sellingCustomerID.'+k+'" value\x3d"'+e.merchantCustomerId+
'" /\x3e\x3cinput type\x3d"hidden" class\x3d"atcFormServiceAsinData" id\x3d"isMerchantExclusive.'+k+'" name\x3d"isMerchantExclusive.'+k+'" value\x3d"'+e.isMerchantExclusive+'" /\x3e\x3cinput type\x3d"hidden" class\x3d"atcFormServiceAsinData" id\x3d"storeID.'+k+'" name\x3d"storeID.'+k+'" value\x3d"'+e.storeId+'" /\x3e'),(t||w||n)&&g.append('\x3cinput type\x3d"hidden" class\x3d"atcFormServiceAsinData" id\x3d"custom-name.'+x+'.1" name\x3d"custom-name.'+x+'.1" value\x3d"itemAssoc" /\x3e\x3cinput type\x3d"hidden" class\x3d"atcFormServiceAsinData" id\x3d"custom-value.'+
x+'.1" name\x3d"custom-value.'+x+'.1" value\x3d"'+r+'" /\x3e\x3cinput type\x3d"hidden" class\x3d"atcFormServiceAsinData" id\x3d"custom-name.1.1" name\x3d"custom-name.1.1" value\x3d"itemAssoc" /\x3e\x3cinput type\x3d"hidden" class\x3d"atcFormServiceAsinData" id\x3d"custom-value.1.1" name\x3d"custom-value.1.1" value\x3d"'+r+'" /\x3e\x3cinput type\x3d"hidden" class\x3d"atcFormServiceAsinData" id\x3d"custom-name.1.2" name\x3d"custom-name.1.2" value\x3d"UNIQ-itemAssoc" /\x3e\x3cinput type\x3d"hidden" class\x3d"atcFormServiceAsinData" id\x3d"custom-value.1.2" name\x3d"custom-value.1.2" value\x3d"'+
r+'" /\x3e'),0===u.length?g.append('\x3cinput type\x3d"hidden" name\x3d"itemCount" value\x3d"'+k+'"\x3e'):u[0].value=k,b(n)&&l("add",e.offerlistingId));d.increaseMetricBy("a2cFormAppend_fail",0);d.metric("a2cFormAppend_success")}catch(q){d.increaseMetricBy("a2cFormAppend_success",0),d.metric("a2cFormAppend_fail"),d.log(q)}},removeServiceAsinBuybox:function(){try{c(".atcFormServiceAsinData").remove();var a=c("#addToCart"),e=f.getSetting("widgetCommonVM").showUnifiedGuruExperience,g=a.find('input[name\x3d"itemCount"]');
0!==g.length&&1<=g[0].value&&--g[0].value;b(e)&&l("remove");d.increaseMetricBy("a2cFormRemove_fail",0);d.metric("a2cFormRemove_success")}catch(n){d.increaseMetricBy("a2cFormRemove_success",0),d.metric("a2cFormRemove_fail"),d.log(n)}},addServiceAsinToBuyBack:function(a){var b=c("#buyBackBuyNow");b.length&&b.append('\x3cinput type\x3d"hidden" class\x3d"atcFormServiceAsinData" id\x3d"vasQuantity" name\x3d"vasQuantity" value\x3d"1" /\x3e\x3cinput type\x3d"hidden" class\x3d"atcFormServiceAsinData" id\x3d"vasAsin" name\x3d"vasAsin" value\x3d"'+
a.upsellAsin+'" /\x3e\x3cinput type\x3d"hidden" class\x3d"atcFormServiceAsinData" id\x3d"vasOfferingID" name\x3d"vasOfferingID" value\x3d"'+a.offerlistingId+'" /\x3e')}};return{registerBuyboxEventHandlers:function(){g.off("vas:add-service-asin-buybox-event");g.on("vas:add-service-asin-buybox-event",function(a){e.addServiceAsinBuybox(a)});g.off("vas:remove-service-asin-buybox-event");g.on("vas:remove-service-asin-buybox-event",function(){e.removeServiceAsinBuybox()});g.off("vas:add-service-asin-buyback-form-event");
g.on("vas:add-service-asin-buyback-form-event",function(a){e.addServiceAsinToBuyBack(a)})}}});q.when("A","vas-metrics-publisher","vas-common-settings","vas-atc-tracker","vas-atc-helper","vas-service-interstitial").register("vas-core-interstitial",function(g,d,a,f,c,l){var b=g.$,e,m,p=!1,k,n=function(){var a=b("#ppdb-add-service-checkbox");if(!p){f.setHijacked();b(document.body).undelegate("#mbc .a-button","click.lsatc");f.logMetric("vas_si_atcClick");p=!0;e.isMBCClick=!1;e.atcButton=b(this);var n=
e.atcButton.attr("id");if(n&&"add-to-cart-button"!==n&&(e.isMBCClick=!0,(n=e.atcButton.text())&&!n.match(/cart/i)))return document.body.style.cursor="default",c.safeATCClick(),!1;if(0<a.length&&a.is(":checked"))return a=!0===e.isUpsellCritical?"1":"0",n="vas_bdlppd_",e.isMBCClick&&(n+="mbc_"),d.logRefTag(n+"checked_atc_"+a+"_"+e.productAsin+"_"+e.serviceAsin),f.logMetric("vas_bdlppd_atc_click"),document.body.style.cursor="default",c.safeATCClick(),p?!0:!1;b(document.body).undelegate("#add-to-cart-button",
"click.lsatc");if(e.productAsin&&e.serviceAsin&&1===e.atcButton.length&&1===k.length){e.atcButton.bind("click.lsatc",c.lsATCHandlerSuppressATC);if(a=b.parseJSON(b("#vasServiceInterstitial").attr("data-a-modal"))){if(a={name:a.name,header:a.header},b("#vasServiceInterstitial").attr("data-a-modal",JSON.stringify(a)).click(),g.$(".a-popover-inner").addClass("pdp-service-modal-instance"),e.showSTSServiceInterstitial&&(a=e.selectedOfferFulfillmentType,(n=b("#"+(e.showSTSServiceInterstitial?"sts-":"")+
"pdp-service-siatc-modal-content"))&&n.length)){var r=n.find("."+a);r.length&&(n.find("."+e.selectedOfferFulfillmentType).addClass("vas-hidecomponent"),r.removeClass("vas-hidecomponent"),e.selectedOfferFulfillmentType=a)}}else c.safeATCClick();return!1}document.body.style.cursor="default";c.safeATCClick();return!1}},r=function(){k=b("#addToCart");k.submit(function(){f.unsetHijacked();return!0});e.hijackMBCATC&&(b(document).undelegate("#mbc .a-button","click.lsatc"),b(document.body).delegate("#mbc .a-button",
"click.lsatc",n),b.get("/gp/ls/impress.html/ref\x3dvas_mbc_ld_"+e.productAsin+"_"+e.serviceAsin));b(document).undelegate("#add-to-cart-button","click.lsatc");b(document.body).delegate("#add-to-cart-button","click.lsatc",n)};return{registerSIEventHandlers:function(){b(document.body).undelegate("add-to-cart-button","click.lsatc");var d;d="undefined"!==typeof a.getSetting("winningWidgetVM")?a.getSetting("widgetCommonVM").hijackATC:!1;d&&(e=a.getSetting("widgetCommonVM"),e.isShipToStoreAsinSelected="in_store"===
e.selectedOfferFulfillmentType,e.atcEventInProgress=!1,e.isMBCClick=!1,m=e.isWarrantyPresent,c.setWidgetMetaData(e),f.setWidgetMetaData(e),l.setWidgetMetaData(e),e.doRedirect&&null===document.getElementById("servicesInterstitial")&&!m&&(r(),l.registerSIEventHandlers()))}}});q.when("A","vas-metrics-publisher").register("vas-addUpsell-to-cart",function(g,d){return{addUpsell:function(a,f,c){g.ajax("/gp/product/handle-buy-box/",{method:"POST",params:{"session-id":c,"quantity.1":1,itemCount:1,"submit.add-to-cart":"Add to Cart",
"asin.1":a,"offeringID.1":f},success:function(){d.logUeMetricIncreaseCount("vas_addupsell_cart_success",1);d.logUeMetricIncreaseCount("vas_addupsell_cart_fail",0);g.trigger("vas:ldbb-upsell-added:desktop")},error:function(){d.logUeMetricIncreaseCount("vas_addupsell_cart_fail",1);d.logUeMetricIncreaseCount("vas_addupsell_cart_success",0)}})}}});q.register("vas-mobile-config",function(){return{mobileMetricConstants:{refmarkerPrefixes:{tenant:"vas"},hitRecordConstants:{pageType:"DetailPage",subPageType:"AddServices"},
additionalRequestDataKeys:{zipCode:"zip",isCritical:"crtcl"},metricPrefixes:{tenant:"vas"}}}});q.register("vas-widget-const",function(){return{COMMON:{DOM:{ADDSERVICE_SLOT:"addServices_feature_div",VAS_BUYBOX_SLOT:"vasBuyBox_feature_div"},EVENT_NAME:{NO_BUYBOX:"vas:metrics:nobuybox",NO_PRODUCT:"vas:metrics:noproduct"},REFTAG_PREFIX:{NO_BUYBOX:"vas_nobb_d_ppd_",WIDGET_SUPRESSED:"vas-ppd-widget-suppressed",WIDGET_NO_PRODUCT:"vas-ppd-widget-should-suppressed"}},METRICS:{WIDGET_NAMES:{TABLET_PPD_BUNDLES:"tabbdl"},
ACTION_NAMES:{GLANCE_VIEWS:"gv",ADD_TO_CART:"atc",REDIRECTION:"redir",UPSELL_INCLUDED:"incl",UPSELL_EXCLUDED:"cncl"},TENANT_NAMES:{VAS:"vas"}}}});q.register("vas-common-settings",function(g){var d={};return{getSetting:function(a){return a?d[a]:d},setSetting:function(a,f,c){a&&c?d[a][c]=f:a&&(d[a]=f)},clearSettings:function(){d={}}}});q.when("A","vas-metrics-publisher","vas-common-settings","vas-widget-const","ready").register("vas-common-metrics",function(g,d,a,f){g.off(f.COMMON.EVENT_NAME.NO_BUYBOX);
g.on(f.COMMON.EVENT_NAME.NO_BUYBOX,function(){var c=f.COMMON.REFTAG_PREFIX.NO_BUYBOX,g=a.getSetting("widgetCommonVM").productAsin,b=a.getSetting("widgetCommonVM").zipCode;d.logRefTag(c+g+"_"+b,"LocalServicesWidget")});g.off(f.COMMON.EVENT_NAME.NO_PRODUCT);g.on(f.COMMON.EVENT_NAME.NO_PRODUCT,function(){var c=a.getSetting("widgetCommonVM").shouldSuppressWidget,g=a.getSetting("widgetCommonVM").isProductAvailable,b;c?b=f.COMMON.REFTAG_PREFIX.WIDGET_SUPRESSED:g||(b=f.COMMON.REFTAG_PREFIX.WIDGET_NO_PRODUCT);
d.logRefTag(b,"LocalServicesWidget")})});q.when("A","vas-common-settings","vas-core-buybox","vas-core-interstitial","vas-widget-const","attach-to-ldbb","ready").register("vas-widgets",function(g,d,a,f,c,l){var b=g.$,e=function(){d.clearSettings();var a,e;g.each(b("#"+c.COMMON.DOM.ADDSERVICE_SLOT).find("[data-a-state]"),function(c,f){e=g.parseJSON(b(c).attr("data-a-state")).key;"vas-common-vm"===e?(a=g.parseJSON(b(c).html()),d.setSetting("widgetCommonVM",a)):"vas-winning-widget-vm"===e&&(a=g.parseJSON(b(c).html()),
d.setSetting("winningWidgetVM",a))})};return{initialize:function(){e();a.registerBuyboxEventHandlers();f.registerSIEventHandlers();if("undefined"!==typeof d.getSetting("winningWidgetVM")){var b=d.getSetting("winningWidgetVM").winningWidgetName;g.trigger("vas:widgetname:"+b)}else g.trigger(c.COMMON.EVENT_NAME.NO_BUYBOX);g.trigger(c.COMMON.EVENT_NAME.NO_PRODUCT);l.attachToLdbb()}}});q.when("A","vas-common-settings").register("attach-to-ldbb",function(g,d){var a=g.$,f=function(){a(document.body).undelegate(".gb-btn-atc",
"click.attachServicesHandler");g.trigger("vas:ldbb-a2c-event:desktop")};return{attachToLdbb:function(){d.getSetting("widgetCommonVM").attachToLdbb&&(a(document.body).undelegate(".gb-btn-atc","click.attachServicesHandler"),a(document.body).delegate(".gb-btn-atc","click.attachServicesHandler",f))}}});q.register("vas-si-config",function(){return{siMetricConstants:{hitRecordConstants:{pageType:"DetailPage",subPageType:"AddServices"},additionalRequestDataKeys:{zipCode:"zip",isMBC:"mbc"},bsi_prefixes:{refmarkerPrefixes:{tenant:"vas",
widget:"dbsi"},metricPrefixes:{tenant:"vas",widget:"dbsi"}},rsi_prefixes:{refmarkerPrefixes:{tenant:"vas",widget:"drsi"},metricPrefixes:{tenant:"vas",widget:"drsi"}}}}});q.when("A","vas-metrics-publisher","vas-utilities","ready").register("vas-zipcode-helper",function(g,d,a){var f=g.$,c,l,b,e,m,p,k,n,r,x,w,t,u,q,h,F,G,y,L,H,v,D,z,E,J=function(a,b){"undefined"!==typeof b?d.logUeMetricIncreaseCount(a+(v.showSTSServiceInterstitial||v.isParentServiceAsin?"_sts":""),b):d.logUeMetricIncreaseCount(a+(v.showSTSServiceInterstitial||
v.isParentServiceAsin?"_sts":""))},M=function(){m.hide();G.hide();F.hide();t.addClass("a-button-disabled").prop("disabled",!0)},P=function(){M();n.hide();p.hide();r.show()};g.on("a:popover:show:VAS-SI-Zip-Update",function(a){E=a.popover});return{vasSIZipCodeUpdate:function(B,I){var K=B.bsi_prefixes.refmarkerPrefixes,Q=B.additionalRequestDataKeys,C=B.bsi_prefixes.metricPrefixes;d.createCSMNameAndLog(C.tenant,C.widget,"updateZip");var R=h.val();if(a.validateZipCode(R,y)){z=h.val();var N=v.zipCode,S=
"vas_sx_zc_"+N+"_"+z,O="undefined"!==typeof v.childServiceAsins?v.childServiceAsins:[v.serviceAsin];d.logRefTag(S);if(z===D)return!1;g.ajax("/gp/ls/vas-ajax-handlers/vas-zipcode-refresh.html",{method:"get",params:{asinlist:O.join(","),vasZipcode:z,clientName:"vasBuyableSiZipRefresh",includeMerchantAddress:v.showSTSServiceInterstitial},success:function(a){var h,A,y=!(f.isEmptyObject(a)||"1"===a.hasError);if(y)for(var B=0;B<O.length;B++)if(A=O[B],a[A]&&!h||!h.merchantId||v.showSTSServiceInterstitial&&
"in_store"===a[A].fulfillmentType)h=a[A],v.serviceAsin=A;A=f(".vas-siatc-zip");A.length&&A.text(z);if(!y||g.objectIsEmpty(a)||1===a.hasError||g.objectIsEmpty(a[v.serviceAsin])||1===a[v.serviceAsin].hasError)return P(),d.logRefTag("vas_sx_zaf_"+N+"_"+z),J("vas-si-atc-zip-ajaxFail"),d.createCSMNameAndLog(C.tenant,C.widget,"updateZipFail"),!1;g.objectIsEmpty(h.offerListingId)?(I.additionalRequestData[Q.zipCode]=z,d.createRefMarkerAndLog(K.tenant,v.mappingSet,K.widget,"zprfrsh0",I),M(),p.hide(),r.hide(),
k.length&&k.text(z),n.show(),v.showSTSServiceInterstitial&&L.hide(),d.logRefTag("vas_sx_zfl_"+N+"_"+z),J("vas-si-atc-zipchange-nooffer")):(I.additionalRequestData[Q.zipCode]=z,d.createRefMarkerAndLog(K.tenant,v.mappingSet,K.widget,"zprfrsh1",I),E&&E.hide(),a=h,v.offerListingID=a.offerListingId,v.isCBM=a.isCBM,v.merchantId=a.merchantId,v.merchantCustomerId=a.merchantCustomerId,v.exclusiveMerchant=a.isMerchantExclusive,v.storeId=a.storeId,v.isShipToStoreAsinSelected="in_store"===a.fulfillmentType,v.shouldAddItemAssociation=
v.isShipToStoreAsinSelected,a=h.isCBM,e.html(h.positiveRatingHtml),x.text(h.merchantName).prop("href",h.sellerReviewLink),c.html(h.price).className+="a-color-price",b.html(h.price).className+="a-color-price",a?(G.hide(),F.show(),u.hide(),q.show()):(F.hide(),G.show(),q.hide(),u.show()),g.objectIsEmpty(h.nextOfferPrice)||a?m.hide():(w.html(h.nextOfferPrice).className+="a-color-price",m.show()),n.hide(),p.hide(),t.removeClass("a-button-disabled").prop("disabled",!1),d.logRefTag(S),J("vas-si-atc-zipchange-offeravailable"),
h.fulfillmentType&&(a=h.fulfillmentType,l&&l.length&&(y=l.find("."+a),y.length&&(l.find("."+v.selectedOfferFulfillmentType).addClass("vas-hidecomponent"),y.removeClass("vas-hidecomponent"),v.selectedOfferFulfillmentType=a))),v.showSTSServiceInterstitial&&(L.show(),g.objectIsEmpty(h.merchantAddress)?H.hide():(H.text(h.merchantAddress.AddressLine1+", "+h.merchantAddress.City+", "+h.merchantAddress.StateOrRegion+" "+h.merchantAddress.PostalCode),H.show())));D=z},error:function(){D=z;P();d.createCSMNameAndLog(C.tenant,
C.widget,"updateZipFail");J("vas-si-atc-zip-ajaxFail");E&&E.hide()}})}else D=R,M(),r.hide(),n.hide(),p.show();return!1},setZipCodeValuesFromDOM:function(){c=f("#vas-siatc-bestoffer-obm");b=f("#vas-siatc-bestoffer-cbm");e=f("#vas-siatc-ratingandreview");m=f("#vas-si-atc-remainingoffers");p=f("#vas-siatc-invalidzip-message");k=f("#vas-siatc-nooffer-zip");n=f("#vas-siatc-offerunavailable-message");r=f("#vas-siatc-zip-ajaxfail-message");x=f("#vas-siatc-merchantname");w=f("#vas-si-atc-remainingoffer-price");
t=f("#btnVasModalContinue");u=f("#vas-siatc-howitworks-obm");q=f("#vas-siatc-howitworks-cbm");F=f("#vas-siatc-cbm-gridrow");G=f("#vas-siatc-obm-gridrow");h=f("#vas-siatc-zip-input");y=f("#vas-zipCodeValidationRegexString");v.showSTSServiceInterstitial&&(l=f("#sts-pdp-service-siatc-modal-content"),f("#vas-sts-zip-update-modal"),l&&l.length&&(L=l.find(".vas-si-merchant"),H=l.find(".vas-si-merchant-address")))},setWidgetMetaData:function(a){v=a;D=v.zipCode}}});q.when("A","vas-atc-helper","vas-zipcode-helper",
"vas-atc-tracker","vas-metrics-publisher","vas-si-config","ready").register("vas-service-interstitial",function(g,d,a,f,c,l){var b=g.$,e,m,p=l.siMetricConstants.hitRecordConstants,k,n,r=l.siMetricConstants.additionalRequestDataKeys,x={addProductToCartAndGoToSDP:function(a,b){c.createRefMarkerAndLog(k.tenant,e.mappingSet,k.widget,c.RefmarkerActionTypes.redirect,e.hitParameters);c.createCSMNameAndLog(n.tenant,n.widget,c.CSMActionTypes.redirect);f.setHijackDismissalAttempt();f.logMetric(a);var g;e.atcEventInProgress?
g=!0:(e.atcEventInProgress=!0,g=!1);if(!g)return d.addProductToCartAndGoToSDP(b),!1},triggerMetricsForPopoverShow:function(){f.logMetric("vas_si_show");var a=m+"show_"+e.serviceAsin;e.showSIATC?(f.logMetric("vas_buyable_si_show"),a=m+e.zipCode+"_"+e.merchantCustomerId):f.logMetric("vas_normal_si_show");c.createCSMNameAndLog(n.tenant,n.widget,c.CSMActionTypes.glanceView);c.createRefMarkerAndLog(k.tenant,e.mappingSet,k.widget,c.RefmarkerActionTypes.glanceView,e.hitParameters);c.logRefTag(a)},triggerMetricsForPopoverhide:function(){f.setHijackDismissalAttempt();
f.logMetric("vas_si_hide_click");c.createCSMNameAndLog(n.tenant,n.widget,c.CSMActionTypes.escape);var a=m+"x1_"+e.productAsin+"_"+e.serviceAsin;e.showSIATC&&(a=m+"no_"+e.productAsin+"_"+e.serviceAsin);c.logRefTag(a);c.createRefMarkerAndLog(k.tenant,e.mappingSet,k.widget,c.RefmarkerActionTypes.serviceNotIncluded,e.hitParameters);d.safeATCClick();return!1}};return{registerSIEventHandlers:function(){m="vas_si_";e.showSIATC&&(m="vas_sx_");e.isMBCClick&&(m+="mbc_");if(e.showSIATC){var r=b("#vas-siatc-zip-input");
a.setZipCodeValuesFromDOM();r.keyup(function(a){13===a.keyCode&&b("#vas-siatc-zip-update").click()});b(document).undelegate("#vas-siatc-zip-update","click.vas-siatc-zip-refresh");b(document).delegate("#vas-siatc-zip-update","click.vas-siatc-zip-refresh",function(b){a.vasSIZipCodeUpdate(l.siMetricConstants,e.hitParameters)});b(document).undelegate("#vas-si-moredetails","click.sdpredir");b(document).delegate("#vas-si-moredetails","click.sdpredir",function(a){x.addProductToCartAndGoToSDP("vas_siatc_see_more_details",
m+"sm_"+e.productAsin+"_"+e.serviceAsin)});b(document).undelegate("#vas-si-otheroffers","click.sdpredir");b(document).delegate("#vas-si-otheroffers","click.sdpredir",function(a){x.addProductToCartAndGoToSDP("vas_siatc_otherOffersclick",m+"so_"+e.productAsin+"_"+e.serviceAsin)});b(document).undelegate("#vas-si-estimate-SDP","click.sdpredir");b(document).delegate("#vas-si-estimate-SDP","click.sdpredir",function(a){x.addProductToCartAndGoToSDP("vas_siatc_priceclick",m+"p_"+e.productAsin+"_"+e.serviceAsin)})}b(document).undelegate("#btnVasModalSkip",
"click");b(document).delegate("#btnVasModalSkip","click",function(a){f.setHijackDismissalAttempt();f.logMetric("vas_si_skip_click");c.createCSMNameAndLog(n.tenant,n.widget,c.CSMActionTypes.skip);a=m+"x2_"+e.productAsin+"_"+e.serviceAsin;e.showSIATC&&(a=m+"no_"+e.productAsin+"_"+e.serviceAsin);c.logRefTag(a);c.createRefMarkerAndLog(k.tenant,e.mappingSet,k.widget,c.RefmarkerActionTypes.serviceNotIncluded,e.hitParameters);d.safeATCClick();return!1});b(document).undelegate("#btnVasModalContinue","click.pdpVasNext");
b(document).delegate("#btnVasModalContinue","click.pdpVasNext",function(a){f.setHijackDismissalAttempt();f.logMetric("vas_si_yes_click");a=m+"y1_"+e.productAsin+"_"+e.serviceAsin;var b,g;e.showSIATC?(a=m+"atc_"+e.productAsin+"_"+e.serviceAsin,b=c.CSMActionTypes.addToCart,g=c.RefmarkerActionTypes.addToCart):(b=c.CSMActionTypes.redirect,g=c.RefmarkerActionTypes.redirect);c.createRefMarkerAndLog(k.tenant,e.mappingSet,k.widget,g,e.hitParameters);c.createCSMNameAndLog(n.tenant,n.widget,b);d.addServiceToCart(a);
return!1});g.off("a:popover:hide:vasServiceInterstitial");g.on("a:popover:hide:vasServiceInterstitial",function(a){x.triggerMetricsForPopoverhide()});g.off("a:popover:afterShow:vasServiceInterstitial");g.on("a:popover:afterShow:vasServiceInterstitial",function(a){x.triggerMetricsForPopoverShow()});b("#buyableSIAsinRatingLink").unbind("click");b("#buyableSIAsinRatingLink").bind("click",function(){f.logMetric("vas_sx_sdp_rating_redirect");c.createRefMarkerAndLog(k.tenant,e.mappingSet,k.widget,c.RefmarkerActionTypes.redirect,
e.hitParameters);c.createCSMNameAndLog(n.tenant,n.widget,c.CSMActionTypes.redirect)});b("#siAsinRatingLink").unbind("click");b("#siAsinRatingLink").bind("click",function(){f.logMetric("vas_si_sdp_rating_redirect");c.createRefMarkerAndLog(k.tenant,e.mappingSet,k.widget,c.RefmarkerActionTypes.redirect,e.hitParameters);c.createCSMNameAndLog(n.tenant,n.widget,c.CSMActionTypes.redirect)})},setWidgetMetaData:function(b){e=b;a.setWidgetMetaData(b);e.showSIATC?(k=l.siMetricConstants.bsi_prefixes.refmarkerPrefixes,
n=l.siMetricConstants.bsi_prefixes.metricPrefixes):(k=l.siMetricConstants.rsi_prefixes.refmarkerPrefixes,n=l.siMetricConstants.rsi_prefixes.metricPrefixes);k.tenant=e.showSTSServiceInterstitial||e.isParentServiceAsin?"sts":"vas";n.tenant=e.showSTSServiceInterstitial||e.isParentServiceAsin?"sts":"vas";b=e;var d={},f={};f[r.zipCode]=e.zipCode;f[r.isMBC]=e.isMBCClick?1:0;d[c.hitParameterKeys.upsellAsin]=e.serviceAsin;d[c.hitParameterKeys.productAsin]=e.productAsin;d[c.hitParameterKeys.merchantId]=e.merchantCustomerId;
d[c.hitParameterKeys.pageType]=p.pageType;d[c.hitParameterKeys.subPageType]=p.subPageType;d[c.hitParameterKeys.additionalRequestData]=f;b.hitParameters=d}}});q.register("vas-twister-config",function(){return{vasTwisterMetricConstants:{refmarkerPrefixes:{tenant:"vas",widget:"dft"},hitRecordConstants:{pageType:"DetailPage",subPageType:"AddServices"},additionalRequestDataKeys:{zipCode:"zip",isPromo:"promo",isCritical:"crtcl"},metricPrefixes:{tenant:"vas",widget:"dft"}}}});q.when("A","vas-common-settings",
"vas-metrics-publisher","vas-twister-config","vas-metric-utils","ready").register("vas-twister-setting",function(g,d,a,f,c){var l=g.$,b={baseAsinMetaData:{},isUpsellCritical:"",hasPrecheckEnabled:""},e=f.vasTwisterMetricConstants.refmarkerPrefixes,m=f.vasTwisterMetricConstants.additionalRequestDataKeys,p=f.vasTwisterMetricConstants.metricPrefixes;return{getSettings:function(a){return"undefined"!==typeof a?b[a]:b},fetchTwisterSetting:function(){var k=l("#ppdb-add-service-checkbox");k.is(":checked")&&
k.prop("checked",!1);var k=d.getSetting("winningWidgetVM"),n=k.winningServicePriceWithPromotionApplied;b.baseAsinMetaData.upsellAsin=k.upsellAsin;b.upsellAsin=k.serviceAsinToOffer;b.baseAsinMetaData.offerlistingId=k.offerListingID;b.baseAsinMetaData.merchantId=k.merchantId;b.baseAsinMetaData.storeId=k.storeId;b.baseAsinMetaData.price=k.winningServiceMinPrice;b.baseAsinMetaData.merchantCustomerId=k.merchantCustomerId;b.baseAsinMetaData.isMerchantExclusive=k.exclusiveMerchant;b.isUpsellCritical=k.isUpsellCritical;
b.hasPrecheckEnabled=k.hasPrecheckEnabled;b.isPromoPriceDisplayed=!g.objectIsEmpty(l.trim(n));b.productAsin=d.getSetting("widgetCommonVM").productAsin;b.zipCode=d.getSetting("widgetCommonVM").zipCode;b.buyboxPrice=d.getSetting("widgetCommonVM").buyboxPrice;b.mappingSet=d.getSetting("widgetCommonVM").mappingSet;b.sessionId=d.getSetting("widgetCommonVM").sessionId;b.vasTwisterMetricConstants=f.vasTwisterMetricConstants;b.hitParameters=c.createHitParameters(b.vasTwisterMetricConstants);k=b.hitParameters[a.hitParameterKeys.additionalRequestData];
k[m.isPromo]=b.isPromoPriceDisplayed;k[m.isCritical]=b.isUpsellCritical;b.hitParameters[a.hitParameterKeys.additionalRequestData]=k;var k=b.upsellAsin,n=b.productAsin,r=b.baseAsinMetaData.price,x=b.baseAsinMetaData.merchantId,w="vas_bdlppd_fake_twister_"+(!0===b.isUpsellCritical?"1":"0")+"_a_"+b.zipCode;a.createCSMNameAndLog(p.tenant,p.widget,a.CSMActionTypes.glanceView);a.createRefMarkerAndLog(e.tenant,b.mappingSet,e.widget,a.RefmarkerActionTypes.glanceView,b.hitParameters);a.metric("vas_bdlppd_fake_twister_");
a.logRefTag(w,"LocalServicesWidget","Impression",k,"popUp",x,n,r,b.buyboxPrice)},logTwisterInteractionReftag:function(c){var d=!0===b.isUpsellCritical?"1":"0",f=b.upsellAsin,g=b.productAsin,m=b.baseAsinMetaData.price,l=b.baseAsinMetaData.merchantId,h="vas_bdlppd_fake_twister_";b.isPromoPriceDisplayed&&(h="vas_bdplppd_fake_twister_promo_");a.logRefTag(h+(c?"y":"n")+"_"+d+"_a","LocalServicesWidget","AddServiceCheck",f,"popUp",l,g,m);a.createCSMNameAndLog(p.tenant,p.widget,c?a.CSMActionTypes.serviceIncluded:
a.CSMActionTypes.serviceNotIncluded);a.createRefMarkerAndLog(e.tenant,b.mappingSet,e.widget,c?a.RefmarkerActionTypes.serviceIncluded:a.RefmarkerActionTypes.serviceNotIncluded,b.hitParameters)},logTwisterATCReftag:function(){var c=!0===b.isUpsellCritical?"1":"0",d="vas_bdlppd_fake_twister_atc_"+c,f=b.upsellAsin,g=b.productAsin,m=b.baseAsinMetaData.price,l=b.baseAsinMetaData.merchantId;b.isPromoPriceDisplayed&&(d="vas_bdlppd_fake_twister_atc_promo_"+c);a.createCSMNameAndLog(p.tenant,p.widget,a.CSMActionTypes.addToCart);
a.logRefTag(d,"LocalServicesWidget","CartAdd",f,"popUp",l,g,m,b.buyboxPrice);a.createRefMarkerAndLog(e.tenant,b.mappingSet,e.widget,a.RefmarkerActionTypes.addToCart,b.hitParameters);return!0},logTwisterExpanderReftagAndMetric:function(c){var d=b.upsellAsin,f=b.productAsin,g=b.baseAsinMetaData.merchantId,m=c?"vas_bdlppd_fake_twister_sm_click":"vas_bdlppd_fake_twister_sl_click";a.createCSMNameAndLog(p.tenant,p.widget,c?a.CSMActionTypes.expandBulletPoints:a.CSMActionTypes.collapseBulletPoints);a.createRefMarkerAndLog(e.tenant,
b.mappingSet,e.widget,c?a.RefmarkerActionTypes.expandBulletPoints:a.RefmarkerActionTypes.collapseBulletPoints,b.hitParameters);a.increaseMetricBy(m,1);a.logRefTag(m,"LocalServicesWidget","SeeMoreClick",d,"popUp",g,f)},logTwisterSDPRedirectReftagAndMetric:function(){a.createCSMNameAndLog(p.tenant,p.widget,a.CSMActionTypes.redirect);a.createRefMarkerAndLog(e.tenant,b.mappingSet,e.widget,a.RefmarkerActionTypes.redirect,b.hitParameters)}}});q.when("A","vas-twister-setting","vas-metrics-publisher","vas-addUpsell-to-cart",
"ready").execute("vas-twister-controller",function(g,d,a,f){var c=g.$,l=function(){d.logTwisterATCReftag()},b=function(){c("#ppdb-add-service-checkbox").prop("checked",!0);var b=d.getSettings("baseAsinMetaData");try{g.trigger("vas:add-service-asin-buybox-event",b),c("#addToCart").unbind("submit.ppdBundles"),c("#addToCart").bind("submit.ppdBundles",l),a.increaseMetricBy("a2cFormAddEventSend_success",1),a.increaseMetricBy("a2cFormAddEventSend_fail",0)}catch(e){a.increaseMetricBy("a2cFormAddEventSend_success",
0),a.increaseMetricBy("a2cFormAddEventSend_fail",1),a.log(e)}c("#vas-fake-twister-include-section").find("i").hasClass("a-icon-extender-collapse")||c("#vas-fake-twister-include-section").click()},e={vasTwisterTrigger:function(e){c(".vas-ppd-swatch-item").removeClass("vas-ppd-swatch-select");e.addClass("vas-ppd-swatch-select");if("removeOffer"===e.attr("data-twister-action")){c("#ppdb-add-service-checkbox").prop("checked",!1);try{g.trigger("vas:remove-service-asin-buybox-event"),c("#addToCart").unbind("submit.ppdBundles"),
a.increaseMetricBy("a2cFormRemoveEventSend_fail",0),a.metric("a2cFormRemoveEventSend_success")}catch(f){a.increaseMetricBy("a2cFormRemoveEventSend_success",0),a.metric("a2cFormRemoveEventSend_fail"),a.log(f)}d.logTwisterInteractionReftag(!1)}else b(),d.logTwisterInteractionReftag(!0)},vasTwisterExpander:function(){c("#vas-fake-twister-include-section").find("i").hasClass("a-icon-extender-collapse")?d.logTwisterExpanderReftagAndMetric(!1):d.logTwisterExpanderReftagAndMetric(!0)}},m=function(){c(".vas-ppd-swatch-item").unbind("click");
c(".vas-ppd-swatch-item").bind("click",function(a){a=c(a.currentTarget);a.hasClass("vas-ppd-swatch-select")||e.vasTwisterTrigger(a)});c("#vas-fake-twister-include-section").unbind("click");c("#vas-fake-twister-include-section").bind("click",function(a){e.vasTwisterExpander()});c("#vas-fake-twiseter-detailLink").unbind("click");c("#vas-fake-twiseter-detailLink").bind("click",function(a){d.logTwisterSDPRedirectReftagAndMetric()})},p=function(){g.off("vas:ldbb-a2c-event:desktop");g.on("vas:ldbb-a2c-event:desktop",
function(){if(c("#ppdb-add-service-checkbox").is(":checked")){var a=d.getSettings("baseAsinMetaData");f.addUpsell(a.upsellAsin,a.offerlistingId,d.getSettings("sessionId"))}});g.off("vas:ldbb-upsell-added:desktop");g.on("vas:ldbb-upsell-added:desktop",function(){d.logTwisterATCReftag()})};g.off("vas:widgetname:twister");g.on("vas:widgetname:twister",function(){d.fetchTwisterSetting();d.getSettings("hasPrecheckEnabled")&&b();m();p()})});q.register("vas-twister-xl-config",function(){return{vasTwisterXLMetricConstants:{refmarkerPrefixes:{tenant:"vas",
widget:"dftxl"},hitRecordConstants:{pageType:"DetailPage",subPageType:"AddServices"},additionalRequestDataKeys:{zipCode:"zip"},metricPrefixes:{tenant:"vas",widget:"dftxl"}}}});q.when("A","vas-metrics-publisher","ready").register("vas-twister-page-refresh-common",function(g,d){var a=g.$,f=null,c=function(b){try{var c=b.pageRefreshData;b.featuresToRefresh.forEach(function(b){a(b).replaceWith(a(c).find(b).prop("outerHTML"))});g.trigger("vas:vas-twister-page-refresh-complete",b);d.increaseMetricBy("vasTwisterUpdateFeatures_success",
1);d.increaseMetricBy("vasTwisterUpdateFeatures_fail",0)}catch(f){g.trigger("vas:vas-twister-update-features-failed",b),d.increaseMetricBy("vasTwisterUpdateFeatures_success",0),d.increaseMetricBy("vasTwisterUpdateFeatures_fail",1),d.log(f)}},l=function(a){g.trigger("vas:vas-twister-page-refresh-start",a);null!==f&&f.abort();f=g.ajax(a.ajaxUrl,{method:"POST",timeout:"90000",params:{isVariationalParent:a.isVariationalParent},success:function(e){a.pageRefreshData=e;c(a);d.increaseMetricBy("vasTwisterPageRefresh_success",
1);d.increaseMetricBy("vasTwisterPageRefresh_fail",0)},error:function(){g.trigger("vas:vas-twister-page-refresh-failed",a);d.increaseMetricBy("vasTwisterPageRefresh_success",0);d.increaseMetricBy("vasTwisterPageRefresh_fail",1)}})};return{performPageRefresh:function(a){"undefined"===typeof a.pageRefreshData?l(a):c(a)},abortPageRefreshRequests:function(){null!==f&&f.abort()},restoreInitialData:function(b){try{var c=b.pageRefreshData;g.each(b.featuresToRefresh,function(b,d){"undefined"!==typeof c[b]&&
a(b).replaceWith(c[b])});d.increaseMetricBy("vasTwisterRestoreInitialData_success",1);d.increaseMetricBy("vasTwisterRestoreInitialData_fail",0);g.trigger("vas:vas-twister-initialdata-restore-complete")}catch(f){d.increaseMetricBy("vasTwisterRestoreInitialData_success",0),d.increaseMetricBy("vasTwisterRestoreInitialData_fail",1),d.log(f)}}}});q.when("A","vas-common-settings","vas-metrics-publisher","vas-twister-xl-config","vas-metric-utils","ready").register("vas-twister-xl-setting",function(g,d,a,
f,c){var l=g.$,b={vasTwisterOptions:{},baseAsinMetaData:{},productAsinAndOfferData:{},productPriceInTwisterVariation:{}},e=f.vasTwisterXLMetricConstants.refmarkerPrefixes,m=f.vasTwisterXLMetricConstants.metricPrefixes,p=function(){var c=b.productAsinAndOfferData.asin,d=b.productAsinAndOfferData.merchantId,f="vas_bdlppd_fake_twister_a_"+b.productAsinAndOfferData.zipCode;a.metric("vas_bdlppd_vas_twister_");a.logRefTag(f,"LocalServicesWidget","Impression","","popUp",d,c,"","");a.createCSMNameAndLog(m.tenant,
m.widget,a.CSMActionTypes.glanceView);a.createRefMarkerAndLog(e.tenant,b.mappingSet,e.widget,a.RefmarkerActionTypes.glanceView,b.hitParameters)},k=function(){try{var c=b.productAsinAndOfferData.asin,d=l("li[data-defaultasin\x3d"+c+"] .a-size-mini");d.length&&void 0===b.productPriceInTwisterVariation[c]&&(b.productPriceInTwisterVariation[c]=d.text());a.increaseMetricBy("saveInitialProductPriceContent_fail",0);a.metric("saveInitialProductPriceContent_success",1)}catch(e){a.createCSMNameAndLog(m.tenant,
m.widget,"saveInitialProductError"),a.increaseMetricBy("saveInitialProductPriceContent_success",0),a.metric("saveInitialProductPriceContent_fail",1),a.log(e)}};return{getProductAsinAndOfferData:function(a){return"undefined"!==typeof a?b.productAsinAndOfferData[a]:b.productAsinAndOfferData},getSettings:function(a){if("undefined"!==typeof a){a=b.vasTwisterOptions[a];var c={};c.asin=a.serviceAsin;c.offerlistingId=a.offerData.offerListingId;c.merchantId=a.offerData.merchantId;c.storeId=a.offerData.storeId;
c.price=a.offerData.price;c.merchantCustomerId=a.offerData.merchantCustomerId;c.isMerchantExclusive=a.offerData.isMerchantExclusive;return c}},getVasTwisterOption:function(a){if("undefined"!==typeof a)return b.vasTwisterOptions[a]},getInitialProductPriceContent:function(){return b.productPriceInTwisterVariation},setInitialWidgetSettings:function(){l("#ppdb-add-service-checkbox").is(":checked")&&l("#ppdb-add-service-checkbox").prop("checked",!1);var a=d.getSetting("winningWidgetVM"),e=a.vasTwisterOptions;
b.productAsinAndOfferData=a.vasUpsellProductAsinAndOfferData;b.mappingSet=d.getSetting("widgetCommonVM").mappingSet;b.buyboxPrice=d.getSetting("widgetCommonVM").buyboxPrice;g.each(e,function(a,c){b.vasTwisterOptions[c]=a});b.vasTwisterXLMetricConstants=f.vasTwisterXLMetricConstants;b.hitParameters=c.createHitParameters(b.vasTwisterXLMetricConstants);k();p()},logVasTwisterInteractionReftag:function(c,d){var f;c&&(f=b.vasTwisterOptions[d].offerData.price,a.logRefTag("vas_bdlppd_vas_twister_a","LocalServicesWidget",
"AddServiceCheck",d,"popUp",b.vasTwisterOptions[d].offerData.merchantId,b.productAsinAndOfferData.asin,f),b.hitParameters[a.hitParameterKeys.upsellAsin]=d,b.hitParameters[a.hitParameterKeys.upsellAsinPrice]=f);f=a.CSMActionTypes.serviceIncluded;a.createRefMarkerAndLog(e.tenant,b.mappingSet,e.widget,a.RefmarkerActionTypes.serviceIncluded,b.hitParameters);a.createCSMNameAndLog(m.tenant,m.widget,f)},logVasTwistetATCReftag:function(c){a.createCSMNameAndLog(m.tenant,m.widget,a.CSMActionTypes.addToCart);
var d=b.productAsinAndOfferData.asin,f=b.vasTwisterOptions[c].offerData.price,g=b.vasTwisterOptions[c].offerData.merchantId;b.hitParameters[a.hitParameterKeys.upsellAsin]=c;b.hitParameters[a.hitParameterKeys.upsellAsinPrice]=f;a.createRefMarkerAndLog(e.tenant,b.mappingSet,e.widget,a.RefmarkerActionTypes.addToCart,b.hitParameters);a.logRefTag("vas_bdlppd_vas_twister_atc_","LocalServicesWidget","CartAdd",c,"popUp",g,d,f,"${buybox.priceViewModel.buyingPrice}");return!0},logTwisterExpanderReftagAndMetric:function(c,
d){var f=b.vasTwisterOptions[d].offerData.price;a.createCSMNameAndLog(m.tenant,m.widget,c?a.CSMActionTypes.expandBulletPoints:a.CSMActionTypes.collapseBulletPoints);b.hitParameters[a.hitParameterKeys.upsellAsin]=d;b.hitParameters[a.hitParameterKeys.upsellAsinPrice]=f;a.createRefMarkerAndLog(e.tenant,b.mappingSet,e.widget,c?a.RefmarkerActionTypes.expandBulletPoints:a.RefmarkerActionTypes.collapseBulletPoints,b.hitParameters)},getVasTwisterXLMetricConstants:function(){return b.vasTwisterXLMetricConstants},
getHitParameters:function(){return b.hitParameters}}});q.when("A","vas-twister-page-refresh-common","vas-metrics-publisher","vas-twister-xl-setting","ready").register("vas-twister-page-refresh-webView",function(g,d,a,f){var c=g.$,l={},b={},e=function(a){a.pageRefreshData=l;d.restoreInitialData(a);p("1.0",a.featuresToRefresh)},m=function(){var a=f.getProductAsinAndOfferData().asin,b=c("#twister_feature_div"),d=c("li[data-defaultasin\x3d"+a+"]"),a=c("li[data-defaultasin\x3d"+a+"] .a-size-mini"),e=c("#priceblock_ourprice"),
g=c("#priceblock_saleprice");0>=b.length||0>=d.length||0>=a.length||(e.length?a.text(e.text()):g.length?a.text(g.text()):a.text(""))},p=function(a,b){g.each(b,function(b,d){c(b).css("opacity",a)})},k=function(){try{var b=f.getInitialProductPriceContent();g.each(b,function(a,b){var d=c("li[data-defaultasin\x3d"+b+"] .a-size-mini");d.length&&d.text(a)});a.increaseMetricBy("restoreInitialPriceInProductTwister_fail",0);a.metric("restoreInitialPriceInProductTwister_success",1)}catch(d){a.increaseMetricBy("restoreInitialPriceInProductTwister_success",
0),a.metric("restoreInitialPriceInProductTwister_fail",1),a.log(d)}};g.off("vas:vas-twister-page-refresh-start");g.on("vas:vas-twister-page-refresh-start",function(a){p("0.5",a.featuresToRefresh)});g.off("vas:vas-twister-page-refresh-complete");g.on("vas:vas-twister-page-refresh-complete",function(a){b[a.merchantId+a.asin]=a.pageRefreshData;m();p("1.0",a.featuresToRefresh);g.trigger("vas:twister-update-widgets","hide");g.trigger("vas:add-asin-offer-data-to-cart",a.svcAsin)});g.off("vas:vas-twister-page-refresh-failed");
g.on("vas:vas-twister-page-refresh-failed",function(a){p("1.0",a.featuresToRefresh)});g.off("vas:vas-twister-update-features-failed");g.on("vas:vas-twister-update-features-failed",function(a){e(a.featuresToRefresh);p("1.0",a.featuresToRefresh)});g.off("vas:vas-twister-initialdata-restore-complete");g.on("vas:vas-twister-initialdata-restore-complete",function(){k();g.trigger("vas:remove-asin-offer-data-to-cart");g.trigger("vas:twister-update-widgets","show")});g.off("vas:twister-update-widgets");g.on("vas:twister-update-widgets",
function(a){var b=c("#dpFastTrack_feature_div"),d=c("#moreBuyingChoices_feature_div");0<b.length&&("show"===a?b.show():b.hide());0<d.length&&("show"===a?d.show():d.hide())});return{setInitialFeaturesData:function(a){g.each(a,function(a,b){l[a]=c(a).prop("outerHTML")});g.trigger("vas:twister-update-widgets","show")},performPageRefresh:function(a){a.ajaxUrl="/gp/product/"+a.asin+"?m\x3d"+a.merchantId;a.pageRefreshData=b[a.merchantId+a.asin];d.performPageRefresh(a)},abortPageRefreshRequests:function(){d.abortPageRefreshRequests()},
restoreInitialPriceInProductTwister:k,restoreInitialData:e,updatePriceInProductTwisterDesktop:m,hideOfferUpdateWidget:function(){c("#vas-twister-price-update-div").hide()},showOfferUpdateWidget:function(){c("#vas-twister-price-update-div").show()}}});q.when("A","vas-twister-xl-setting","vas-twister-page-refresh-webView","vas-metrics-publisher","ready").execute("vas-twister-xl-controller",function(g,d,a,f){var c=g.$,l="#buybox_feature_div #desktop_buybox #price_feature_div #unifiedPrice_feature_div #pmpux_feature_div #issuancePriceblockAmabot_feature_div #alternativeOfferEligibilityMessaging_feature_div #applicablePromotionList_feature_div #availability_feature_div #holidayDeliveryMessage_feature_div #dpFastTrack_feature_div #businessOnlyItem_feature_div #shipsFromSoldBy_feature_div #businessPricing_feature_div #smileEligibility_feature_div #holidayAvailabilityMessage_feature_div #moreBuyingChoices_feature_div".split(" "),
b=!1,e="",m="",p=function(){d.logVasTwistetATCReftag(m)},k=function(){try{g.trigger("vas:remove-service-asin-buybox-event"),c("#addToCart").unbind("submit.ppdBundles"),f.increaseMetricBy("a2cFormRemoveEventSend_fail",0),f.metric("a2cFormRemoveEventSend_success")}catch(a){f.increaseMetricBy("a2cFormRemoveEventSend_success",0),f.metric("a2cFormRemoveEventSend_fail"),f.log(a)}},n=function(a){try{g.trigger("vas:add-service-asin-buybox-event",a),c("#addToCart").bind("submit.ppdBundles",p),f.increaseMetricBy("a2cFormAddEventSend_success",
1),f.increaseMetricBy("a2cFormAddEventSend_fail",0)}catch(b){f.increaseMetricBy("a2cFormAddEventSend_success",0),f.increaseMetricBy("a2cFormAddEventSend_fail",1),f.log(b)}},r={vasTwisterExpander:function(a,b){c("#vas-fake-twister-includesection-"+a.attr("data-twister-svcAsin")).find("i").hasClass("a-icon-extender-collapse")?d.logTwisterExpanderReftagAndMetric(!1,b):d.logTwisterExpanderReftagAndMetric(!0,b)},ppdFakeTwisterTrigger:function(f){var p=f.attr("data-twister-svcAsin");if("undefined"===typeof p||
!0===d.getVasTwisterOption(p).isOfferAvailable)if(c(".vas-ppd-swatch-item").removeClass("vas-ppd-swatch-select"),f.addClass("vas-ppd-swatch-select"),c(".vas-twister-whatsincluded").hide(),c("#vas-twister-title").html(f.attr("data-twister-callToAction")),"removeOffer"===f.attr("data-twister-action")){a.abortPageRefreshRequests();c("#ppdb-add-service-checkbox").prop("checked",!1);m="undefined";if(e!==d.getProductAsinAndOfferData("merchantId")){var h={};h.featuresToRefresh=l;a.restoreInitialData(h);
e=d.getProductAsinAndOfferData("merchantId");a.showOfferUpdateWidget()}else a.hideOfferUpdateWidget();k();d.logVasTwisterInteractionReftag(!1,"ItemOnly");g.trigger("vas:twister-update-widgets","show")}else!1===b&&(a.setInitialFeaturesData(l),b=!0),c("#ppdb-add-service-checkbox").prop("checked",!0),k(),c("#vas-fake-twister-whatsincluded-"+f.attr("data-twister-svcAsin")).show(),c("#vas-fake-twister-includesection-"+f.attr("data-twister-svcAsin")).find("i").hasClass("a-icon-extender-collapse")||(c("#vas-fake-twister-includesection-"+
f.attr("data-twister-svcAsin")).unbind("click"),c("#vas-fake-twister-includesection-"+f.attr("data-twister-svcAsin")).bind("click",function(a){r.vasTwisterExpander(f,p)}),c("#vas-fake-twister-includesection-"+f.attr("data-twister-svcAsin")).click()),m=p,e!==d.getVasTwisterOption(p).offerData.merchantId?(h={},h.asin=d.getProductAsinAndOfferData("asin"),h.svcAsin=p,h.merchantId=d.getVasTwisterOption(p).offerData.merchantId,h.isVariationalParent=!1,h.featuresToRefresh=l,a.performPageRefresh(h),e=d.getVasTwisterOption(p).offerData.merchantId,
a.showOfferUpdateWidget()):(g.trigger("vas:twister-update-widgets","hide"),n(d.getSettings(f.attr("data-twister-svcAsin"))),a.hideOfferUpdateWidget()),d.logVasTwisterInteractionReftag(!0,p)}};g.off("vas:add-asin-offer-data-to-cart");g.on("vas:add-asin-offer-data-to-cart",function(a){n(d.getSettings(a))});g.off("vas:remove-asin-offer-data-to-cart");g.on("vas:remove-asin-offer-data-to-cart",function(){k()});var h=function(){c(".vas-ppd-swatch-item").unbind("click");c(".vas-ppd-swatch-item").bind("click",
function(a){a=c(a.currentTarget);a.hasClass("vas-ppd-swatch-select")||r.ppdFakeTwisterTrigger(a)})};g.off("vas:widgetname:twister_xl");g.on("vas:widgetname:twister_xl",function(){d.setInitialWidgetSettings();h();e=d.getProductAsinAndOfferData("merchantId");a.restoreInitialPriceInProductTwister()})});q.register("vas-enhanceppd-config",function(){return{enhancedPPDMetricConstants:{refmarkerPrefixes:{tenant:"vas",widget:"eppdb"},hitRecordConstants:{pageType:"DetailPage",subPageType:"AddServices"},additionalRequestDataKeys:{zipCode:"zip",
isCritical:"crtcl"},metricPrefixes:{tenant:"vas",widget:"eppdb"}}}});q.when("A","vas-common-settings","vas-metrics-publisher","vas-utilities","vas-enhanceppd-config","vas-metric-utils","ready").register("vas-enhanceppd-setting",function(g,d,a,f,c,l){var b={enhancePpdViewModel:{}},e=c.enhancedPPDMetricConstants.refmarkerPrefixes,m=c.enhancedPPDMetricConstants.metricPrefixes;return{getSettings:function(a){return b.hasOwnProperty(a)?b[a]:b},setSettings:function(a,c,d){a&&d?b[a][d]=c:a&&(b[a]=c)},fetchEnhancePpdSetting:function(){b.enhancePpdViewModel=
d.getSetting("winningWidgetVM");b.productAsin=d.getSetting("widgetCommonVM").productAsin;b.zipCode=d.getSetting("widgetCommonVM").zipCode;b.buyboxPrice=d.getSetting("widgetCommonVM").buyboxPrice;b.shouldIntegrateWithBuyback=d.getSetting("widgetCommonVM").buybackIntegration;b.isEnhanceUpsellPresence="undefined"===typeof b.enhancePpdViewModel.upsellAsinOfferData?!1:!0;b.sessionId=d.getSetting("widgetCommonVM").sessionId;b.mappingSet=d.getSetting("widgetCommonVM").mappingSet;b.enhancedPPDMetricConstants=
c.enhancedPPDMetricConstants;b.hitParameters=l.createHitParameters(c.enhancedPPDMetricConstants);var g,k=!0===b.enhancePpdViewModel.isUpsellCritical?"1":"0",n=b.enhancePpdViewModel.baseAsinOfferData.upsellAsin,h=b.enhancePpdViewModel.productAsin,q=f.getPriceValue(b.enhancePpdViewModel.winningServiceMinPrice),w=b.enhancePpdViewModel.baseAsinOfferData.merchantId,t=f.getPriceValue(b.buyboxPrice),u=b.zipCode;g=!1===typeof b.isEnhanceUpsellPresence?"vas_bdlppd_enh_":"vas_bdlppd_enh_upsell_";g=g+k+"_a_"+
u;a.logRefTag("vas_bdlppd_ld_"+k+"_a_"+u,"LocalServicesWidget","Impression",n,"popUp",w,h,q,t);a.logRefTag(g,"LocalServicesWidget","Impression",n,"popUp",w,h,q,t);k=b.isEnhanceUpsellPresence?"uppdb":m.widget;a.createCSMNameAndLog(m.tenant,k,a.CSMActionTypes.glanceView);a.createRefMarkerAndLog(e.tenant,b.mappingSet,k,a.RefmarkerActionTypes.glanceView,b.hitParameters)},logPPDBundlesExpander:function(c){a.increaseMetricBy(!1===typeof b.isEnhanceUpsellPresence?"vas_ppd_bdl_sm_clicks":"vas_ppd_bdl_sm_upg_clicks",
1);a.createRefMarkerAndLog(e.tenant,b.mappingSet,e.widget,c?a.CSMActionTypes.expandBulletPoints:a.CSMActionTypes.collapseBulletPoints,b.hitParameters);a.createCSMNameAndLog(m.tenant,m.widget,c?a.RefmarkerActionTypes.expandBulletPoints:a.RefmarkerActionTypes.collapseBulletPoints)},logPPDBundlesATCReftag:function(){var c="vas_bdlppd_atc_"+(!0===b.enhancePpdViewModel.isUpsellCritical?"1":"0"),d=b.enhancePpdViewModel.baseAsinOfferData.upsellAsin,g=b.enhancePpdViewModel.productAsin,l=f.getPriceValue(b.enhancePpdViewModel.winningServiceMinPrice);
a.logRefTag(c,"LocalServicesWidget","CartAdd",d,"popUp",b.enhancePpdViewModel.baseAsinOfferData.merchantId,g,l);a.createCSMNameAndLog(m.tenant,m.widget,a.CSMActionTypes.addToCart);a.createRefMarkerAndLog(e.tenant,b.mappingSet,e.widget,a.RefmarkerActionTypes.addToCart,b.hitParameters)},logCheckboxInteractionReftag:function(c){var d=!0===b.enhancePpdViewModel.isUpsellCritical?"1":"0",g=b.enhancePpdViewModel.baseAsinOfferData.upsellAsin,l=b.enhancePpdViewModel.productAsin,h=f.getPriceValue(b.enhancePpdViewModel.winningServiceMinPrice);
a.logRefTag("vas_bdlppd_"+c+"_"+b.ppdBundlesInteractionSlice+"_"+d+"_a","LocalServicesWidget","AddServiceCheck",g,"popUp",b.enhancePpdViewModel.baseAsinOfferData.merchantId,l,h);a.createCSMNameAndLog(m.tenant,m.widget,"y"===c?a.CSMActionTypes.serviceIncluded:a.CSMActionTypes.serviceNotIncluded);a.createRefMarkerAndLog(e.tenant,b.mappingSet,e.widget,"y"===c?a.RefmarkerActionTypes.serviceIncluded:a.RefmarkerActionTypes.serviceNotIncluded,b.hitParameters)},logBuyBackReftagHandler:function(){var c=b.enhancePpdViewModel.baseAsinOfferData.upsellAsin,
d=b.enhancePpdViewModel.productAsin,g="vas_bbk_"+d+"_"+c,l=f.getPriceValue(b.enhancePpdViewModel.winningServiceMinPrice);a.logRefTag(g,"LocalServicesWidget","CartAdd",c,"popUp",b.enhancePpdViewModel.baseAsinOfferData.merchantId,d,l);a.createRefMarkerAndLog(e.tenant,b.mappingSet,e.widget,"bbk",b.hitParameters);return!0}}});q.when("A","vas-enhanceppd-setting","vas-metrics-publisher","vas-addUpsell-to-cart","ready").execute("vas-enhanceppd-controller",function(g,d,a,f){var c=g.$,l=function(){d.logPPDBundlesATCReftag()},
b=function(){d.logBuyBackReftagHandler()},e=function(){try{g.trigger("vas:remove-service-asin-buybox-event"),c("#addToCart").unbind("submit.ppdBundles"),d.getSettings("shouldIntegrateWithBuyback")&&c("#buyBackBuyNow").length&&c(document.body).undelegate("#buyBackBuyNow","submit.vasBuyBackReftag"),a.increaseMetricBy("a2cFormRemoveEventSend_fail",0),a.metric("a2cFormRemoveEventSend_success")}catch(b){a.increaseMetricBy("a2cFormRemoveEventSend_success",0),a.metric("a2cFormRemoveEventSend_fail"),a.log(b)}},
m=function(e){try{g.trigger("vas:add-service-asin-buybox-event",e),c("#addToCart").bind("submit.ppdBundles",l),d.getSettings("shouldIntegrateWithBuyback")&&(g.trigger("vas:add-service-asin-buyback-form-event",e),c(document.body).delegate("#buyBackBuyNow","submit.vasBuyBackReftag",b)),a.increaseMetricBy("a2cFormAddEventSend_success",1),a.increaseMetricBy("a2cFormAddEventSend_fail",0)}catch(f){a.increaseMetricBy("a2cFormAddEventSend_success",0),a.increaseMetricBy("a2cFormAddEventSend_fail",1),a.log(f)}},
h={ppdBundlesCheckBoxHandler:function(){var a="",b=c("#ppdBundlesEnhancedWrapper"),f=c("#ppdBundlesEnhancedBox");c("#ppdb-add-service-checkbox").is(":checked")?(a="y",e(),d.getSettings("isEnhanceUpsellPresence")&&c("#ppdb-upsell-service-checkbox").is(":checked")?m(d.getSettings("enhancePpdViewModel").upsellAsinOfferData):m(d.getSettings("enhancePpdViewModel").baseAsinOfferData),b.addClass("ppdBundlesOrangeBorder").removeClass("ppdBundlesGrayBorder"),f.addClass("ppdBundlesOrangeBox"),null===d.getSettings("ppdBundlesInteractionSlice")&&
d.setSettings("ppdBundlesInteractionSlice",1),c("#ppdBundlesExpanderContent").is(":visible")||c("#ppdBundlesExpanderHeadingLink").click()):(a="n",b.addClass("ppdBundlesGrayBorder").removeClass("ppdBundlesOrangeBorder"),f.removeClass("ppdBundlesOrangeBox"),d.getSettings("isEnhanceUpsellPresence")&&c("#ppdb-upsell-service-checkbox").is(":checked")&&c("#ppdb-upsell-service-checkbox").click(),e());d.logCheckboxInteractionReftag(a);d.setSettings("ppdBundlesInteractionSlice",1)},ppdBundlesUpsellCheckBoxHandler:function(){var a=
"";c("#ppdb-upsell-service-checkbox").is(":checked")?(c("#ppdb-add-service-checkbox").is(":checked")?(e(),m(d.getSettings("enhancePpdViewModel").upsellAsinOfferData)):c("#ppdb-add-service-checkbox").click(),a="y"):(e(),m(d.getSettings("enhancePpdViewModel").baseAsinOfferData),a="n");d.logCheckboxInteractionReftag(a)}},k=function(){g.off("a:expander:ppdBundlesExpander:toggle:expand");g.on("a:expander:ppdBundlesExpander:toggle:expand",function(a){d.logPPDBundlesExpander(!0)});g.off("a:expander:ppdBundlesExpander:toggle:collapse");
g.on("a:expander:ppdBundlesExpander:toggle:collapse",function(a){d.logPPDBundlesExpander(!1)});c("#ppdb-add-service-checkbox").unbind("change");c("#ppdb-add-service-checkbox").bind("change",function(){h.ppdBundlesCheckBoxHandler()});d.getSettings("isEnhanceUpsellPresence")&&(c("#ppdb-upsell-service-checkbox").unbind("change"),c("#ppdb-upsell-service-checkbox").bind("change",function(){h.ppdBundlesUpsellCheckBoxHandler()}))},n=function(){g.off("vas:ldbb-a2c-event:desktop");g.on("vas:ldbb-a2c-event:desktop",
function(){if(c("#ppdb-add-service-checkbox").is(":checked")){var a;a=d.getSettings("isEnhanceUpsellPresence")&&c("#ppdb-upsell-service-checkbox").is(":checked")?d.getSettings("enhancePpdViewModel").upsellAsinOfferData:d.getSettings("enhancePpdViewModel").baseAsinOfferData;f.addUpsell(a.upsellAsin,a.offerlistingId,d.getSettings("sessionId"))}});g.off("vas:ldbb-upsell-added:desktop");g.on("vas:ldbb-upsell-added:desktop",function(){l()})};g.off("vas:widgetname:enhancedPPD");g.on("vas:widgetname:enhancedPPD",
function(){d.fetchEnhancePpdSetting();k();n();c("#ppdb-add-service-checkbox").is(":checked")?(e(),c("#ppdBundlesEnhancedWrapper").addClass("ppdBundlesOrangeBorder").removeClass("ppdBundlesGrayBorder"),c("#ppdBundlesEnhancedBox").addClass("ppdBundlesOrangeBox"),d.getSettings("isEnhanceUpsellPresence")&&c("#ppdb-upsell-service-checkbox").is(":checked")?m(d.getSettings("enhancePpdViewModel").upsellAsinOfferData):m(d.getSettings("enhancePpdViewModel").baseAsinOfferData)):(c("#ppdBundlesEnhancedWrapper").addClass("ppdBundlesGrayBorder").removeClass("ppdBundlesOrangeBorder"),
c("#ppdBundlesEnhancedBox").removeClass("ppdBundlesOrangeBox"))})});q.register("vas-ppdbundle-config",function(){return{ppdBundlesMetricConstants:{refmarkerPrefixes:{tenant:"vas",widget:"ppdb"},hitRecordConstants:{pageType:"DetailPage",subPageType:"AddServices"},additionalRequestDataKeys:{zipCode:"zip",isCritical:"crtcl"},metricPrefixes:{tenant:"vas",widget:"ppdb"}}}});q.when("A","vas-common-settings","vas-metrics-publisher","vas-utilities","vas-ppdbundle-config","vas-metric-utils","ready").register("vas-ppdbundle-setting",
function(g,d,a,f,c,l){var b=g.$,e={ppdBundleViewModel:{}},m=c.ppdBundlesMetricConstants.refmarkerPrefixes,h=c.ppdBundlesMetricConstants.metricPrefixes;return{getSettings:function(a){return e.hasOwnProperty(a)?e[a]:e},setSettings:function(a,b,c){a&&c?e[a][c]=b:a&&(e[a]=b)},fetchPpdBundleSetting:function(){e.ppdBundleViewModel=d.getSetting("winningWidgetVM");e.productAsin=d.getSetting("widgetCommonVM").productAsin;e.zipCode=d.getSetting("widgetCommonVM").zipCode;e.buyboxPrice=d.getSetting("widgetCommonVM").buyboxPrice;
e.sessionId=d.getSetting("widgetCommonVM").sessionId;e.mappingSet=d.getSetting("widgetCommonVM").mappingSet;e.ppdBundlesMetricConstants=c.ppdBundlesMetricConstants;e.hitParameters=l.createHitParameters(e.ppdBundlesMetricConstants);var g=b("#ppdb-add-service-checkbox");g.is(":checked")&&g.prop("checked",!1);var g=!0===e.ppdBundleViewModel.isUpsellCritical?"1":"0",n=e.zipCode,q=e.productAsin,x=f.getPriceValue(e.ppdBundleViewModel.baseAsinOfferData.price),w=f.getPriceValue(e.buyboxPrice),t=e.ppdBundleViewModel.baseAsinOfferData.upsellAsin,
u=e.ppdBundleViewModel.baseAsinOfferData.merchantId,y="vas_bdlppd_old_"+g+"_a_"+n;a.logRefTag("vas_bdlppd_ld_"+g+"_a_"+n,"LocalServicesWidget","Impression",t,"popUp",u,q,x,w);a.logRefTag(y,"LocalServicesWidget","Impression",t,"popUp",u,q,x,w);a.metric("bdl_old_gv");a.createCSMNameAndLog(h.tenant,h.widget,a.CSMActionTypes.glanceView);a.createRefMarkerAndLog(m.tenant,e.mappingSet,m.widget,a.RefmarkerActionTypes.glanceView,e.hitParameters)},logCheckboxInteractionReftag:function(b){var c=!0===e.ppdBundleViewModel.isUpsellCritical?
"1":"0",d=e.ppdBundleViewModel.baseAsinOfferData.upsellAsin,g=e.productAsin,l=f.getPriceValue(e.ppdBundleViewModel.baseAsinOfferData.price);f.getPriceValue(e.buyboxPrice);a.logRefTag("vas_bdlppd_"+b+"_1_"+c+"_a","LocalServicesWidget","AddServiceCheck",d,"popUp",e.ppdBundleViewModel.baseAsinOfferData.merchantId,g,l);a.createCSMNameAndLog(h.tenant,h.widget,"y"===b?a.CSMActionTypes.serviceIncluded:a.CSMActionTypes.serviceNotIncluded);a.createRefMarkerAndLog(m.tenant,e.mappingSet,m.widget,"y"===b?a.RefmarkerActionTypes.serviceIncluded:
a.RefmarkerActionTypes.serviceNotIncluded,e.hitParameters)},logATCInteraction:function(){a.createCSMNameAndLog(h.tenant,h.widget,a.CSMActionTypes.addToCart);a.createRefMarkerAndLog(m.tenant,e.mappingSet,m.widget,a.RefmarkerActionTypes.addToCart,e.hitParameters)},logSDPRedirectReftagAndMetric:function(){a.createCSMNameAndLog(h.tenant,h.widget,a.CSMActionTypes.redirect);a.createRefMarkerAndLog(m.tenant,e.mappingSet,m.widget,a.RefmarkerActionTypes.redirect,e.hitParameters);return!0}}});q.when("A","vas-ppdbundle-setting",
"vas-metrics-publisher","vas-addUpsell-to-cart","ready").execute("vas-ppdbundle-controller",function(g,d,a,f){var c=g.$,l=function(){try{g.trigger("vas:remove-service-asin-buybox-event"),a.increaseMetricBy("a2cFormRemoveEventSend_fail",0),a.metric("a2cFormRemoveEventSend_success")}catch(b){a.increaseMetricBy("a2cFormRemoveEventSend_success",0),a.metric("a2cFormRemoveEventSend_fail"),a.log(b)}},b={ppdBundlesCheckBoxHandler:function(){var b="";if(c("#ppdb-add-service-checkbox").is(":checked")){b=d.getSettings("ppdBundleViewModel").baseAsinOfferData;
d.logATCInteraction();try{g.trigger("vas:add-service-asin-buybox-event",b),a.increaseMetricBy("a2cFormAddEventSend_success",1),a.increaseMetricBy("a2cFormAddEventSend_fail",0)}catch(e){a.increaseMetricBy("a2cFormAddEventSend_success",0),a.increaseMetricBy("a2cFormAddEventSend_fail",1),a.log(e)}b="y"}else l(),b="n";d.logCheckboxInteractionReftag(b)}},e=function(){g.off("vas:lux-zip-updated");g.on("vas:lux-zip-updated",function(){l()});c("#ppdb-add-service-checkbox").unbind("change");c("#ppdb-add-service-checkbox").bind("change",
function(){b.ppdBundlesCheckBoxHandler()});c("#ppdBundles-estimate-SDP").unbind("click");c("#ppdBundles-estimate-SDP").bind("click",function(){d.logSDPRedirectReftagAndMetric()})},h=function(){g.off("vas:ldbb-a2c-event:desktop");g.on("vas:ldbb-a2c-event:desktop",function(){if(c("#ppdb-add-service-checkbox").is(":checked")){var a=d.getSettings("ppdBundleViewModel").baseAsinOfferData;f.addUpsell(a.upsellAsin,a.offerlistingId,d.getSettings("sessionId"))}})};g.off("vas:widgetname:ppdBundle");g.on("vas:widgetname:ppdBundle",
function(){d.fetchPpdBundleSetting();e();h()})});q.when("A","vas-common-settings","ready").register("vas-sts-setting",function(g,d){var a={stsVM:{}};return{getSettings:function(d){return a.hasOwnProperty(d)?a[d]:a},setSettings:function(d,c,g){d&&g?a[d][g]=c:a[d]=c},fetchSTSSetting:function(){a.stsVM=d.getSetting("winningWidgetVM");a.productAsin=d.getSetting("widgetCommonVM").productAsin;a.zipCode=d.getSetting("widgetCommonVM").zipCode;a.buyboxPrice=d.getSetting("widgetCommonVM").buyboxPrice;a.refTagPrefix=
a.stsVM.isParentServiceAsin?"vas_psa_":a.stsVM.isShipToStore?"vas_sts_":a.stsVM.isSdpOfferSelected?"vas_sdp_offer_":"vas_";h.ue&&h.ue.tag&&(a.stsVM.isParentServiceAsin?h.ue.tag("psaIngressWidget"):a.stsVM.isShipToStore&&h.ue.tag("pdpShipToStoreWidget"));return a}}});q.when("A","vas-sts-setting","vas-metrics-publisher","ready").execute("vas-sts-controller",function(g,d,a){function f(){q.when(b.STS_QTY_DROPDOWN).execute(function(c){e.stsVM.isSdpOfferSelected&&(c=c.getSelect("quantity"),c.update({status:"disabled"}),
1<parseInt(c.val(),10)&&(c.setValue("1"),l(b.STS_QUANTITY_ALERT).removeClass("a-hidden"),a.logUeMetricIncreaseCount(e.refTagPrefix+"quantityAlert")))})}function c(){q.when(b.STS_QTY_DROPDOWN).execute(function(a){(a=a.getSelect("quantity"))&&a.update({status:"normal"});l(b.STS_QUANTITY_ALERT).addClass("a-hidden");l(b.STS_SERVICES_ROW).removeClass("addProfessionalServicesRow-alert-on")})}var l=g.$,b={STS_CHECKBOX:"#vas-psa-sts-checkbox-input",STS_PREFERENCES_BUTTON:"#vas-psa-sts-preferences-button",
STS_QUANTITY_ALERT:".vas-psa-sts-quantity-alert",STS_SERVICES_ROW:".addProfessionalServicesRow",STS_ATC_BUTTON:"#add-to-cart-button",STS_QTY_DROPDOWN:"a-dropdown"},e={},h={stsCheckBoxHandler:function(){if(l(b.STS_CHECKBOX).is(":checked")){if(a.logUeMetricIncreaseCount(e.refTagPrefix+"vasCheckBox_checked"),f(),e.stsVM.isSdpOfferSelected)try{g.trigger("vas:add-service-asin-buybox-event",e.stsVM.baseAsinOfferData),a.increaseMetricBy("a2cFormAddEventSend_success",1),a.increaseMetricBy("a2cFormAddEventSend_fail",
0)}catch(d){a.increaseMetricBy("a2cFormAddEventSend_success",0),a.increaseMetricBy("a2cFormAddEventSend_fail",1),a.log(d)}}else{a.logUeMetricIncreaseCount(e.refTagPrefix+"vasCheckBox_unchecked");c();try{g.trigger("vas:remove-service-asin-buybox-event"),a.increaseMetricBy("a2cFormRemoveEventSend_fail",0),a.increaseMetricBy("a2cFormRemoveEventSend_success",1)}catch(h){a.increaseMetricBy("a2cFormRemoveEventSend_success",0),a.increaseMetricBy("a2cFormRemoveEventSend_fail",1),a.log(h)}}},stsAtcHandler:function(){a.logUeMetricIncreaseCount(e.refTagPrefix+
"atcClick");l(b.STS_CHECKBOX).is(":checked")?a.logUeMetricIncreaseCount(e.refTagPrefix+"atcClick_vasBuyBoxChecked"):a.logUeMetricIncreaseCount(e.refTagPrefix+"atcClick_vasBuyBoxUnChecked");l(b.STS_ATC_BUTTON).unbind("click.lsatc");l(b.STS_ATC_BUTTON).click()}},p=function(){l(b.STS_CHECKBOX).unbind("change");l(b.STS_CHECKBOX).bind("change",function(){h.stsCheckBoxHandler()});l(b.STS_ATC_BUTTON).unbind("click.lsatc");l(b.STS_ATC_BUTTON).bind("click.lsatc",function(){h.stsAtcHandler()});l(b.STS_PREFERENCES_BUTTON).unbind("click");
l(b.STS_PREFERENCES_BUTTON).bind("click",function(){a.logUeMetricIncreaseCount(e.refTagPrefix+"selectAssemblyPreferences_click")});h.stsCheckBoxHandler()};g.off("vas:widgetname:sts");g.on("vas:widgetname:sts",function(){e=d.fetchSTSSetting();p()})});q.register("vas-regularPPD-config",function(){return{regularPPDMetricConstants:{refmarkerPrefixes:{tenant:"vas",widget:"rpdp"},hitRecordConstants:{pageType:"DetailPage",subPageType:"AddServices"},additionalRequestDataKeys:{zipCode:"zip"},metricPrefixes:{tenant:"vas",
widget:"rpdp"}}}});q.when("A","vas-common-settings","vas-metrics-publisher","vas-regularPPD-config","vas-metric-utils","ready").register("vas-regularppd-setting",function(g,d,a,f,c){var h,b,e,m,p=f.regularPPDMetricConstants.refmarkerPrefixes,k=f.regularPPDMetricConstants.metricPrefixes;return{fetchRegularPpdSetting:function(){h=d.getSetting("widgetCommonVM").productAsin;b=d.getSetting("winningWidgetVM").upsellAsin;e=d.getSetting("widgetCommonVM").mappingSet;d.getSetting("widgetCommonVM");d.getSetting("widgetCommonVM");
m=c.createHitParameters(f.regularPPDMetricConstants);a.createRefMarkerAndLog(p.tenant,e,p.widget,a.RefmarkerActionTypes.glanceView,m);a.createCSMNameAndLog(k.tenant,k.widget,a.CSMActionTypes.glanceView);a.logRefTag("vas_ppd_cs_"+h+"_"+b);a.logUeMetricIncreaseCount("vas_standard_pdp_show")},logRedirectMetrics:function(){a.createCSMNameAndLog(k.tenant,k.widget,a.CSMActionTypes.redirect);a.createRefMarkerAndLog(p.tenant,e,p.widget,a.RefmarkerActionTypes.redirect,m)}}});q.when("A","vas-regularppd-setting",
"vas-metrics-publisher","ready").execute("vas-regularppd-controller",function(g,d,a){var f=g.$,c=function(){f(".sdpRedirect").unbind("click");f(".sdpRedirect").bind("click",function(){d.logRedirectMetrics();a.logUeMetricIncreaseCount("vas_pdp_sdp_redirect");d.logRedirectMetrics()})};g.off("vas:widgetname:regularPPD");g.on("vas:widgetname:regularPPD",function(){c();d.fetchRegularPpdSetting()})});q.when("A","vas-common-settings","vas-metrics-publisher","ready").register("vas-brandmessaging-setting",
function(g,d,a){var f,c,h;return{fetchBrandMessagingSettings:function(){f=d.getSetting("widgetCommonVM").productAsin;c=d.getSetting("winningWidgetVM").upsellAsin;h=d.getSetting("winningWidgetVM").impressionReftag;a.logRefTag(h,"LocalServicesWidget","Impression",c,null,null,f,null,null);a.logUeMetricIncreaseCount("vas_brand_gv")}}});q.when("A","vas-brandmessaging-setting","vas-metrics-publisher","ready").execute("vas-brandmessaging-controller",function(g,d,a){var f=g.$,c=function(){f("#vas-brand-messaging-details-redirect").unbind("click");
f("#vas-brand-messaging-details-redirect").bind("click",function(){a.logUeMetricIncreaseCount("vas_brand_details_redir")})};g.off("vas:widgetname:brandMessagingDesktop");g.on("vas:widgetname:brandMessagingDesktop",function(){c();d.fetchBrandMessagingSettings()})});q.register("vas-lux-config",function(){return{luxMetricConstants:{refmarkerPrefixes:{tenant:"vas",widget:"lux"},hitRecordConstants:{pageType:"DetailPage",subPageType:"AddServices"},additionalRequestDataKeys:{zipCode:"zip",isCritical:"crtcl"},
metricPrefixes:{tenant:"vas",widget:"lux"}}}});q.when("A","vas-metrics-publisher","vas-common-settings","vas-lux-config","vas-widgets","ready").execute("vas-lux-controller",function(g,d,a,f){var c=g.$,h,b;"undefined"!==typeof a.getSetting("widgetCommonVM")&&(b=a.getSetting("widgetCommonVM").isLocationUXEnable,h=a.getSetting("widgetCommonVM").locationUXEvent);var e=f.luxMetricConstants.hitRecordConstants,m=f.luxMetricConstants.refmarkerPrefixes,p=f.luxMetricConstants.additionalRequestDataKeys,k=f.luxMetricConstants.metricPrefixes,
n=function(){var b={};b[d.hitParameterKeys.productAsin]=a.getSetting("widgetCommonVM").productAsin;b[d.hitParameterKeys.merchantId]=a.getSetting("widgetCommonVM").merchantId;b[d.hitParameterKeys.pageType]=e.pageType;b[d.hitParameterKeys.subPageType]=e.subPageType;b[d.hitParameterKeys.additionalRequestData]={};return b},q=function(b){var e=a.getSetting("widgetCommonVM").zipCode;e&&""!==e||(e="null");if(b!==e){var f=a.getSetting("widgetCommonVM").defaultServiceAsinToOffer,h=a.getSetting("widgetCommonVM").serviceAsin,
l=a.getSetting("widgetCommonVM").mappingSet,f=h?h:f,e="{'area':'"+b+"','prev_zip':'"+e+"','show_ppd_widget':'"+a.getSetting("widgetCommonVM").defaultServiceAsinToOffer+"','asinTitle':'"+a.getSetting("widgetCommonVM").defaultServiceAsinToOffer+"','svcAsin':'"+f+"','isLuxRefresh':'true'}",h=n();h[d.hitParameterKeys.upsellAsin]=f;h.additionalRequestData[p.zipCode]=b;d.createRefMarkerAndLog(m.tenant,l,m.widget,"rfrsh",h);e=encodeURIComponent(e);c.ajax({url:"/gp/product/ajax-handlers/ppd-ajax.html",data:{optionalParams:'{"vas":"'+
e+'"}',ASIN:a.getSetting("widgetCommonVM").productAsin,isVariationalParent:a.getSetting("widgetCommonVM").isVariationalParent,viewId:"PPD_AJAX",PTD:a.getSetting("widgetCommonVM").productPTD,WDG:a.getSetting("widgetCommonVM").productWDG},dataType:"html",type:"POST",success:function(a){d.createCSMNameAndLog(k.tenant,k.widget,"zipRefresh");g.trigger("vas:remove-service-asin-buybox-event");var b=document.createElement("div");b.innerHTML=a;a=c("#addServices_feature_div");(b=c("#addServices_feature_div",
b))?(d.increaseMetricBy("lux_zip_refresh_fail",0),a.replaceWith(b)):d.increaseMetricBy("lux_zip_refresh_fail",1)},error:function(a){d.createCSMNameAndLog(k.tenant,k.widget,"zipRefreshFail");d.increaseMetricBy("lux_zip_refresh_fail",1)}})}};"true"===b&&(g.state("VasLuxReftag"),g.state("VasLuxReftag")&&!1!==g.state("VasLuxReftag").fired||(d.logRefTag("vas_lux_zip_refresh_"+a.getSetting("widgetCommonVM").useTwisterRefreshVal),g.state("VasLuxReftag",{fired:!0})),g.on(h,function(a){"undefined"!==typeof a?
q(a.zipCode):q("null")}))})});
/* ******** */
(function(c){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,a=d?d("AmazonCertifiedDetailPageAssets"):b;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,b,d){c.when("A","ready").execute(function(a){var c=a.$,d=function(a){b.ue&&b.ue.count&&b.ue.count(a,1)},f=a.debounce(function(){var a=c("#amazon-certified-content");a.length&&!a.data("amazon-certified-render-counter-logged")&&(d("cetech-ac-badge-render"),a.data("amazon-certified-render-counter-logged",
!0))},1E3);a.on("a:popover:afterShow:AmazonCertifiedPopover a:popover:afterShow:AmazonCertifiedSecondaryView a:sheet:afterShow:AmazonCertifiedSheet",function(b){d("cetech-ac-explanatory-view-show");var e;b=c(".amazonCertifiedPageState").find("script").html();try{e=a.parseJSON(b)}catch(f){e={}}e=(e||{}).featuredCertificationShortId;c.get("/gp/product/ajax-handlers/reftag.html/ref="+(e?"amazon_certified_learn_more_"+e:"amazon_certified_learn_more"))});a.on("a:pageUpdate",f);f()})});
/* ******** */
(function(a){a.execute(function(){})})(function(){var a=window.AmazonUIPageJS||window.P,e=a._namespace||a.attributeErrors;return e?e("TAFCopyToClipboardAssets"):a}(),window);
/* ******** */
(function(c){var d=window.AmazonUIPageJS||window.P,h=d._namespace||d.attributeErrors,a=h?h("DetailPageAttachAssets"):d;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,d,h){});
/* ******** */
(function(c){var e=window.AmazonUIPageJS||window.P,g=e._namespace||e.attributeErrors,a=g?g("DetailPageExpertContentAssets"):e;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,e,g){c.when("A","Airy","ready").execute(function(a,m){function n(b){var c=b.parentId,d=b.modal;b=d.width;var d=d.height,f=.8*a.$(e).width(),m=.7*a.$(e).height(),f=Math.min(1.5,Math.min(f/b,m/d));a.$("#"+c).width(f*b).height(f*d)}function k(b){var e=b.parentId,d=b.metrics,f=b.resources,g=
b.initialVolume,n=d.videoId,k=d.client,l=d.marketplaceId,t=d.requestId,d=d.session,v=f.mediaUrl,w=f.postMediaSlateUrl,f=f.preMediaSlateUrl,p=b.modal.modalId;b=q.airySwfUrl;var r=m.isMobilePlatform(),h=void 0,u={parentId:e,contentId:n,mediaSourceInfo:v,swfUrl:b,slateImages:{preloadSlate:f,postMediaSlate:w},foresterMetadataParams:{client:k,method:r?"MobileDetailPage":"DetailPage",marketplaceId:l,requestId:t,session:d},bindings:{canplay:function(){h.setVolume(g)},play:function(){r&&h.enterFullScreen()}}};
r?h=m.embed(u):(a.on("a:popover:beforeShow:"+p,function(){c.when("a-modal").execute(function(a){(a=a.get(p))&&a.refresh();h?h.replay():(h=m.embed(u),h.play())})}),a.on("a:popover:afterHide:"+p,function(){h&&h.pause()}))}function g(){var b=q.airyCssUrl;0<l.length&&(b=a.$("\x3clink\x3e").attr("rel","stylesheet").attr("href",b),a.$("head").append(b))}var q=a.state("airyAssets"),l=a.state("dpreviewVideosMetadata");q&&l&&(g(),a.each(l,function(a){n(a);k(a)}),a.$(e).resize(a.debounce(function(){a.each(l,
n)},50)))});"use strict";c.when("A","ready").execute(function(a){a.$("a[data-ec-metrics]").each(function(c,g){var k=a.$(g),t=k.attr("data-ec-metrics");k.click(function(){e.ue.count(t,1)})})});"use strict";c.when("A","ready").execute(function(a){var c=a.$(".dpr-review-date").text();c&&""!==c.trim()||(a=a.$(".dpr-badge \x3e .dpr-award"),a.length&&a.css({marginTop:-a.height()/2}))})});
/* ******** */
(function(m){var t=window.AmazonUIPageJS||window.P,u=t._namespace||t.attributeErrors,a=u?u("SmartShelfAssets"):t;a.guardFatal?a.guardFatal(m)(a,window):a.execute(function(){m(a,window)})})(function(m,t,u){m.when("A","twister-aui-page-state","ready").register("smart-shelf-mobile",function(a,m){function h(a){var d={clientName:"SmartShelf",ASIN:a.find("input[name='a']").val(),offeringListingID:a.find("input[name='oid']").val(),verificationSessionID:a.find("input[name='verificationSessionID']").val(),
quantity:a.find("input[name='quantity']").val()};a.find("#mbb-checkbox-input")&&a.find("#mbb-checkbox-input").prop("checked")&&(d["ASIN.warranty"]=a.find("#mbb-checkbox-input").val(),d["offeringListingID.warranty"]=a.find("#mbb-offering-id").val(),d["quantity.warranty"]=a.find("#mbb-quantity").val());a.find("#freeSampleAsin-cart")&&a.find("#freeSampleAsin-cart").val()&&""!==a.find("#freeSampleAsin-cart").val()&&(d["ASIN.sample"]=a.find("#freeSampleAsin-cart").val(),d["offeringListingID.sample"]=a.find("#freeSampleOfferingListingID-cart").val(),
d["quantity.sample"]=a.find("#freeSampleOfferQuantity-cart").val());return d}var f,k,v,l,q=function(){f||(f=!0,a.$("#ccxsmartShelfMobileWrapper").hide(),a.$("#ccxsmartShelfMobileWrapper").removeClass("aok-hidden"),a.slideDown(a.$("#ccxsmartShelfMobileWrapper"),1E3,"ease-out",function(){a.$("#add-to-cart-button").unbind("click",q)}),a.$("html, body").animate({scrollTop:a.$("#ccxsmartShelfMobileWrapper").offset().top-10},1E3))},n=function(b){var d=a.$(this),f=function(){d.unbind("submit",n);d.submit()};
a.post("/gp/add-to-cart/json",{params:h(d),success:function(a){a&&a.isOK?(q(),t.$Nav.when("api.setCartCount").run(function(e){e(a.cartQuantity)}),d.unbind("submit",n)):f()},error:f});b.preventDefault()},g=function(){"mobileApp"===l?a.$("#add-to-cart-button").bind("click",q):a.$("#add-to-cart-button").bind("click",function(){f||a.$("#addToCart").bind("submit",n)})},w=function(){v++;3>v&&x()},x=function(b){k||(b.preventDefault(),a.$.ajax({timeout:5E3,url:"/gp/aw/smartshelf/utility/trigger/?device="+
l,success:function(b,f,h){var e;if(b&&b!==u&&""!==b.trim())try{var c=JSON.parse(b.trim());k="T1"===c.treatment||"C"===c.treatment;e="T1"===c.treatment}catch(p){w()}k?(e&&g(),a.$("#add-to-cart-button").click()):w()},error:function(a,b,f){w()}}))};return{init:function(b){k=f=!1;v=0;l=b;m.updatePageState();b=a.state("smartShelfVASInfo");"mobile"===l&&b&&b.hideSmartShelf||a.$("#add-to-cart-button").bind("click",x)}}});m.when("A","atf").register("smart-shelf-desktop",function(a){function m(e,c){var b=
{clientName:"SmartShelf",ASIN:e.find("input[name='ASIN']").val(),verificationSessionID:e.find("input[name='session-id']").val(),offerListingID:e.find("input[name='"+c+"']").val(),quantity:e.find("input[name='quantity'], select[name='quantity']").val()},d=e.find(".abbListItem");d.length&&d.each(function(c){var e=a.$(this),d=e.find("input[id^='mbb-offer']"),f=e.find("input[name^='asin']"),e=e.find("input[name^='quantity']");d[0].checked&&(a.$("#csxswWarrantyInclude").addClass("aok-hidden"),b["ASIN.warranty"+
c]=f[0].value,b["offerListingID.warranty"+c]=d[0].value,b["quantity.warranty"+c]=e[0].value)});if(e.find(".atcFormServiceAsinData").length){var d=e.find(".atcFormServiceAsinData[name^='asin']"),f=e.find(".atcFormServiceAsinData[name^='offeringID']"),g=e.find(".atcFormServiceAsinData[name^='quantity']");d.length&&f.length&&g.length&&(b[d[0].id]=d[0].value,b[f[0].id]=f[0].value,b[g[0].id]=g[0].value)}e.find("#freeSampleOfferListingID")&&e.find("#freeSampleOfferListingID").val()&&""!==e.find("#freeSampleOfferListingID").val()&&
(b["ASIN.sample"]=a.$("input#csxfsSelectedAsin").val(),b["offeringListingID.sample"]=e.find("#freeSampleOfferListingID").val(),b["quantity.sample"]=1);return b}var h,f,k,v,l,q={},n={},g=t.ue,w=a.$(".ccxss_desktop_atc_form").length,x=function(b,c){a.$(b).addClass("aok-hidden");a.$(c).removeClass("aok-hidden")},b=function(a){var c="";a.length&&null!==a.prop("action")&&(c=a.prop("action"));var b="",d=c.search("ref=");a.length&&-1!==d&&(b=c.substr(d,c.length));return b},d=function(e){var c=a.$(this),
f=b(c),h={sessionID:c.find("input[name='session-id']").val(),clientName:"SmartShelf"},r=function(){c.unbind("submit",d);c.submit()},y=function(b,d){(function(d){return a.on("SUCCESS_CALL_BACK"+c.attr("id"),function(f){b&&b.isOK?(t.$Nav.when("api.setCartCount").run(function(a){a(f)}),"main"!==e.data.buttonType||k?f<=d?x(c.find(".ccxss_atc_spinner"),c.find(".ccxss_error_message")):(g&&g.count&&g.count("smartShelfAccessoriesAdded",1),x(c.find(".ccxss_atc_spinner"),c.find(".ccxss_success_message"))):
(f<=d?(a.$(".smartShelfSuccess").addClass("aok-hidden"),a.$(".smartShelfFailure").removeClass("aok-hidden")):(a.$(".smartShelfFailure").addClass("aok-hidden"),a.$(".smartShelfSuccess").removeClass("aok-hidden")),l||(0===w&&(w=a.$(".ccxss_desktop_atc_form").length),g&&g.count&&g.count("smartShelfAccessoriesSeen",w),g&&g.count&&g.count("smartShelfShowSecondaryPanel",1),l=!0),v.animateIn(q[e.data.buttonId]),k=!0)):r();a.off("SUCCESS_CALL_BACK"+c.attr("id"))})})(d);z("SUCCESS_CALL_BACK"+c.attr("id"),
h)},z=function(b,c){a.post("/gp/api/cart/1.0/get-cart-count.json",{params:c,success:function(c){var e;c&&c.isOK&&c.total&&c.total.numActiveItem!==u&&(e=c.total.numActiveItem);a.trigger(b,e)},error:r})};"ss"===e.data.buttonType&&(a.$(c.find(".csxsw_item_atc")).addClass("aok-hidden"),a.$(c.find(".ccxss_atc_spinner")).removeClass("aok-hidden"));a.on("ATC_CALL_BACK"+c.attr("id"),function(b){a.post("/gp/add-to-cart/json/"+f,{params:m(c,n[e.data.buttonId]),success:function(a){y(a,b)},error:r});a.off("ATC_CALL_BACK"+
c.attr("id"))});z("ATC_CALL_BACK"+c.attr("id"),h);e.preventDefault()},y=function(b){a.$(b.data.button).closest("form").bind("submit",{buttonType:"main",buttonId:b.data.button},d);a.$(".ccxss_desktop_atc_form").bind("submit",{buttonType:"ss",buttonId:"smartShelfButton"},d)},r=function(b){a.$(b).closest("form").unbind("submit",d);a.$(".ccxss_desktop_atc_form").length&&a.$(".ccxss_desktop_atc_form").unbind("submit",d)};return{init:function(b,c,d){v=b;h=a.state("smartShelfVASInfo");a.state("accessoryInfo");
l=k=!1;q[d]=c;n[d]="offerListingID";n.smartShelfButton="offerListingID";a.$("#"+c+"_secondaryPanelBackButton").click(function(){k=!1;r(d)});f=a.$("#"+c+"_actionPanelSecondaryPanelDivider");f.addClass("smartShelfDivider");f.removeClass("actionPanelSecondaryPanelDivider");h!==u&&h.hideSmartShelf||(r(d),a.$(d).bind("click",{button:d},y))},initV2:function(b,c,d,g){v=b;h=a.state("smartShelfVASInfo");a.state("accessoryInfo");l=k=!1;q[d]=c;n[d]=g;n.smartShelfButton="offerListingID";a.$("#"+c+"_secondaryPanelBackButton").click(function(){k=
!1;r(d)});f=a.$("#"+c+"_actionPanelSecondaryPanelDivider");f.addClass("smartShelfDivider");f.removeClass("actionPanelSecondaryPanelDivider");h!==u&&h.hideSmartShelf||(r(d),a.$(d).bind("click",{button:d},y))},undelegateFormHandlers:r,undelegateAllHandlers:function(){Object.keys(q).forEach(function(b){a.$(b).closest("form").unbind("submit",d)});a.$(".ccxss_desktop_atc_form").length&&a.$(".ccxss_desktop_atc_form").unbind("submit",d)}}})});
/* ******** */
(function(c){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,a=d?d("DetailPageFeaturesAssets"):b;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,b,d){});
/* ******** */
(function(m){var n=window.AmazonUIPageJS||window.P,q=n._namespace||n.attributeErrors,b=q?q("DetailPageSnSAssets"):n;b.guardFatal?b.guardFatal(m)(b,window):b.execute(function(){m(b,window)})})(function(m,n,q){});
/* ******** */
